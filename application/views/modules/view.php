<style type="text/css">
/*set to global*/
.ui-timepicker-wrapper{width: 110px !important}
.card [data-toggle="collapse"], [data-smooth-scroll] {cursor:pointer;}
#main-content {background:#f8fafb;}
#page-header {margin:40px 0 60px;}
#page-header a {font-size:16px; font-weight:700; transition:all .25s ease-in;}
.btn.color-theme {color:#1fb5ad; border:1px solid transparent;}
.btn-theme-o, .btn.color-theme:hover {color:#1fb5ad; background:#e0f7fa; border:1px solid #1fb5ad;}
.btn-theme-o:hover {color:#fff; background:#1fb5ad;}
.icon-btn {border:1px solid; border-radius:50px; font-size:20px; width:36px; height:36px; padding:0; text-align:center; line-height:36px; position:relative;}
.btn + .btn {margin-left:10px;}
.icon-btn .icn-txt {position:absolute; font-size:14px; font-weight:normal; left:50%; background:#aaa; top:27px;
  z-index:1; padding:4px 9px; display:inline-block; visibility:hidden; opacity:0; transition:all .1s .15s ease; margin-left:-60px; color:#fff;}
.icon-btn:hover .icn-txt {visibility:visible; opacity:1; top:40px;}

.btn-green-o {color:#4caf50; border:1px solid #4caf50; background:#eaf5ea;}
.btn-green-o:hover {color:#fff; background:#4caf50;}

.btn-red-o {color:#f44336; border:1px solid #f44336; background:#fee8e7;}
.btn-red-o:hover {color:#fff; background:#f44336;}

.btn-yellow-o {color:#ff9800; border:1px solid #ff9800; background:#fff8e1;}
.btn-yellow-o:hover {color:#fff; background:#ff9800;}

.btn-blue-o {color:#03a9f4; border:1px solid #03a9f4; background:#e4f2fe;}
.btn-blue-o:hover {color:#fff; background:#03a9f4;}

.btn-fill-theme {background:#1fb5ad;}
.btn-fill-blue {background:#03a9f4;}

.btn[class*="btn-fill-"] {color:#fff;}
.btn[class*="btn-fill-"]:hover {box-shadow:0px 2px 5px 0px rgba(0, 0, 0, 0.36);}

/*.card {box-shadow:0px 2px 5px 0px rgba(0, 0, 0, 0.36); padding:15px;}*/
.card {box-shadow:0px 2px 5px 0px rgba(0, 0, 0, 0.36); padding:9px;}
.card:not([class*="bg"]) {background:#fff;}
.collapsible-card {padding-bottom:1px;}
.collapsible-card .card-header {margin-bottom:14px;}

.bordered-card {border-left:2px solid;}
.card-header {border-bottom:3px solid #dde5e9;}
.card-title {margin:0;}
.card-title:first-letter {text-transform:uppercase;}
.flex-row .col {flex-grow:1;}
.card-content {color:#455a64;}
.card-content.have-tabs {position:relative; top:-13px;}
.nav.card-tabs {border:0; margin:0 5px 10px;}
.nav.card-tabs li {margin:-1px;}
.nav.card-tabs li a {padding:6px 15px; border-radius:0 0 11px 11px; border:1px solid #673ab7 !important; border-top:0 !important; border-top:0 !important;}
.nav.card-tabs li.active a, .nav.card-tabs li.active a:focus, .nav.card-tabs li.active a:hover {background-color:#ede7f6;}
.nav.card-tabs li.active {z-index:2;}
.nav.card-tabs li:hover {z-index:3;}



.card-content ul {padding:0; /*margin:0;*/}
.card-content li {list-style:none; font-size:14px;}
.toggle-card-btn {margin-top:8px; display:inline-block; border-radius:25px; font-size:20px; width:20px; height:20px; text-align:center; line-height:20px; cursor:pointer;}
.toggle-card-btn i {position:relative; left:-4px;}
.card-header .collapsed .icon-crm-angle-up:before {content:'\f107';}
.card-header .collapsed .icon-crm-angle-down:before {content:'\f106';}

.table-structure-info table {width:100%; margin-bottom:25px;}
.table-structure-info tr {background:#eceff1; border:solid #dfe4e7; border-width:1px 0;}
.table-structure-info tr:nth-child(even) {background:#ffffff;}
.table-structure-info td {width:100%; padding:8px 0;}
.table-structure-info th, .table-structure-info td[colspan] {padding:8px 10px;}
.table-structure-info table span {line-height:normal;}

/*new-table*/
.new-table {color:#455a64; font-size:14px;}
.new-table tbody tr:nth-child(odd) {background:#f2f4f5;}
.new-table tr:nth-child(even) {background:#eceff1;}
.new-table tr:nth-child(even) td {border:solid #dfe4e7; border-width:1px 0;}
.new-table tbody:hover tr:not(:hover) {background:transparent;}
.new-table tbody:hover {background:#fff;}
/*.new-table tbody:hover tr:not(:hover) {background:#fff;}*/
.new-table tbody tr:hover {-webkit-box-shadow:inset 1px 0 0 #dadce0, inset -1px 0 0 #dadce0, 0 1px 2px 0 rgba(60,64,67,.3), 0 1px 3px 1px rgba(60,64,67,.15); box-shadow:inset 1px 0 0 #dadce0, inset -1px 0 0 #dadce0, 0 1px 2px 0 rgba(60,64,67,.3), 0 1px 3px 1px rgba(60,64,67,.15);}

.new-table .th-row {background:#dfe4e7;}
.new-table .th-row th {padding:7px 15px 7px 7px; border-width:2px; border-color:#cad1d7;}

div.dataTables_length label select {width:auto; border-radius:4px; border-color:#dde5e9;}
.dataTables_filter label input {width:auto; border:1px solid #dde5e9; border-radius:4px;}

/*.card .dataTables_length label {font-size:0;}
.card .dataTables_length label:before {content:"Show"; font-size:13px; margin-right:5px;}
.card .dataTables_length label:after {content:"entries"; font-size:13px; margin-left:5px;}*/
.card .dataTables_length select {height:auto !important; font-size:13px; font-weight:normal !important; padding:3px; vertical-align:baseline;}
.card .dataTables_filter input {height:28px;}
.card .dataTables_info {padding-left:0;}

.section-row {margin-top:70px;}

/*End Global*/

/*.hero-row .card {margin-bottom:30px;}*/
.hero-row .card + .card {margin-top:45px;}
.client-view.hero-row .card + .card, .contract-view.hero-row .card + .card {margin-top:30px;}

#modalQualifyNow .panel {border:0;}
#modalQualifyNow label {font-size:20px;}
#modalQualifyNow .btn-xs {padding:5px 9px;}
#modalQualifyNow .btnNext {float:right;}
#modalQualifyNow .modal-header { background: #1fb5ad; color: white; }
#modalQualifyNow .close { color: white; opacity:1; }

#lead-info {padding:25px 10px;}
.card-footer {text-align:center; margin-top:24px;padding-top:25px;}

#client-info .card-footer {margin-top:26px;}
#contract-info .card-title {margin-bottom:10px;}
#contract-info .card-footer {margin-top:85px;}

.additional-info-accordion .panel {border:0;}
.additional-info-accordion .panel-heading {padding:0;}
.additional-info-accordion .panel-title {padding:0px 15px 0px 15px; cursor:pointer; border:1px solid #ddd;}
.additional-info-accordion .panel-body {padding:15px; background:#e4f2fe; border:1px solid #dde5e9; border-top:0;}
.panel-title.collapsed .fa-plus:before {content:"\f068";}
.additional-info-accordion .panel + .panel {margin-top:10px;}
.additional-info-accordion .panel-title:not(.collapsed), .additional-info-accordion .panel-title:hover {background:#e4f2fe;}

.state-cards {margin-top:20px;}
.state-cards .card-icon {font-size:26px; float:left; position:relative; width:50px; height:50px; text-align:center; line-height:55px; margin-top:6px; margin-left:2px;}
.state-cards .card-icon:before {content:'\e80b'; font-family:'icon-anbruch'; font-size:50px; position:absolute; top:0; left:0; line-height:53px; transform:scale(1.25); -webkit-transform:scale(1.25); -moz-transform:scale(1.25);}
.state-cards .card-icon i {position:relative;}
.state-cards h1 {font-size:52px; font-weight:700; margin:30px 0 0;}
.state-cards h4 {margin:0; font-weight:700;}


/*.contact-persons .fa-plus {margin-top:15px;}
.contact-persons .content {padding:15px; border-radius:0 0 5px 5px; border:1px solid #ddd; border-bottom:2px solid #ddd;}

.contact-persons .flex-row {background:#f5f5f5; margin-top:15px; border-radius:5px 5px 0 0; border:1px solid #ddd; padding:0 7px; cursor:pointer; border-bottom:0;}
.contact-persons .flex-row.collapsed {background:#e5e5e5; border-radius:5px; border:1px solid #ddd;}*/

.company-name {color:#505458; position:relative;font-size: 16px;}

#stage-indicator-wrapper {margin:-25px -25px 20px; background:#f8fafb; padding:25px; box-shadow:0px 2px 5px 0px rgba(0, 0, 0, 0.36);}
#stage-indicator-wrapper .col-8 .col {flex-grow:1; -ms-flex:0 0 12%; flex:0 0 12%; max-width:12%;}
#stage-indicator-wrapper h4 {padding-bottom:20px; margin:0 0 -11px; position:relative; font-size:15px; font-weight:700;}
#stage-indicator-wrapper h4 span {line-height:normal;}
#stage-indicator-wrapper h4:before {content:''; width:100%; height:3px; position:absolute; left:0; background:#767676; bottom:0; z-index:1;}
#stage-indicator-wrapper .status-completed h4:before {animation:timeline .5s 1s linear forwards; -webkit-animation:timeline .5s 1s linear forwards;}
#stage-indicator-wrapper .status-completed:nth-child(2) h4:before {animation-delay:1.5s; -webkit-animation-delay:1.5s;}
#stage-indicator-wrapper .status-completed:nth-child(3) h4:before {animation-delay:2s; -webkit-animation-delay:2s;}
#stage-indicator-wrapper .status-completed:nth-child(4) h4:before {animation-delay:2.5s; -webkit-animation-delay:2.5s;}
#stage-indicator-wrapper .status-completed:nth-child(5) h4:before {animation-delay:3s; -webkit-animation-delay:3s;}
#stage-indicator-wrapper .status-completed:nth-child(6) h4:before {animation-delay:3.5s; -webkit-animation-delay:3.5s;}
#stage-indicator-wrapper .status-completed:nth-child(7) h4:before {animation-delay:4s; -webkit-animation-delay:4s;}
#stage-indicator-wrapper .status-completed:nth-child(8) h4:before {animation-delay:4.5s; -webkit-animation-delay:4.5s;}
#stage-indicator-wrapper .status-completed h4 span {color:#767676; animation:flip .5s 1s linear forwards; -webkit-animation:flip .5s 1s linear forwards; display:inline-block;}
#stage-indicator-wrapper .status-completed:nth-child(2) h4 span {animation-delay:1.5s; -webkit-animation-delay:1.5s;}
#stage-indicator-wrapper .status-completed:nth-child(3) h4 span {animation-delay:2s; -webkit-animation-delay:2s;}
#stage-indicator-wrapper .status-completed:nth-child(4) h4 span {animation-delay:2.5s; -webkit-animation-delay:2.5s;}
#stage-indicator-wrapper .status-completed:nth-child(5) h4 span {animation-delay:3s; -webkit-animation-delay:3s;}
#stage-indicator-wrapper .status-completed:nth-child(6) h4 span {animation-delay:3.5s; -webkit-animation-delay:3.5s;}
#stage-indicator-wrapper .status-completed:nth-child(7) h4 span {animation-delay:4s; -webkit-animation-delay:4s;}
#stage-indicator-wrapper .status-completed:nth-child(8) h4 span {animation-delay:4.5s; -webkit-animation-delay:4.5s;}

.stage-icon {font-size:71px; color:#767676; display:inline-block;}
.status-completed .stage-icon {animation:flip .5s 1s linear forwards; -webkit-animation:flip .5s 1s linear forwards;}
#stage-indicator-wrapper .status-completed:nth-child(2) .stage-icon {animation-delay:1.5s; -webkit-animation-delay:1.5s;}
#stage-indicator-wrapper .status-completed:nth-child(3) .stage-icon {animation-delay:2s; -webkit-animation-delay:2s;}
#stage-indicator-wrapper .status-completed:nth-child(4) .stage-icon {animation-delay:2.5s; -webkit-animation-delay:2.5s;}
#stage-indicator-wrapper .status-completed:nth-child(5) .stage-icon {animation-delay:3s; -webkit-animation-delay:3s;}
#stage-indicator-wrapper .status-completed:nth-child(6) .stage-icon {animation-delay:3.5s; -webkit-animation-delay:3.5s;}
#stage-indicator-wrapper .status-completed:nth-child(7) .stage-icon {animation-delay:4s; -webkit-animation-delay:4s;}
#stage-indicator-wrapper .status-completed:nth-child(8) .stage-icon {animation-delay:4.5s; -webkit-animation-delay:4.5s;}
/*#stage-indicator-wrapper .block {padding:0 1px;}*/
.status-remaining:not(:first-child) h4:before {border-left:1px solid #fff;}
.status-remaining .indicate {background:#efefef;}
.status-remaining {color:#767676;}
#stage-indicator-wrapper .indicate {width:15px; height:15px; position:relative; top:-1px; border-radius:20px; line-height:18px; border:2px solid; font-size:0; z-index:2;}
#stage-indicator-wrapper .status-completed .indicate {width:20px; height:20px; animation:zoom-out .5s 1s forwards; -webkit-animation:zoom-out .5s 1s forwards; opacity:0;}
#stage-indicator-wrapper .status-completed:nth-child(2) .indicate {animation-delay:1.5s; -webkit-animation-delay:1.5s;}
#stage-indicator-wrapper .status-completed:nth-child(3) .indicate {animation-delay:2s; -webkit-animation-delay:2s;}
#stage-indicator-wrapper .status-completed:nth-child(4) .indicate {animation-delay:2.5s; -webkit-animation-delay:2.5s;}
#stage-indicator-wrapper .status-completed:nth-child(5) .indicate {animation-delay:3s; -webkit-animation-delay:3s;}
#stage-indicator-wrapper .status-completed:nth-child(6) .indicate {animation-delay:3.5s; -webkit-animation-delay:3.5s;}
#stage-indicator-wrapper .status-completed:nth-child(7) .indicate {animation-delay:4s; -webkit-animation-delay:4s;}
#stage-indicator-wrapper .status-completed:nth-child(8) .indicate {animation-delay:4.5s; -webkit-animation-delay:4.5s;}

#stage-indicator-wrapper .status-completed h4:after {content:''; display:inline-block; width:15px; height:15px; position:absolute; background:#efefef; border-radius:25px; bottom:-6px; border:2px solid #767676; left:50%; margin-left:-7.5px; z-index:1;}

#stage-indicator-wrapper .status-completed .indicate:before {font-size:11px; color:#fff;}
#stage-indicator-wrapper .status-completed .indicate {background:currentColor;}
/*#stage-indicator-wrapper .status-remaining .indicate {width:15px; height:15px; position:relative; top:-1px;}*/
.reminder-btn {font-size: 23px;margin: 0 15px;float: right;}
@keyframes timeline {
  0% {
    background:#767676;
  }
  100% {
    background:currentColor;
  }
}

@-webkit-keyframes timeline {
  0% {
    background:#767676;
  }
  100% {
    background:currentColor;
  }
}



@keyframes zoom-out {
  0% {
    transform:scale(0);
  }
  33% {
    transform:scale(1.5);
    color:inherit;
    opacity:1;
  }
  67% {
    transform:scale(.75);
    color:inherit;
    opacity:1;
  }
  100% {
    transform:scale(1);
    color:inherit;
    opacity:1;
  }
}

@-webkit-keyframes zoom-out {
  0% {
    -webkit-transform:scale(0);
  }
  33% {
    -webkit-transform:scale(1.5);
    color:inherit;
    opacity:1;
  }
  67% {
    -webkit-transform:scale(.75);
    color:inherit;
    opacity:1;
  }
  100% {
    -webkit-transform:scale(1);
    color:inherit;
    opacity:1;
  }
}

@keyframes flip {
  0% {
    transform:translatey(10px);
    opacity:0;
  }
  33% {
    transform:translatey(-10px);
    opacity:.33;
    color:inherit;
  }
  67% {
    transform:translatey(5px);
    opacity:.67;
    color:inherit;
  }
  100% {
    transform:translatey(0);
    opacity:1;
    color:inherit;
  }
}

@-webkit-keyframes flip {
  0% {
    -webkit-transform:translatey(10px);
    opacity:0;
  }
  33% {
    -webkit-transform:translatey(-10px);
    opacity:.33;
    color:inherit;
  }
  67% {
    -webkit-transform:translatey(5px);
    opacity:.67;
    color:inherit;
  }
  100% {
    -webkit-transform:translatey(0);
    opacity:1;
    color:inherit;
  }
}


.flex-row {display:flex; display:-webkit-flex; flex-wrap:wrap;}
/*input, select, .select2-selection__rendered, .flat-green{height: 34px !important;padding-left: 0 !important;background: white !important;border: none !important;}*/
.select2-selection--multiple{background: white !important;border: none !important;}
/*label{border-bottom: 1px solid #e2e2e4 !important;display: block !important;}*/
ul.select2-selection__rendered{border: none !important;}
.form-group {margin-bottom: 10px;}
div.icheckbox_flat-green{display: inline-block;}
/*.detail-panel{background-color: #efefef;}*/
.detail-box11 {padding: 15px;background: #fff; min-height:220px; border-radius: 5px; box-shadow:0 4px 8px 0 rgba(0,0,0,0.5); height:100%;}
.heading1 {font-size: 16px;color: #fff;font-weight: 600;text-transform: uppercase;display: block;background: #1fb5ad;padding: 5px 15px;margin-bottom: 20px;border-radius: 3px;}
.additional a {display: block;background: #f6f6f6;padding: 5px;}
.detail-box11 a i {float: right;}
strong, p, span, li {line-height: 1.8;}
.btn-success {border: 0;}
form > h1 {text-transform: uppercase;}
#addClassSchedule .modal-content,#editClassScheduleNew .modal-content {border-radius: 10px !important;}
#editClassScheduleNew .modal-title {text-align: center;font-weight: 600;color: #fff !important;}
#editClassScheduleNew .modal-header {background-color: #1FB5AD;padding: 7px;border-radius: 0;}
#editClassScheduleNew .modal-header .fas {color: #fff;}
#editClassScheduleNew .modal-body {background-color: #f1ffff;}
#editClassScheduleNew .form-control {border: 1px solid #1eb5ad !important;background-color: #f1ffff !important;border-radius: 0;}
#addClassSchedule .modal-body label,#editClassScheduleNew .modal-body label {font-weight: 600;color: #16514e;letter-spacing: 0.2px;padding: 4px 0;}
#addClassSchedule .modal-body label.error,#editClassScheduleNew .modal-body label.error {color:#e33244;}
#addClassSchedule .add_invite,#addClassSchedule .add_reminder,#editClassScheduleNew .add_invite,#editClassScheduleNew .add_reminder {text-transform: uppercase;background-color: #1eb5ad;color: #fff;padding: 7px 10px;font-weight: 700;}
#addClassSchedule .add_invite:hover,#addClassSchedule .add_reminder:hover,#editClassScheduleNew .add_invite:hover,#editClassScheduleNew .add_reminder:hover {background-color: #646464;transition: 0.4s;}
#addClassSchedule .remove_invite,#editClassScheduleNew .remove_invite {color: #1eb5ad;}
#addClassSchedule .remove_invite:hover,#editClassScheduleNew .remove_invite:hover {color: #646464;}
#addClassSchedule .guest_checkbox,#editClassScheduleNew .guest_checkbox {display: flex;}
#addClassSchedule .guest_checkbox .check,#editClassScheduleNew .guest_checkbox .check {margin-right: 12px;}
#editClassScheduleNew .modal-footer {background-color: #95d5d1;text-align: center;}
#editClassScheduleNew button.add_schedule_timing {border-radius: 0;font-weight: 700;margin: 4px 10px;background-color: #646464;padding: 8px 50px;border: none;}
#editClassScheduleNew button.btn-normal {border-radius: 0;font-weight: 700;margin: 4px 10px;background-color: #f2fffe;padding: 8px 50px;border: none;color: #646464;}
#editClassScheduleNew button.add_schedule_timing:hover {background-color: #0f8f88;transition: 0.4s;}
#editClassScheduleNew button.btn-normal:hover {background-color: #1eb5ad;
    transition: 0.4s;color: #fff;}
#addClassSchedule .form-group label {border-bottom: 0 !important;}
.ui-timepicker-container{ z-index:9999 !important; }
form .form-group .controls input,form .form-group .controls select{padding-left: 10px !important;}
.check_booking {text-transform: uppercase;background-color: #1eb5ad;color: #fff;padding: 5px 4px; border-radius: 4px; font-weight:700;font-size: 12px;}
.check_booking:hover, .check_booking:focus {background-color:#646464; transition:0.4s; color:#fff;}
.new-layout .modal-header {background:#fff; color:#333; border-radius:0; padding:0; position:relative; z-index:1;}
.new-layout .title {float:left; width:75%; text-align:left; padding:15px;}
.new-layout h4.modal-title {font-weight:400; letter-spacing:1px;}
.icons-plot {float:right; width:25%; text-align:right; padding:9px 15px;}
.icons-plot .icon {display:inline-block; border-radius:52px; width:37px; height:37px; line-height:37px; text-align:center; font-size:16px; cursor:pointer; position:relative; user-select:none; background:#fff; border:0;}
.icons-plot .icon[disabled] {opacity:.5; cursor:not-allowed;}
.icons-plot .close-modal {margin-left:15px;}
.icons-plot .icon i {color:#5f6368;}
.icons-plot .hover-title {position:absolute; bottom:-22px; left:-6px; color:#fff; padding:4px 10px; line-height:normal; font-size:14px; background:#5f6368; opacity:0; transition:all .25s .25s ease; -webkit-transition:all .25s .25s ease; -moz-transition:all .25s .25s ease; -ms-transition:all .25s .25s ease; -o-transition:all .25s .25s ease;}
.icons-plot .icon:hover {background:#f5f5f5;}
.icons-plot .icon:hover .hover-title {bottom:-30px; opacity:1;}
/* div#logs_wrapper .row-fluid , #dynamic-table-bookings_wrapper .row-fluid*/ {padding:0 15px;}
div#logs_wrapper .dataTables_paginate.paging_bootstrap.pagination , #dynamic-table-bookings_wrapper .dataTables_paginate.paging_bootstrap.pagination {margin-bottom:3px;}

/*.new-layout .form-control {background-color:#f1f3f4 !important; padding-left:10px !important;}*/
.new-layout label {display:inline-block !important; border:0 !important;}
.new-layout .input-disabled {display:inline-block; width:auto; background:transparent !important; font-weight:300 !important; border:0; padding:0 !important;}
.new-layout .ajax-load {float:right; width:80px; margin:-25px -25px -21px -17px; display:none;}
.new-layout .btn-success {background:#1eb5ad;}
.new-layout .btn-success:hover {background:#129e97;}
.new-layout .modal-footer .btn-normal {background:none;}
.new-layout .modal-footer .btn-normal:hover {background:#d5d5d5; color:#333;}
.event-day-time input {margin:0 8px 10px 0; display:inline-block;}
.event-day-time .event-recurrence {cursor:pointer; user-select:none; width:130px; margin-top:15px;}
.event-day-time .input-checkbox-icon {display:inline-block; width:17px; height:17px; border:2px solid #1fb5ad; border-radius:3px; margin:6px 6px 0 0; vertical-align:bottom; position:relative;}
.event-day-time input:checked + .input-checkbox-icon {background:#1fb5ad;}
.event-day-time input:checked + .input-checkbox-icon:before {content:''; width:12px; height:6px; border:solid #fff; border-width:0 0 2px 2px; transform:rotatez(-45deg); -webkit-transform:rotatez(-45deg); -ms-transform:rotatez(-45deg); -o-transform:rotatez(-45deg); -moz-transform:rotatez(-45deg); display:inline-block; position:absolute; left:0px; top:2px;}
.event-day-time .txt-to {left:-7px; position:absolute; top:36px;}
.event-day-time .all_dv[style="display: none;"] + div {margin-left:17px;}

.new-layout .inline-select {cursor:pointer; width:224px; background:#f1f3f4 !important; padding-left:5px !important;  border-radius:4px; margin-left:10px;}

.file_uploader {border:2px dashed #ccc; background:#f1f3f4; padding:24px; position:relative; text-align:center; font-size:20px;}
.file_uploader:hover {background:#f0f0f0; border-color:#bbb;}
.file_uploader input {position:absolute; width:100%; height:100% !important; left:0; top:0; opacity:0; cursor:pointer;}
.file_uploader .value:not(:empty) + .default {display:none;}

.dataTables_length, .dataTables_filter {padding-right:0; padding-left:0;}
 .dataTables_filter label {text-align:right;}
section.panel {box-shadow:none;}
.modal-dialog {box-shadow:0 4px 8px 0 rgba(0,0,0,0.5);}
.intro {background-color: rgb(251, 233, 231) !important;
  border: 1px solid red;}

.repeat{height: 40px !important;margin-bottom: 3px;margin-top: 10px;padding-left: 0px;}
.repeat input{width: 130px;height: 35px;padding: 0px;background-color: #f1f3f4 !important;border: 0px;border-radius: 10%;padding-left: 12px;color: #555 !important;}
.note {margin-top: 10px; width: 158px;margin-left: -29px !important;}
.add-notification{font-weight: 600;background-color: #1fb5ad !important;border: none;/*text-transform: uppercase*/;height: 30px;margin-top: 10px;}
.notification-via{
    cursor: pointer;
    color: #c2c2c2 !important;
    border-radius: 4px !important;
    border: 1px solid #d2dae1;
   /* margin-right: 10px;*/
    background: #f1f3f4 !important;
    border: 0px;
    font-weight: 700 !important;

    width: 77px !important;
}
/*.notification-via :hover{
      background-color: #f5f5f5 !important;
}
*/.get-notify .close{
  margin-top: 35px;
  margin-right: 150px;
  border-radius: 50%;
}
.get-notify .close :hover{
  color: #000;
  text-decoration: none;
  cursor: pointer;  
  opacity: .5;
}

/*Modal style start*/
.close-div {position: relative;z-index: 130;top: 4px;cursor: pointer;width: 40px;height: 40px;float: left;font-size: 25px;}
span.close-modal:before {content: "";width: 18px;height: 2px;position: absolute;background: #5f6368;transform: rotate(45deg);top: 19px;left: 18px;}
span.close-modal:after {content: "";width: 18px;height: 2px;position: absolute;transform: rotate(-45deg);background: #5f6368;top: 19px;left: 18px;}
.event-day-time {margin-left: 1px;}
.save-btn {width: 105px;height: 40px;font-size: 135%;background-color: #1eb5ad;color: white;order: 0px;border-radius: 8%;}
.event-day-time input {width: 110px;margin-right: 8px;display: inline-block;
}
#addClassSchedule .modal-body label{font-weight: 600;color: #16514e;letter-spacing: 0.2px;padding: 4px 0;
}
.event-day-time .input-checkbox-icon {display: inline-block;width: 17px;height: 17px;border: 2px solid #1fb5ad;border-radius: 3px;margin: 6px 6px 0 0;vertical-align: bottom;position: relative;
}
#addClassSchedule .form-control{border: 0;background-color: #f1f3f4;
}
.title {height: 50px;background-color: white !important;font-size: 22px;border-bottom: 1px solid #f1f3f4 !important;
}
.alert-true
{color:#3c763d;
}
.alert-false
{color:#a94442;
}
.get-notify{margin-bottom: 10px;margin-top: 0px;margin-left: 23px;
}
#add-notification-btn{margin-top: 0px;margin-bottom: 15px;margin-left: 12px;
}

.repeat input{
width: 100px !important;
    margin-left: 8px;
    margin-top: 2px;
}
.note select{
  margin-left: 39px;
    margin-top: 19px;
}
.get-notify .close
{
margin-right: 30px;}
#addClassSchedule .file_uploader {border: 2px dashed #1eb5ad;background: #f1f3f4;padding: 6px;position: relative;text-align: center;top: 0px;left: 270px;font-size: 12px;width: 105px;color: #16514e;
}
#cke_notes2{ margin-top:-40px; width: 108%;}
.scrollers{ max-height: 350px;overflow-y: scroll;overflow-x: hidden;margin: -25px -15px 0 0;padding: 25px 15px 0 0;
}
.cke_reset{height:250px !important;
}
#addClassSchedule .ajax-load {float:right; width:80px; margin:-22px -90px -57px -17px; display:none;}

#modalConvert .modal-fields{width:65%; }
#signing_rate_error {font-weight: bold;color:tomato;margin-left: 27%;}

.fc-ltr .fc-basic-view .fc-day-hover .fc-day-number {background:#62CBC6;}

#modalConvert .select2-selection--multiple { border: 1px solid #e2e2e4 !important; line-height: normal;border-radius: 4px;font-size: 13px; }
#modalConvert .row { margin-top: 15px; }
#modalConvert .select2-search__field { width: 240px !important; }
#modalConvert .select2-container { width:240px !important; }
#modal_error {font-weight: bold;color:tomato;}
#modalConvert label { font-weight: 550; padding-top: 5px;  }
#modalOwnerUpdate .modal-header { background: #1fb5ad; color:white; }
#modalOwnerUpdate .close { color: white; opacity: 1; }

#modalQualified .modal-header { background: #1fb5ad; color:white; }
#modalQualified .close { color: white; opacity: 1; }
.hero-row .card + .card{
  margin-top: 26px !important;
}
div#client-info, .col-sm-7 #contract-info{
    padding: 25px 10px !important;
}
#lead-info .lead-status,#client-info .client-status,#contract-info .contract-status{
    position: absolute;
    right: 27px;
    margin-top: -10px;
}
#lead-info .lead-status img , #client-info .client-status img,#contract-info .contract-status img{
    height: 73px;
    width: 95px;
    margin-left: 13px;
}
#lead-info .table-structure-info{
    margin-top: 14px;
}

.location-div {
    padding-right: 0px !important;
    width: 88%;
}
.location-icon {
    float: right;
    margin-top: -33px;
    margin-right: 1px;
    color: #fff;
    background: #1eb5ad;
    height: 32px;
    width: 32px;
    text-align: center;
    line-height: 36px;
    font-size: 24px;
    cursor: pointer;
    opacity: .8;
}
.fc-scroller{
  overflow-x: scroll;
    overflow-y: scroll !important;
    height: 350px !important;
}

.booking-modal{
  width: 75% !important;
}
.fc-event-container .fc-day-grid-event {box-shadow:0 2px 2px rgba(0,0,0,0.25), 0 1px 0 rgba(0,0,0,0.05); font-size:14px; padding:6px 25px 6px 6px; overflow:hidden; margin-bottom:4px; border-radius:25px;}
.fc-event-container .fc-day-grid-event:focus{color:#fff;}
.fc-event-container .fc-day-grid-event:hover {box-shadow:0 2px 2px rgba(0,0,0,0.5), 0 1px 0 rgba(0,0,0,0.15);}
.fc-event-container .fc-day-grid-event:hover:before {content:''; background:rgba(0, 0, 0, .2); position:absolute; width:100%; height:100%; left:0; top:0;}
.fc-event-container .fc-day-grid-event:not(.fc-not-end):after {content:'\f274'; font-family:"Font Awesome 5 Free"; position:absolute; right:3px; padding:4px; top:0; line-height:22px;}
.fc-event-container .fc-day-grid-event.booking_event:not(.fc-not-end):after {content:'\f02e';}
/*.fc-view-container {margin-top: 60px !important;}*/
.fc-icon-right-single-arrow:after, .fc-icon-left-single-arrow:after {content:'\f105'; font-family:fontawesome; font-size:22px; font-weight:normal;}
.fc-icon-left-single-arrow:after {content:'\f104';}
.fc-icon-left-single-arrow {left:-2px;}
.fc-ltr .fc-basic-view .fc-day-top .fc-day-number {float:none; text-align:center; display:table; line-height:36px; margin:5px auto; font-weight:bold; border-radius:25px; width:36px; height:36px; cursor:pointer; background:#f1f3f4; font-size:17px;}
.fc-ltr .fc-basic-view .fc-day-top:not(.fc-today) .fc-day-number:hover {background:#1BAEA6; color:#fff;}
.fc-ltr .fc-basic-view .fc-day-top.fc-today .fc-day-number {background:#1fb5ad; color:#fff;}

.fc .fc-button-group .fc-button {border: 0; border-radius: 4px; color: #fff; transition: 0.2s; text-shadow: none; background: #5a6766 ; text-transform: capitalize; color:#5a6766;}
.fc .fc-button-group .fc-prev-button, .fc .fc-button-group .fc-next-button {border-radius:25px; width:27px; height:27px; background:transparent !important; box-shadow:none;}

.fc .fc-button-group .fc-state-hover {background:#dadce0 !important; transition: 0.4s; color:#666 !important;}
.fc .fc-button-group .fc-corner-right {margin: 0 0 0 10px;}
.fc .fc-button-group .fc-basicWeek-button {padding: 0 15px 2px;}
.fc .fc-button-group .fc-basicDay-button {padding: 0 15px 2px;}

.fc-toolbar.fc-header-toolbar {padding:20px 16px 8px;}

.fc-toolbar .fc-right .fc-button-group .fc-button {border:1px solid #f3f3f3}
.fc-toolbar .fc-right .fc-button-group .fc-state-hover {border-color:#666; box-shadow:none;}
.fc .fc-button-group .fc-button.fc-state-active {background:#fff !important; box-shadow:none; color:#5a6766 !important; border:1px solid;}
.fc .fc-button-group .fc-month-button {margin-right:12px;}
/* .fc .fc-button-group .fc-month-button {margin-right: 12px; padding: 0px 20px 2px; background-color: #5a6766 !important;transition: 0.2s;}
.fc .fc-button-group .fc-month-button:hover {background: #3c8c88 !important; transition: 0.4s;}*/
.fc .fc-today-button {margin-left:10px; color:#5a6766; border-radius: 4px; background-color:#f3f3f3 !important; text-shadow: none; text-transform: capitalize; padding: 0px 20px 2px; border:1px solid #f3f3f3;}
.fc .fc-today-button.fc-state-hover:hover {background:#dadce0 !important; border:1px solid #666; color:#666 !important; box-shadow:none;}
.fc .fc-state-disabled {background:#fff !important; color:#5a6766 !important; border:1px solid; opacity:1;}
.fc-unthemed .fc-content, .fc-unthemed .fc-divider, .fc-unthemed .fc-list-heading td, .fc-unthemed .fc-list-view, .fc-unthemed .fc-popover, .fc-unthemed .fc-row, .fc-unthemed tbody, .fc-unthemed th, .fc-unthemed thead {border-color: rgba(164, 177, 176, 0.72);}
.fc-unthemed td {border-color:#dadce0;}
.top-menu .dropdown-menu:after, .top-menu .dropdown-menu:before {left:55% !important;}
.fc-toolbar .fc-center {margin:5px 14px;}
.fc-toolbar h2 {font-size:25px; color:#5a6766;}
.has-toolbar.fc {
    margin-top: 50px !important;
}
.fc-axis{
  width: 50px !important;
}
/*#lead-additional-info{
  margin-bottom: 80px !important;
}*/
/*#company-info{
  margin-bottom: 80px !important;
}*/
/*#add-company-info{
  margin-bottom: 80px !important;
}*/

/*#client-additional-info{
  margin-top: 80px !important;
}*/
/*#company-info{
  margin-top: 80px !important;
}*/
/*#contract-info1{
  margin-top: 80px !important;
}
#contract-processor-info{
  margin-top: 80px !important;
}
#description-info{
  margin-top: 80px !important;
}*/
.fc-content:hover { font-weight: 700;  }
.notes{
  height: 485px !important;
}
.notes-body{
  height:625px !important;
  min-height: 350px !important;
  overflow-y: auto;
}
.info{
  margin-top: 20px;
}
.other-info{
  /*height: 198px;*/
  overflow-y: auto;
}
.bg-purple-500{
  background-color: #673ab7 !important;
}
.color-purple-50{
  color: #f4f4f4db;
}
.color-purple{
  color: #673ab7;
}
#addClassSchedule .invite{
  width: 145px !important;
}
.invite_dv .controls .remove_invite:hover {background:#f1f3f4;}
.remove_invite:hover,#editClassSchedule .remove_invite:hover {color: #646464;}
/*.invite_dv .controls .remove_invite {padding:10px; width:34px; text-align:center; margin-left:10px; color:#767676; margin-right:-6px; cursor:pointer; border-radius:50px;}*/
.invite_dv .controls .remove_invite:hover {background:#f1f3f4;}
.invite_dv .controls .remove_invite {
    padding: 10px;
    /* margin-bottom: -27px; */
    position: absolute;
    width: 34px;
    margin-top: -34px;
    text-align: center;
    margin-left: 144px;
    color: #767676;
    margin-right: 0px;
    cursor: pointer;
    border-radius: 50px;
}
.well{
  margin-bottom: 0px !important; 
}
.select2-div{margin-top: 21px;position: absolute;}
.select2-div .select2-container{ width: 150px !important;}
.fc-agendaDay-view{margin-top: -30px;}
.pac-container{z-index:9999;}
#leads-popup .select2-container{width: 50% !important}
/* new code start here */
.leads-data-heading { padding: 5px 5px;color: #1fb5ad;font-weight: 600;letter-spacing: 0.3px;  }

table#leads-data-table td {padding: 5px 8px;width: 100%;font-weight:600; color:#455a64;}
table#leads-data-table td a:hover { color:#1fb5ad !important; }
table#leads-data-table tr:nth-child(even) { background: #f5f5f5;}

#leads-popup {width:355px; background-color:#fdfdfd; box-shadow:0px 3px 20px -10px; height:87vh;position: fixed;right: -350px;bottom:0;z-index: 9;display:none;}
#leads-popup .head {background-color:#1fb5ad; padding:5px;}
#leads-popup .head p {margin:5px; color:#fff; padding:5px; font-size:15px; font-weight:600;}
#leads-popup .head i {margin-right:5px;}
#leads-popup .left .date {font-size:12px; margin:5px 0; color:#aaa;}
#leads-popup .left h6 {margin:6px 0; font-size:15px; font-weight:700;}
#leads-popup .left .discription {font-size:12px; margin:0;}
#leads-popup .right .btn {font-size:12px; font-weight:600; padding:4px 8px; margin:5px 0px; border-radius:20px;}
#leads-popup .left {width:45%;}
#leads-popup .right {width:55%; margin:25px 0;}
#leads-popup .reminder-item {display:flex; padding:6px 12px; border-bottom:2px solid #e0e0e0;}
#leads-popup.open{right: 0;bottom: 5px;display: block;}
#leads-popup label.status {position: relative;padding: 6px;cursor: pointer;color: #4CAF50;float: right;}
#leads-popup label.status input {position: absolute;visibility: hidden;}
#leads-popup span.status-label {border-radius: 32px;border: 2px solid;padding: 4px 10px 4px 10px;position: relative;font-size: 10px;}
#leads-popup span.radio-icon {border: 2px solid;padding: 2px;background: #fff;display: inline-block;border-radius: 7px;position: absolute;left: 12px;top: 9px;}
#leads-popup label.status.ignore {color: #F44336;}
 #leads-popup label.status input:checked + .status-label {background:currentColor;}
 #leads-popup label.status input:checked + .status-label .text {color:#fff; position:relative;} 
 #leads-popup label.status input:checked + .status-label .radio-icon {color:#fff;}
 #leads-popup #leads-popup-close:hover {cursor: pointer;transition: all .25s ease-in;opacity: 0.7;}
 #leads-popup #leads-popup-close {background-color: #e0f7fa;padding: 3px 6px;color: #1fb5ad;}
 #leads-popup .leads-content {min-height:400px;max-height: auto;overflow-y: scroll;overflow: hidden;}
 #reminders.reminder-btn {color: initial !important;background-color: initial !important;}
 .btn-yellow-o:focus{color: #ff9800; border: 1px solid #ff9800;background: #fff8e1 }

 #leads-data-table th.company_name { color:black; }
 #leads-data-table_length {padding-left: 5px;width: 50%;font-size: 12px; }
 #leads-data-table{ width: 100% !important; }
 #leads-popup #leads-data-table_info { width:75%;padding:5px;  }
 #leads-popup #leads-data-table_paginate { font-size:11px;margin:10px 0px; }
 #leads-popup .leads-item { height:80vh; overflow-x: auto; }
 #leads-popup #leads-data-table_filter { padding-right: 5px;margin-top:10px;font-size: 12px; }
 #leads-popup #leads-data-table_filter input { width:100px !important; }
 #leads-popup.minimize { bottom: -87vh;margin-bottom: 58px; }
 #leads-popup-maximize { font-size: 18px; cursor:pointer; }
 #leads-popup-minimize { font-size: 18px; cursor:pointer; }
 .btn-voilet-o { color: #673bb7;border: 1px solid #673bb7;background: #673bb714; }
 .btn-voilet-o:hover { color: #fff;background: #673bb7; }
#lead-expand { cursor: pointer; }
#addClassSchedule .file_uploader {top: 35px !important;}

.contact-chip .card-title {margin-bottom: 10px;}
.contact-chip .card-content { margin-top:20px; }
.contact-chip .card-content li { font-size: 16px; }
#contact-2,#contact-3,#contact-4,#contact-5 { padding: 25px 10px;height:450px;background:white;}
i.yellow { color:#ffae00 !important;}
#lead-info { height:450px; }
#lead-info .card-footer { padding-top: 7px; }
#contact-tabs.nav-tabs>li.active>a { background-color:white;border-bottom:3px solid #10b7ab;color:#10b7ab;font-weight: 600; }
#contact-tabs { font-size: 14px; }
i.fa.fa-star.primary-contact:hover {color: #ffae02 !important;}

.btn-dodger-blue {color:dodgerblue; border:1px solid dodgerblue; background:#1e90ff1f;}
.btn-dodger-blue:hover {color:#fff; background:dodgerblue;}

.btn-purple {color:#901EFF; border:1px solid #901EFF; background:#901eff1f;}
.btn-purple:hover {color:#fff; background:#901EFF;}

#notes-info{border-color: #1fb5ad;}
#c-info .l-border{border-color: #fe832c;}
#lead-processor-info .l-border,#client-processor-info .l-border{border-color: #673ab7;}
.custom-bord{ padding: 10px 10px 17px 19px;margin:-9px -9px 8px -9px;}
.custom-bord h4{font-weight: 600}
#main-company-info h4,#client-company-info h4,#contract-company-info h4{color:#FE832C;}
#lead-processor-info .custom-bord,#client-processor-info .custom-bord{background-color: #F6F5FB}
#lead-processor-info,#main-company-info{border-top: 5px solid}
#main-company-info .custom-bord{background-color: #FEF9F5;color: #FE832C}
#main-company-info{border-color: #fe832c}
.l-border{border-left: 2px solid;padding: 12px;}
#lead-processor-info .table-structure-info,#client-processor-info .table-structure-info{
  padding: 6px !important;
  margin-right:0px !important;
  margin-left:0px !important;
}
.top-border{border-top: 5px solid}
#bookings-card .custom-bord{background-color: #F5FAF6}
#bookinglist .custom-bord{background-color: #F5FAF6}
#activities-card .custom-bord{background-color: #FFF6F7}
#attachments-card .custom-bord{background-color: #F1F9FC}
#contracts-card .custom-bord{background-color: #e91e630a}
#client-company-info .custom-bord,#contract-company-info .custom-bord{background-color: #FEF9F5;color: #FE832C}

#l-info .custom-bord{background-color: #F5FBFB}
.hero-row{border-color: #1fb5ad}
#c-info{padding: 6px;}
#main-company-info .nav-tabs>li.active>a, .nav-tabs>li.active>a:focus, .nav-tabs>li.active>a:hover {
    background-color: #fff !important;
    border-bottom-color: #fe832c !important;
    border-bottom: 3px solid #fe832c !important;
    border-top: 0 !important;
    border-left: 0 !important;
    border-right: 0 !important;
}
#company-info .nav-tabs>li.active>a {   
    background-color: #fff !important;
    border-bottom-color: #fe832c !important;
    border-bottom: 3px solid #fe832c !important;
    border-top: 0;
    border-left: 0;
    border-right: 0;
}
#contact-tabs.nav-tabs>li.active>a{
    background-color: #fff !important;
    border-bottom-color: #10b7ab !important;
    border-bottom: 3px solid #10b7ab !important;
    border-top: 0;
    border-left: 0;
    border-right: 0;
}
#lead-info .card-title, #client-info .card-title,#contract-info .card-title{color: #fe832c;display: inline;}
#notes-info{padding: 0px 10px}
#notes-info h4{ font-weight: 600 }
#save-note-btn{display: none;margin-left:0px;}
#collapse-lead-info{height: 516px}
.other-info{padding: 6px;overflow-y: hidden;}
#client-company-info,#contract-company-info{border-color:#FE832C }
#client-company-info .l-border,#contract-company-info .l-border{border-color:#FE832C }
#contract-info {padding: 10px;}
#contract-info .card-content{margin-top: 22px}
.ch #collapse-lead-info{
  height: 761px;
}
.client-view #collapse-lead-info{height: 703px}
.client-view #notes-info{height: 697px !important}
.ch #notes-info{height: 755px !important}
#add-note-btn,#save-note-btn{margin-left: 28px}
.dataTables_wrapper{position: static !important;}
#second_contracts_btn{
    width: 108px;
    position: absolute;
    color: white;
    background: #901fff;
    border: 1px solid #901fff;
    transform: rotate(90deg);
    right: -34px;
    top: 11px;
    padding-left: 0px;
    font-size: 15px;
    padding-right: 20px;
}
#second_clients_btn{
    width: 108px;
    position: absolute;
    color: white;
    background: #1f90ff;
    border: 1px solid #1f90ff;
    transform: rotate(90deg);
    right: -34px;
    top: 11px;
    padding-left: 0px;
    font-size: 15px;
    padding-right: 20px;
}
#second_leads_btn{
    width: 108px;
    position: absolute;
    color: white;
    background: #1fb5ad;
    border: 1px solid #1fb5ad;
    transform: rotate(90deg);
    right: -34px;
    top: 11px;
    padding-left: 0px;
    font-size: 15px;
    padding-right: 20px;
}
#second_leads_btn span,#second_clients_btn span,#second_contracts_btn span{
    margin-left: 7px;
    border: 1px solid;
    width: 18px;
    position: absolute;
    border-radius: 100%;
    margin-top: 2px;
    font-size: 8px;
    padding-top: 1px;
    margin-left: 4px;
}
.sticky-module{
    position: fixed !important;
    top: 126px !important;
    z-index: 1;
}
.col-sm-4 #Notes_search::placeholder{color:#c2c2c2 !important;}
#contact-tabs.nav-tabs ul>li>a:hover{border: 1px solid #1fb5ad !important;}
.nav>li>a:focus, .nav>li>a:hover{border: 1px solid #1fb5ad !important;color: #1fb5ad;}
#edit_details_start_division .select2-container{width: 200px !important;}
#edit_general_start_division .select2-container{width: 200px !important;}
#edit_parent_start_division .select2-container{width: 200px !important;}
#edit_additional_start_division .select2-container{width: 200px !important;}
#edit_lead_start_division .select2-container{width: 200px !important;}
#proposal_send label{
    color: #666666;
    font-weight: bold;
  }
#proposal_send .select2-container {
     width: 100% !important;
    border: 1px solid #e2e2e4;
    border-radius: 4px;
  }
.loader {
    border: 10px solid #1eb5ad;
    border-radius: 15%;
    width: 40px;
    height: 40px;
    -webkit-animation: spin 2s linear infinite;
    animation: spin 2s linear infinite;
    position: absolute;
    top: 18%;
    left: 75%;
    display: none; 
    z-index: 1;
}
#preview_proposal,#send_proposal{
  display: none;
}
#preview_proposal{
  margin-right: 5px;
}


  #modalOwnerUpdate .modal-header, #addFavoriteListModal .modal-header  { background: #1eb5ad; color:white; }
  #modalOwnerUpdate .close,#addFavoriteListModal .close { color: white; opacity:1; }
  #modalOwnerUpdate .modal-title ,#addFavoriteListModal .modal-title, #modalOwnerUpdate label { font-weight:550; }
  #modalCloserUpdate .modal-header, #addFavoriteListModal .modal-header  { background: #1eb5ad; color:white; }
  #modalCloserUpdate .close,#addFavoriteListModal .close { color: white; opacity:1; }
  #modalCloserUpdate .modal-title ,#addFavoriteListModal .modal-title, #modalCloserUpdate label { font-weight:550; }
    #addFavoriteListModal .modal-body label { font-weight: 600; }

#addFavoriteListModal .modal-body #own1 .select2 .select2-container {width: 150px !important;}


#sel-option{
    list-style-type: none;
}

#select{
    display:block;
    width:235px;
    height:33px;
    border:1px solid #999;
    padding-left:15px;
    color: black;
    background-color: #c7c5c5;
}
.toc-odd{
   position:absolute;
   top:32px;
   background:#f1f1f1;
   width:235px;
    display:none;
    padding: 0px;
    height: auto;
    max-height: 300px;
    overflow-y: scroll;
}
.toc-odd li{
    padding: 10px 10px;
    border-bottom:1px solid #999;
    display: flow-root;
 }
/* new code end here */

/*.calendar{
  overflow: auto !important;
  min-height: 100px;
  height: 520px;
}*/
/*Modal style end*/
</style><!--<link href="<?php /*echo base_url() */?>application/third_party/select2/dist/css/select2.min.css" rel="stylesheet" />
<script src="<?php /*echo base_url() */?>application/third_party/select2/dist/js/select2.min.js"></script>-->
<link href="<?php echo base_url() ?>static/js/fullcalendar/fullcalendar.min.css" rel="stylesheet" />
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
<link href="<?php echo base_url() ?>static/js/iCheck/skins/flat/green.css" rel="stylesheet">

<link href="<?php echo base_url() ?>static/js/multiselect/jquery.multiselect.css"  rel="stylesheet" type="text/css"/>
<link rel="stylesheet" type="text/css" href="<?php echo base_url('assets/timepicker/') ?>jquery.timepicker.css" />
<script type="text/javascript" src="<?php echo base_url('assets/timepicker/') ?>jquery.timepicker.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>

<script src="<?php echo base_url() ?>static/js/iCheck/jquery.icheck.js"></script>
<script src="<?php echo base_url() ?>static/js/icheck-init.js"></script>
<script src="<?php echo base_url() ?>assets/js/jquery.form.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.0/jquery.validate.min.js"></script>
<script src="<?php echo base_url() ?>assets/js/ckeditor/ckeditor.js"></script>
<script src="<?php echo base_url() ?>static/select2/dist/js/select2.min.js"></script>


<?php

$openerRights = false;
if($this->session->userdata('role_id') == 3 || $this->session->userdata('role_id') == 8)
{
  if($record_data['lead_role_id'] == 3 && $this->session->userdata('user_id') != $record_data['created_by'])
  {
    $openerRights = true;
  }
}
?>


<?php //echo '<pre>';print_r($record_data);die; ?>
<?php  $propose = 0;
       $develop_date = '';
       $proposed_date = '';
       //print_r($bookings);die();
      if(!empty($bookings)){ // Develop
        foreach ($bookings as $value) {
          if($value['status'] == 1){
            $propose = 1;
            $proposed_date = $value['status_change_date'];
          }
          $develop_date = $value['created_time'];
        }
      }

?>
<?php ///echo "<pre>"; print_r($favorite_list); die("ok"); ?>
<section id="main-content">
  <section class="wrapper">

    <div class="hero-row top-border" style="border-color: #673ab7">

      <div id="l-info" class="collapsible-card card color-theme ch">

          <div class="custom-bord flex-row toggable-header" data-toggle="collapse" data-target="#collapse-lead-info-pipeline" style="color:#673ab7">
            <div class="col">
              <h4><?php echo ($current_module == 'Leads') ? "Leads Pipeline" : (($current_module == "Clients")  ? "Clients Pipeline" : "Contracts Pipeline");?></h4>
            </div>
            <div>
              <span class="toggle-card-btn bg-purple-50">
                <i class="icon-crm-angle-up"></i>
              </span>
            </div>
          </div>

  <div id="collapse-lead-info-pipeline" class="card-content collapse in collapsed-have-height-equalizer row" style="margin-left: 0px;margin-right: 0px;">


    <div id="stage-indicator-wrapper" class="col-sm-12" style="box-shadow: none;margin:0px;">
      <div class="indicator-container container color-purple" style="max-width:100%;">


        <input type="hidden" id="current_module" value="<?php echo $current_module; ?>">
         <div class="indicator-row flex-row text-center <?php echo ($current_module == 'Leads') ? "col-4" : (($current_module == "Clients")  ? "col-5" : "col-8");?>">
          <div id="stage-asigned" class="col status-completed">
            <div class="block">
              <i class="icon-crm-add-contact stage-icon"></i>
              <h4> <span>Prospect</span> </h4>
              <i class="indicate fa fa-check"></i>
            </div>
            <?php
           // echo "<pre>";print_r($record_data);die("ok");
             if(!empty($record_data['created_time'])){ ?>
             <div>
              <span>Prospect At</span> <span><?php echo !empty($record_data) ? date("m/d/Y H:i ", $record_data['created_time']) : '';?></span>
             </div>
          <?php } ?>
          </div>
          <div id="stage-qualify" class="col color-theme <?php echo !empty($qualified) ? 'status-completed' : 'status-remaining';?>">
            <div class="block">
              <i class="icon-crm-qualify stage-icon"></i>
              <h4> <span>Qualify</span> </h4>
              <i class="indicate fa fa-check"></i>
            </div>

  

            <?php if(!empty($qualified)){ ?>
             <div>
              <?php if($qualified->qualify_status){ ?> 
                <span>Qualified At</span>
                <span><?php echo date("m/d/Y H:i ",$qualified->modified_time)?></span>  
                <?php }else{?>
                 <span>Not Qualified At</span><br/>
                 <span><?php echo date("m/d/Y H:i ",$qualified->modified_time)?></span>
                <?php } ?>
            </div>
          
          <?php }elseif(empty($qualified) && (!empty($bookings) || $propose == 1 || $current_module == 'Clients' || $current_module == 'Contracts')){
              echo '<div><i class="fa fa-question-circle"></i></div>';
              }
            ?>
          </div>
          <div id="stage-develop" class="col color-orange <?php echo !empty($bookings) ? 'status-completed' : 'status-remaining';?>">
            <div class="block">
              <i class="icon-crm-develop stage-icon"></i>
              <h4> <span>Develop</span> </h4>
              <i class="indicate fa fa-check"></i>
            </div>
            <?php if(!empty($bookings)){ ?>
            <div>
                <span>Developed At</span> <span><?php echo !empty($bookings) ? date("m/d/Y H:i ",strtotime($develop_date)) : '';?></span>
            </div>
             <?php }elseif(empty($bookings) && ($propose == 1 || $current_module == 'Clients' || $current_module == 'Contracts')){
              echo '<div><i class="fa fa-question-circle"></i></div>';
             }?>
          </div>
          <div id="stage-propose" class="col color-blue <?php echo  (isset($proposal) && count($proposal) > 0)? 'status-completed' : 'status-remaining';?>">
            <div class="block">
              <i class="icon-crm-propose stage-icon"></i>
              <h4> <span>Propose</span> </h4>
              <i class="indicate fa fa-check"></i>
            </div>
            <?php if(isset($proposal) && count($proposal) > 0){ ?>
            <div>
                <span>Proposed</span> <span><?php echo 'At '.date("m/d/Y H:i ",$proposal[0]['created_at']);?></span>
            </div>
             <?php }elseif($propose != 1 && $current_module == 'Clients' || $current_module == 'Contracts'){
              echo '<p><i class="fa fa-question-circle"></i></p>';
             }?>
          </div>
    <?php if($current_module == 'Clients' || $current_module == 'Contracts')
    { ?>
          <div id="stage-close" class="col color-yellow <?php echo (isset($proposal) && !empty($proposal[0]['execute_date'])) && ($current_module == 'Clients' || $current_module == 'Contracts') ? 'status-completed' : 'status-remaining';?>">
            <div class="block">
              <i class="fas fa-handshake fa-2x stage-icon" style="margin-top: 16px; font-size: 85px;"></i>
              <!-- <i class="icon-crm-checklist stage-icon"></i> -->
              <h4> <span>Close</span> </h4>
              <i class="indicate fa fa-check"></i>
            </div>
            <?php if(isset($proposal) && !empty($proposal[0]['execute_date']) && ($current_module == 'Clients' || $current_module == 'Contracts')){ ?>
            <div>
                <span>Closed At</span> <span><?php echo date("m/d/Y H:i ",$proposal[0]['execute_date'])?></span>
            </div>
             <?php }else{
                echo '<p><i class="fa fa-question-circle"></i></p>';
             }?>
          </div>
      <?php  } ?>
      <?php if($current_module == 'Contracts')
       {
      ?>
      <div id="stage-technical" class="col color-green <?php echo !empty($record_data['__162']) ? 'status-completed' : 'status-remaining';?>">
            <div class="block">
              <i class="fas fa-user-tie fa-2x stage-icon" style="margin-top: 16px; font-size: 85px;"></i>
              <!-- <i class="icon-crm-technical stage-icon"></i> -->
              <h4> <span>Technical</span> </h4>
              <i class="indicate fa fa-check"></i>
            </div>
             <?php if(!empty($record_data['__162'])){ ?>
            <div>
                <span><?php echo $record_data['__162']; ?> At</span> <span><?php //echo !empty($record_data['created_time']) ? date("m/d/Y H:i ",$record_data['created_time']) : '';?></span>
            </div>
             <?php }elseif(empty($record_data['__162'])  && !empty($record_data['__172']) ){
              echo '<div><i class="fa fa-question-circle"></i></div>';
             }?>
          </div>

          <div id="stage-invoiced" class="col color-pink <?php echo !empty($record_data['__172']) ? 'status-completed' : 'status-remaining';?>">
            <div class="block">
              <i class="icon-crm-bill stage-icon"></i>
              <h4> <span>Invoiced</span> </h4>
              <i class="indicate fa fa-check"></i>
            </div>
             <?php if(!empty($record_data['__172'])){ ?>
            <div>
                <span><?php echo $record_data['__172'];?> </span> <span><?php echo !empty(!empty($invoice_data)) ? ' At '.date("m/d/Y H:i ",strtotime($invoice_data['created_time'])) : '';?></span>
            </div>
             <?php }elseif(empty($record_data['__172']) && isset($record_data['__172']) && $record_data['__172'] == 'Invoice Paid'){
              echo '<div><i class="fa fa-question-circle"></i></div>' ;
             }?>
          </div>
          <div id="stage-paid" class="col color-brown <?php echo !empty($record_data['__172']) && $record_data['__172'] == 'Invoice Paid' ? 'status-completed' : 'status-remaining';?>">
            <div class="block">
              <i class="icon-crm-paid stage-icon"></i>
              <h4> <span>Paid</span> </h4>
              <i class="indicate fa fa-check"></i>
            </div>
             <?php if(!empty($invoice_data) && !empty($record_data['__172']) && $record_data['__172'] == 'Invoice Paid'){ ?>
            <div>
                <span><?php echo !empty($invoice_data) ? 'Paid At '.date("m/d/Y H:i ",strtotime($invoice_data['created_time'])) : '';?></span>
            </div>
             <?php }?>
          </div>
        <?php } ?>
        </div>
      </div>
    </div>

    </div>
   </div>
  </div>

    <div id="page-header">
      <div class="row">
        <div class="left-panel col-sm-4">
          <a class="btn icon-btn btn-theme-o" id="back-btn" title="back" href="#"> &nbsp;<i class="fa fa-arrow-left icon-left"></i></a>
          <?php if ($writePermission == true)
          { 
            if(!$openerRights){
            ?>

          <a class="btn btn-theme-o" href="<?php echo base_url() ?>modules/addRecord/?cm=<?php echo $current_module; ?>&ac=new">Add New Record</a>  
          <?php
           }
          } ?>
          <?php if ($writePermission == true && $current_module == 'Clients')
          { ?>

           <a class="btn btn-theme-o" href="<?php echo base_url() ?>modules/addRecord/?cm=<?php echo $current_module;?>&ac=new&add=addContract&clientId=<?php echo $current_record_id?>">Add Contract</a>
            <?php
          } ?>
            <!-- <a class="btn color-theme" href="<?php echo base_url() ?>modules/?cm=<?php echo $current_module; ?>&id=1">View All <?php echo $current_module; ?></a> -->

            <br>
          

          <div  id="st_message"></div>


        </div>

        <div class="right-panel col-sm-8 text-right" style="padding-right:50px;">

          <?php
          if (!(isset($deletedRecord) && $deletedRecord == true))
          {
            ?>
            <?php
            if ($writePermission == true)
            {
            ?>

              <?php
              if ($current_module == "Contracts")
              { ?>
                <!--
                <a class="module_head" href="<?php echo base_url() ?>modules/invoice/?cm=<?php echo $current_module; ?>&id=<?php echo $current_record_id; ?>">View Invoice</a> |
                -->
              <?php
              } ?>
              <?php
               
                $opener_id = (isset($record_data['__22']) && $record_data['__22']) ? $record_data['__22'] : 0;
                $closer_id = (isset($record_data['__21']) && $record_data['__21']) ? $record_data['__21'] : 0;
                /*print_r($record_data);
                die;*/
                /*$openerCloser_id = $current_module == 'Leads'? $opener_id: $record_data['__104'];*/

              ?>
              <?php
              if ($current_module != "Contracts")
              { 
                $openerCloser_id = $current_module == 'Leads'? $opener_id: $record_data['__104'];
              } ?>
                <!--
                <a class="module_head" href="<?php echo base_url() ?>modules/invoice/?cm=<?php echo $current_module; ?>&id=<?php echo $current_record_id; ?>">View Invoice</a> |
                -->
             

              <?php if ($current_module=='Contracts') { ?>
               <!--  <a class="btn btn-purple" title="Contracts" href="#" id="contracts_btn" style="font-size: 13px;width:106px;margin-right: 60px"><i class="fa fa-book"></i> &nbsp;Contracts</span>
                </a> -->
              <?php } ?>

              <?php if($current_module == 'Leads'){
               // if(!$openerRights){
              ?>
             <!--  <a class="btn btn-yellow-o" title="Leads" href="#" id="leads_btn" style="font-size: 13px;width:90px;"><i class="fa fa-book"></i> &nbsp;leads</span>
              </a> -->
              <!-- <?php if(!empty($qualified)) { ?>
               <a href="http://anbruch.com/wp-content/themes/anbruch/lead-pdf/<?php echo $qualified->file ?>" target="__blank" title='View Pdf'><i class="fa fa-file-pdf" style="margin-right:14px;vertical-align: middle;font-size:25px;color:#d41a1a" aria-hidden="true"></i></a>
              <?php } ?> -->

            <!--  <input type="checkbox" value="<?php// echo $current_record_id; ?>" id="" style="height: 20px;width: 20px" /> -->

          
                    <a class="btn btn-yellow-o" data-value="<?php echo $current_record_id; ?>" title="Favorite Leads" href="#" id="favorite_list_btn" data-id="Leads" style="font-size: 13px;width:130px;">Manage Favorite
                            </a>
           

              <a class="btn btn-dodger-blue" title="Send Proposal" href="#modalSendProposal" style="font-size: 13px;" data-toggle="modal"><i class="fa fa-book"></i> Send Proposal</span>
                </a>

              <a class="btn btn-voilet-o opener" title="Reassigned To Opener" href="<?php echo base_url() ?>modules/reassignedLead/?cm=<?php echo $current_module; ?>&ac=opener&opener_id=<?php echo $opener_id ;?>&id=<?php echo $current_record_id; ?>" data-id ='1' style="font-size: 12px;"><i class="fa fa-repeat"></i> Opener</span>
              </a>
              <a class="btn btn-blue-o opener" title="Reassigned To Closer" style="margin-right: 60px;font-size: 12px;" href="<?php echo base_url() ?>modules/reassignedLead/?cm=<?php echo $current_module; ?>&ac=closer&closer_id=<?php echo $closer_id; ?>&id=<?php echo $current_record_id; ?>" data-id='2'><i class="fa fa-repeat"></i> Closer</span>
              </a>
              <?php
             //   }
              }?>


              <?php if ($current_module == "Clients") { ?>
                <a class="btn btn-blue-o" data-value="<?php echo $current_record_id; ?>" title="Favorite Clients" href="#" id="favorite_list_btn" data-id="Clients" style="font-size: 13px;width:145px;margin-right: 55px">Manage Favorite
                        </a>
              <?php } ?>
              <?php if ($current_module == "Contracts") { ?>
                <a class="btn btn-green-o" data-value="<?php echo $current_record_id; ?>" title="Favorite Contracts" href="#" id="favorite_list_btn" data-id="Contracts" style="font-size: 13px;width:160px;margin-right: 55px">Manage Favorite
                        </a>
              <?php } ?>
             
              
              <?php //if(!$openerRights){ ?>
              <a class="btn icon-btn btn-blue-o" href="<?php echo base_url() ?>modules/editRecord/?cm=<?php echo $current_module; ?>&ac=edit&id=<?php echo $current_record_id; ?>" style="margin-left:-46px;">
                <i class="fa fa-edit"></i> <span class="icn-txt" style="margin-left:-46px;">Edit Record</span>
              </a>

              <a class="btn icon-btn btn-green-o" data-toggle="modal" href="#modalArchive"> <i class="fa fa-save"></i> <span class="icn-txt">Archive Record</span> </a>

              <a class="btn icon-btn btn-red-o" data-toggle="modal" href="#modalDelete"> <i class="icon-crm-delete"></i> <span class="icn-txt">Delete Record</span> </a>

            <?php if($current_module == 'Leads'){ ?>
             <a class="btn btn-arrow-left" href="javascript:void()" id="second_leads_btn" >Leads <span ><i class="fa fa-arrow-down"></i></span></a>     
           <?php } ?>

            <?php if($current_module == 'Contracts'){ ?>
             <a class="btn btn-arrow-left" href="javascript:void()" id="second_contracts_btn">Contracts <span><i class="fa fa-arrow-down"></i></span></a>     
           <?php } ?>

           <?php if($current_module == 'Clients'){ ?>
             <a class="btn btn-arrow-left" href="javascript:void()" id="second_clients_btn" >Clients <span><i class="fa fa-arrow-down"></i></span></a>     
           <?php } ?>



            <?php //} ?>
            <?php
            }
            ?>
          <?php
          }
          ?>


        </div>
      </div>

    </div>

    <div class="row">

      <div class="col-lg-12">
        <section>
        <!-- <section class="panel detail-panel"> -->

          <div class="panel-body inner_leads">

            <?php $this->load->view('common/alert'); ?>

            <div class="flash-message"></div>
        
            <!-- leads  -->
            <?php $c_module=$this->input->get('cm'); ?>  

            <div id="leads-popup" class="pull-right">
                 <div class="head">
                   <p>
                    <i class="fa fa-arrow-left" id="lead-expand"></i>
                   <span><?php  echo $c_module ;?></span>
                      

                   <?php if ($c_module=='Clients') {  ?>

                       <select id="favorite_clients" style="max-width: 50%;margin-left: 5px;">
                          <option value="">Favorite List</option>
                         <?php
                        if(isset($favorite_list)){ 
                          $mode = $current_module != 'Leads' ? $current_module == 'Clients' ? 2 : 3 : 1;
                          foreach ($favorite_list as $option_key => $option) {
                                if($option['module_id'] == $mode){ 

                           ?>
                           <option <?php echo !empty($selected_fav_list) && ($selected_fav_list == $option['id']) ? 'selected="selected"' : "" ?> value="<?php echo $option['id']; ?>"><?php echo $option['title']; ?></option>
                          <?php } } 
                            }
                          ?>
                       </select>

                    <?php } ?>  
                 <?php if ($c_module=='Leads') {  ?>

                   <select id="favorite_leads" style="max-width: 50%;margin-left: 5px;">
                      <option value="">Favorite List</option>
                      <?php
                        if(isset($favorite_list)){ 
                          $mode = $current_module != 'Leads' ? $current_module == 'Clients' ? 2 : 3 : 1;
                          foreach ($favorite_list as $option_key => $option) {
                                if($option['module_id'] == $mode){ 

                           ?>
                           <option <?php echo !empty($selected_fav_list) && ($selected_fav_list == $option['id']) ? 'selected="selected"' : "" ?> value="<?php echo $option['id']; ?>"><?php echo $option['title']; ?></option>  
                      <?php } } 
                        }
                      ?>
                   </select>

                   <?php } ?>
                   <?php if ($c_module=='Contracts') {  ?>
                   <select id="favorite_contracts" style="max-width: 50%;margin-left: 5px;">
                      <option value="">Favorite List</option>
                      <?php
                        if(isset($favorite_list)){ 
                          $mode = $current_module != 'Leads' ? $current_module == 'Clients' ? 2 : 3 : 1;
                          foreach ($favorite_list as $option_key => $option) {
                             if($option['module_id'] == $mode){ 
                           ?>
                           <option <?php echo !empty($selected_fav_list) && ($selected_fav_list == $option['id']) ? 'selected="selected"' : "" ?> value="<?php echo $option['id']; ?>"><?php echo $option['title']; ?></option> 
                      <?php } } 
                        }
                      ?>
                   </select>
                   <?php } ?>

                   <i id="leads-popup-close" class="fa fa-times pull-right"></i>
                   <i id="leads-popup-minimize" class="fa fa-window-minimize pull-right" style="font-size:20px;"></i>
                   <i id="leads-popup-maximize" class="fa fa-window-maximize pull-right" style="display: none;font-size:22px;"></i>
                 </p>
               </div>
              <div class="leads-content">
                  <!-- <img id="ajax-loader" src="<?php //echo base_url('assets/images/ajax-loader.gif'); ?>" class="ajax-load" style="position:relative;left:60px;top:-30px;display: none;"> -->
                <div class="leads-item">

                <?php if($current_module == 'Leads'){ ?>   
                    <div style="top: 50%;position: absolute;">
                         <a class="btn btn-arrow-right" href="javascript:void()" id="leads_btn_close" style="position: absolute;color:white;right: -33px;display: none;transform: rotate(90deg);font-weight: bold;background-color: #1fb5ad;width: 100px;">Leads <i class="fa fa-arrow-up"></i></a>
                    </div>
                  <?php } ?> 
                  <?php if($current_module == 'Clients'){ ?>   
                    <div style="top: 50%;position: absolute;">
                         <a class="btn btn-arrow-right" href="javascript:void()" id="clients_btn_close" style="position: absolute;color:white;right: -33px;display: none;transform: rotate(90deg);font-weight: bold;background-color: #1f90ff;width: 100px;">Clients <i class="fa fa-arrow-up"></i></a>
                    </div>
                  <?php } ?>  
                  <?php if($current_module == 'Contracts'){ ?>   
                    <div style="top: 50%;position: absolute;">
                         <a class="btn btn-arrow-right" href="javascript:void()" id="contracts_btn_close" style="position: absolute;color:white;right: -33px;display: none;transform: rotate(90deg);font-weight: bold;background-color: #901fff;width: 100px;">Contracts <i class="fa fa-arrow-up"></i></a>
                    </div>
                  <?php } ?>   
                      <table id="leads-data-table" class="display">
                       <thead>
                       <?php if ($c_module=='Leads') { ?>
                          <tr>
                            <th class="hide"></th>
                            <th>Company Name</th>
                            <th class="mt-head">First Name</th>
                            <th class="mt-head">Last Name</th>
                            <th class="mt-head">Direct Phone Number</th>
                            <th class="mt-head">Province/State</th>
                            <th class="mt-head">Country</th>
                            <th class="mt-head">City</th>
                            <th class="mt-head">Estimated Sales</th>
                            <th class="mt-head">Reported Sales</th>
                            <th class="mt-head">Modified By</th>
                            <th class="mt-head">Last Modified</th>
                            <th class="mt-head">Lead Status</th>
                          </tr>

                        <?php  } if($c_module=='Clients'){ ?>   
                           <tr>
                            <th class="hide"></th>
                            <th >Client Name</th>
                            <th class="mt-head">City</th>
                            <th class="mt-head">Province</th>
                            <th class="mt-head">Country</th>
                            <th class="mt-head">First Name</th>
                            <th class="mt-head">Last Name</th>
                            <th class="mt-head">Title</th>
                            <th class="mt-head">Phone</th>
                            <th class="mt-head">Fax</th>
                            <th class="mt-head">Email</th>
                            <th class="mt-head">Client Status</th>
                            <th class="mt-head">Service Type</th>
                            <th class="mt-head">Estimated Sales</th>
                            <th class="mt-head">Primary SIC Code</th>
                            <th class="mt-head">Signing Rate</th>
                            <th class="mt-head">Master Contract Number</th>
                           </tr>

                         <?php } if( $c_module == 'Contracts') { ?>
                           
                           <tr>
                            <th class="hide"></th>
                            <th >Contract Client</th>
                            <th class="mt-head">Client Number</th>
                            <th class="mt-head">Contract Name</th>
                            <th class="mt-head">Contract Number</th>
                            <th class="mt-head">Signing Rate</th>
                            <th class="mt-head">Closer Name</th>
                            <th class="mt-head">Closing Date</th>
                            <th class="mt-head">Technical Consultant</th>
                            <th class="mt-head">Assigned Officer</th>
                            <th class="mt-head">Assigned Date</th>
                            <th class="mt-head">Completed On</th>
                            <th class="mt-head">Stage</th>
                            <th class="mt-head">Technical Expected Start Date</th>
                            <th class="mt-head">Service Type</th>
                           
                           </tr> 

                         <?php } ?> 

                        </thead>
                        <tbody>
                          <tr>
                            <td></td>
                          </tr>
                        </tbody>
                      </table>
                   </div>
                 </div>
               </div>
            </div>
            <!-- leads -->

            <!-- Modal -->
            <div class="modal fade" id="modalFollow" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title">Follow Confirmation</h4>
                        </div>
                        <div class="modal-body">Are you sure about this action?</div>
                        <div class="modal-footer">
                            <button data-dismiss="modal" class="btn btn-default" type="button">Ignore</button>
                            <button class="btn btn-success" id="record_follow_id" type="button">Confirm</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="modalClientContractFollow" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title">Follow Confirmation</h4>
                        </div>
                        <div class="modal-body">Are you sure about this action?</div>
                        <div class="modal-footer">
                            <button data-dismiss="modal" class="btn btn-default" type="button">Ignore</button>
                            <button class="btn btn-success" id="client_contract_follow_id" type="button">Confirm</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- modal -->



            <!-- Modal Reassigned Start-->
            <div class="modal fade" id="reassigned" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title title"></h4>
                        </div>
                        <div class="modal-body">Are you sure about this action?</div>
                        <div class="modal-footer">
                            <button data-dismiss="modal" class="btn btn-default ignore" type="button">Ignore</button>
                            <button class="btn btn-success confirm" type="button">Confirm</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- modal Reassigned End-->


            <!-- Modal -->
            <div class="modal fade" id="modalDelete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title">Delete Confirmation</h4>
                        </div>
                        <div class="modal-body">Are you sure to delete this record?</div>
                        <div class="modal-footer">
                            <button data-dismiss="modal" class="btn btn-default" type="button">Ignore</button>
                            <button class="btn btn-success" onclick="deleteRecord();" type="button">Confirm</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- modal -->

            <!-- Modal -->
            <div class="modal fade" id="modalArchive" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title">Archive Confirmation</h4>
                        </div>
                        <div class="modal-body">Are you sure to archive this record?</div>
                        <div class="modal-footer">
                            <button data-dismiss="modal" class="btn btn-default" type="button">Ignore</button>
                            <button class="btn btn-success" onclick="archiveRecord();" type="button">Confirm</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- modal -->

            <!-- Modal -->
            <div class="modal fade" id="modalConvert" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header" style="background:#1eb5ad;color:white;">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true" style="opacity: 1;color: white;">&times;</button>
                            <h4 class="modal-title" style="font-weight: 550;">Lead Conversion Confirmation</h4>
                        </div>
                        <div class="modal-body" style="font-size: 15px;">Are you sure to convert this record to Client ?
                          <div id="modal_error"></div>
                          <div class="row">
                            <div class="col-sm-4">
                              <label for='signing_rate'>Signing Rate *</label>
                            </div>
                            <div class="col-sm-8">
                              <input type="number" class="form-control modal-fields" min="1" id="signing_rate" name="signing_rate" value="<?php echo isset($record_data['__13']) && !empty($record_data['__13']) ? $record_data['__13'] : ''; ?>" />
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-sm-4">
                              <label for='Service_Type'>Service Type *</label>
                            </div>
                            <div class="col-sm-8">
                              <select multiple="multiple" class="modal-fields" id="Service_Type" placeholder="Service Type" >
                              </select>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-sm-4">
                              <label for='expected_start_date'>Expected Start Date *</label>
                            </div>
                            <div class="col-sm-8">
                              <input type="text" class="form-control modal-fields" id="expected_start_date" name="expected_start_date" placeholder="MM/DD/YYYY" value="<?php echo isset($record_data['__24']) && !empty($record_data['__24']) ? $record_data['__24'] : ''; ?>" />
                            </div>
                          </div>

                        </div>
                        
                        <div class="modal-footer" style="margin-top: 10px;">
                            <button data-dismiss="modal" class="btn btn-default" type="button">Ignore</button>
                            <button class="btn btn-success" onclick="convertRecord();" type="button">Confirm</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- modal -->

            <!-- unfollow Modal Start-->
              <div class="modal fade" id="modalunfollow" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title">Unfollow Confirmation</h4>
                        </div>
                        <div class="modal-body">Are you sure about this action?</div>
                        <div class="modal-footer">
                            <button data-dismiss="modal" class="btn btn-default" type="button">Ignore</button>
                            <button class="btn btn-success" id="record_unfollow_id" type="button">Confirm</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="modalunfollowClientContract" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title">Unfollow Confirmation</h4>
                        </div>
                        <div class="modal-body">Are you sure about this action?</div>
                        <div class="modal-footer">
                            <button data-dismiss="modal" class="btn btn-default" type="button">Ignore</button>
                            <button class="btn btn-success" id="client_contract_unfollow_id" type="button">Confirm</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- unfollow modal end -->



            <?php
            if (isset($deletedRecord) && $deletedRecord == true)
            { ?>
                <a type="button" class="btn btn-success btn-lg btn-block" href="<?php echo base_url() ?>modules/?cm=<?php echo $current_module; ?>&id=1">View All <?php echo $current_module; ?> Listing</a>
            <?php
            }
            else
            { ?>
<!--               <form role="form" action="" method="post">
 -->
              <?php

                if ($current_module == LEADS_PLURAL_NAME)
                {
                  $first_name_key = "__" . LEAD_FIRST_NAME_META_ID;
                  $last_name_key = "__" . LEAD_LAST_NAME_META_ID;

                  $status_key = "__" . LEAD_STATUS_META_ID;
                  $phone_key = "__" . LEAD_PHONE_NUMBER_META_ID;

                  $company_name_key = "__" . LEAD_COMPANY_NAME_META_ID;

                  $first_name = isset($record_data[$first_name_key]) ? $record_data[$first_name_key] : "";
                  $last_name = isset($record_data[$last_name_key]) ? $record_data[$last_name_key] : "";

                  $status = isset($record_data[$status_key]) ? $record_data[$status_key] : "No Status Available";
                  $call_status = isset($record_data['__27']) ? $record_data['__27'] : "No Status Available";

                  $phone = isset($record_data[$phone_key]) ? $record_data[$phone_key] : "No Phone Number Available";
                  $company_name = isset($record_data[$company_name_key]) ? $record_data[$company_name_key] : "No Company Name Available";

                  $opener = (isset($record_data['__22']) && $record_data['__22']) ? $record_data['__22'] : "Not Available";
                  $closer = (isset($record_data['__21']) && $record_data['__21']) ? $record_data['__21'] : "Not Available";

                  $leadstatus =  (isset($record_data['__14']) && $record_data['__14']) ? $record_data['__14'] : "Cold";
                
                  foreach($users_list as $arr_usr)
                  {
                    if($arr_usr['id'] == $opener)
                    {
                      $opener_name = $arr_usr['title'];
                    }
                    if($arr_usr['id'] == $closer)
                    {
                      $closer_name = $arr_usr['title'];
                    }

                  }
            ?>

                  <!--<img style="height: 42px; width: 42px;" alt="" src="<?php echo base_url() ?>static/images/boyAvatar.png">-->

              

    <?php
      // echo"<pre>";
      // print_r($favorite_list);
      // die("ok");
      ?>

    <div class="hero-row top-border">

      <div id="l-info" class="collapsible-card card color-theme ch">

          <div class="custom-bord flex-row toggable-header" data-toggle="collapse" data-target="#collapse-lead-info">
            <div class="col">
              <h4>Lead Information</h4>
            </div>
            <div>
              <span class="toggle-card-btn bg-purple-50">
                <i class="icon-crm-angle-up"></i>
              </span>
            </div>
          </div>

          <div id="collapse-lead-info" class="card-content collapse in collapsed-have-height-equalizer row">


                    <div class="col-sm-7">
                      <ul class="nav nav-tabs" id="contact-tabs" style="width: 100%;">
                        <li class="active"><a data-toggle="tab" href="#lead-info" style="padding:10px 8px;margin: 0px;">Details</a></li>
                        <?php $flag = 2; switch($primary_contact){
                            case 51:
                              $flag = 2;
                            break;
                            case 60:
                              $flag = 3;
                            break;
                            case 64:
                              $flag = 4;
                            break;
                            case 71:
                              $flag = 5;
                            break;
                          }
                        ?>
                        <li><a data-toggle="tab" href="#contact-<?php echo $flag; ?>" style="padding:10px 8px;border-left: 1px solid #1fb5ad;border-right-width: 0px;margin: 0px;">Contact Person <?php echo $flag; ?></a></li>
                        <?php for($i = 2; $i<= 5; $i++){ 
                            if($i!= $flag){
                            ?>
                            <li><a data-toggle="tab" href="#contact-<?php echo $i; ?>" style="padding:10px 8px;border-left: 1px solid #1fb5ad;border-right-width: 0px;margin: 0px;">Contact Person <?php echo $i; ?></a></li>
                        <?php } } ?>
                      </ul>
                    <div class="tab-content">
                      <div id="lead-info" class="color-theme tab-pane fade in active">
                        <div>
                          <div class="lead-status">

                           

                          <?php 

                          foreach ($notes as $key => $note) {
                                  if( $key == 0 ) {  
                                         
                                    $last_lead = date("m/d/Y H:i:s", $note['created_time']);                      
                                   }        
                                 }                       
                          if($leadstatus == 'Hot') {?>
                            <img src="<?php echo base_url()?>assets/images/hot.png">
                             <div><?php echo $last_lead; ?></div>
                          <?php } ?>

                          <?php if($leadstatus == 'Cold') {?>
                            <img src="<?php echo base_url()?>assets/images/cold.png">
                            <div><?php echo $last_lead; ?></div>
                          <?php }?>

                          <?php if($leadstatus == 'Warm') {?>
                            <img src="<?php echo base_url()?>assets/images/warm.png">
                            <div><?php echo $last_lead; ?></div>
                          <?php }?>

                          <?php if($leadstatus == 'Dead') {?>
                            <img src="<?php echo base_url()?>assets/images/dead.png">
                            <div><?php echo $last_lead; ?></div>
                          <?php }
                          ?>  
                          </div>
                            <div>
                              <h3 class="card-title"><?php echo $first_name . " " . $last_name; ?> </h3>
                              <span class="company-name"><?php echo $company_name ?></span>
                            </div>

                            <div style="padding:10px 0;margin-top: 8px">
                        <?php //if(!$openerRights){ ?>
                         <?php if($record_data['__14']=="Hot"){?>
                                <a href="#modalFollow" id="unfollow_id" class="btn btn-round btn-fill-theme"> <i class="icon-crm-user-plus"></i> Unfollow </a>
                              <!-- <span style="background:#1fb5ad; color:#fff; margin:0 8px; padding:1px 9px; border-radius:25px; display:inline-block; position:relative; top:2px; box-shadow:0 0 7px #ccc;" ><i class="icon-crm-user-plus"></i> Followed </span> -->
                            <?php } else{
                              ?>
                              <a href="#modalFollow" id="follow_id" class="btn btn-round btn-fill-theme"> <i class="icon-crm-user-plus"></i> Follow </a>
                            <?php } ?>
                          <?php //} ?>
                              <?php
                                if (!(isset($deletedRecord) && $deletedRecord == true))
                                {
                                  ?>
                                  <?php
                                  if ($writePermission == true)
                                  {
                                  ?>
                                    <?php
                                    if ($current_module == "Leads")
                                    { 
                                      //if(!$openerRights){
                                      ?>
                                      <a id="convert-to-client" class="btn btn-round btn-fill-blue" data-toggle="modal" href="#"> <i class="icon-crm-user-out"></i> Convert To Client</a>

                                        <button type="button" id="edit_details"  class="btn icon-btn btn-blue-o">
                                         <i class="fa fa-edit"></i> <span class="icn-txt" style="margin-left:-46px;">Edit Record</span></button>
                                     
                                  <?php
                                      //}
                                    } ?>

                                  <?php
                                  }
                                  ?>
                                <?php
                                }
                                ?>
                              </div>
                          </div>
                         

                        <div class="card-content">
                           <div class="table-structure-info" id="edit_details_division">
                             <table>
                             <!--    <tr>
                                   <th nowrap>Zoom Individual ID:</td>
                                   <td><?php// if(!empty($record_data['zoom_id'])) {echo $record_data['zoom_id']; } ?></td>
                                </tr> -->
     <input type="hidden" class="tab_lead_name" value="<?php echo $record_data['__1'] ." ".$record_data['__2']; ?>">
     <input type="hidden" class="tab_lead_title" value="<?php echo $record_data['__3']; ?>">          
     <input type="hidden" class="tab_lead_email" value="<?php echo $record_data['__4']; ?>">          
          
                                <tr>
                                   <th nowrap>First Name</td>
                                   <td id="tab_main_name"><?=$record_data['__1']?></td>
                                </tr>
                                <tr>
                                   <th nowrap>Last Name</td>
                                   <td id="tab_main_name"><?=$record_data['__2']?></td>
                                </tr>
                                <tr>
                                   <th nowrap>Title</td>
                                   <td id="tab_main_title"><?=$record_data['__3']?></td>
                                </tr>
                               
                                <tr>
                                   <th nowrap>Direct Number</td>
                                   <td id="tab_main_phone"><?=$record_data['__19']?></td>
                                </tr>
                                <tr>
                                   <th nowrap>Direct Number Extension</td>
                                   <td><?=$record_data['__15']?></td>
                                </tr>
                                 <tr>
                                   <th nowrap>Function</td>
                                   <td id="tab_main_function"><?=$record_data['__8']?></td>
                                </tr>
                               <!--  <tr>
                                   <th nowrap>Alternate Phone</td>
                                   <td><?=$record_data['__20']?></td>
                                </tr> -->
                                <tr>
                                  <th nowrap>Email</th>
                                  <td id="tab_main_email"><?=$record_data['__4']?></td>
                                </tr>
                                <tr>
                                  <th nowrap>Last updated date</th>
                                  <td>
                                     <?php 
                                     
                                        if(!empty($record_data['modified_time']))
                                           echo date('Y-m-d H:i',$record_data['modified_time']);
                                        else
                                           echo date('Y-m-d H:i',$record_data['created_time']); 
                                      ?>
                                  </td>
                                </tr>
                             </table>
                          </div>

<!--           DETEAILS EDIT START -->                
                          <div class="table-structure-info" id="edit_details_start_division" style="display: none">
                             <table>
                          <form  role="form" id="details_form" method="post" action="<?php echo base_url('/modules/edit_by_individual_tab'); ?>" >
                            <input type="hidden" name="record_id" value="<?php echo $current_record_id; ?>" >
                            <input type="hidden" name="detail_set" value="detail">
                               <!--  <tr>
                                   <th nowrap>Zoom Individual ID:</td>
                                   <td><?php //if(!empty($record_data['zoom_id'])) {echo $record_data['zoom_id']; } ?></td>
                                </tr> -->
                                <tr>
                                   <th nowrap>First Name</td>
                                   <td id="tab_main_name">
                                     <input type="text" required="" name="__1" value="<?=$record_data['__1']?>">
                                     </td>
                                </tr>
                                 <tr>
                                   <th nowrap>Last Name</td>
                                   <td id="tab_main_name">
                                   <input type="text" required="" name="__2" value="<?=$record_data['__2']?>">
                                   </td>
                                </tr>
                                <tr>
                                   <th nowrap>Title</td>
                                   <td id="tab_main_title">
                                    <input type="text" required="" name="__3" value="<?=$record_data['__3']?>">
                                    </td>
                                </tr>
                                
                                <tr>
                                   <th nowrap>Direct Number</td>
                                   <td id="tab_main_phone">
                                    <input type="text" required="" name="__19" value="<?=$record_data['__19']?>">
                                    </td>
                                </tr>
                                <tr>
                                   <th nowrap>Direct Number Extension</td>
                                   <td>
                                    <input type="text" required="" name="__15" value="<?=$record_data['__15']?>">
                                    </td>
                                </tr>
                                <tr>
                                   <th nowrap>Function</td>
                                   <td id="tab_main_function">
                                    <input type="text" required="" name="__8" value="<?=$record_data['__8']?>">
                                    </td>
                                </tr>
                                <!-- <tr>
                                   <th nowrap>Alternate Phone</td>
                                   <td>
                                    <input type="text" required="" name="__20" value="<?=$record_data['__20']?>">
                                    </td>
                                </tr> -->
                                <tr>
                                  <th nowrap>Email</th>
                                  <td id="tab_main_email">
                                    <input type="text" required="" name="__4" value="<?=$record_data['__4']?>">                    
                                    </td>
                                </tr>
                              
                                <tr>
                                  <td colspan="2">
                                     <button type="button" name="Cancle_update_details" id="Cancle_update_details" class="btn btn-success">Cancel</button>
                                     <button type="button" name="update_details" id="update_details" class="btn btn-success">Update Details</button>
                                  </td>
                                </tr>
                           </form>  
                             </table>
                          </div>
 <!--   DETEAILS EDIT END -->                
                        
                        </div>

                        <div class="card-footer">
                            <?php
                            $disabled='';
                            $url="https://anbruch.com/#discover-untapped-savings?id=".$_GET['id'];
                            if($record_data['__14']=='Dead'){
                              $disabled='disabled';
                              $url='javascript:void()';
                            }
                             if($current_module == "Leads") { ?>

                               <?php if($user_role == 1 ||$user_role == 3 || $user_role == 4 || $user_role == 8 || $user_role == 7) { ?>

                            
                            <a href="<?php echo $url; ?>" target="_blank" id="qualify_now" class="btn btn-theme-o" data-toggle="modal" <?php echo $disabled; ?> >Qualify Now</a>

                            <?php /*}*/  } } ?>

                            <?php //if(!$openerRights){ ?>
                            <?php if($record_data['__14']=="Dead") {
                              ?>
                            <a href="#" id="" class="btn btn-theme-o" data-email="<?php echo $record_data['__4'] ?>" disabled>SEND EMAIL</a>
                            <?php } else{ ?>
                            <a href="#" id="send_email" class="btn btn-theme-o" data-email="<?php echo $record_data['__4'] ?>">SEND EMAIL</a>
                            <?php } ?>
                            <?php //} ?>
                            <?php //if(!$openerRights){ ?>
                            <?php if ($role_id == 1 || $role_id == 5 || in_array('bookings',json_decode($permissions))){ 
                              if($record_data['__14']=="Dead") { ?>  
                            <a href="#" class="btn btn-theme-o book_now" data-toggle="modal" data-target="#"  disabled>Book Now</a>
                            <?php } else{ ?>
                            <a href="javascript:void(0)" class="btn btn-theme-o book_now" data-toggle="modal" data-target="#addClassSchedule">Book Now</a>
                            <?php }?>
                            <?php }?>
                            
                

<!-- 
                            <a class="btn btn-theme-o" data-toggle="modal" href="#modalQualified">Qualified Data</a> -->
                            
                            <?php //} ?>
                        </div>
                      </div>

                     <div id="contact-2" class="contact-chip color-theme tab-pane fade">
                          <div>
                            <h4 class="card-title">Contact Person 2

                            <button style="left:35px;"type="button" id="edit_person_two"  class="btn icon-btn btn-blue-o">
                              <i class="fa fa-edit"></i> <span class="icn-txt" style="margin-left:-46px;">Edit Contact Person 2</span></button>

                              <i class="fa fa-star primary-contact <?php echo $primary_contact == 51 ? 'yellow' : ''; ?>" data-id="51" style="float:right;color: #d3d3d3ba;"></i></h2>

                              
                          </div>

                          <div class="card-content" id="edit_p2_division">

                             <div class="table-structure-info">
                               <table>

     <input type="hidden" class="tab_lead_name" value="<?php echo $record_data['__51'] ." ".$record_data['__50']; ?>">
     <input type="hidden" class="tab_lead_title" value="<?php echo $record_data['__53']; ?>">          
     <input type="hidden" class="tab_lead_email" value="<?php echo $record_data['__54']; ?>">          
                                   <tr>
                                    <th nowrap>First Name</th>
                                    <td class="tab_first_name"><?=$record_data['__51']?></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Last Name</th>
                                    <td class="tab_last_name"><?=$record_data['__50']?></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Title</th>
                                    <td class="tab_title"><?=$record_data['__53']?></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Direct Number</th>
                                    <td class="tab_phone"> <?=$record_data['__55']?></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Direct Number Extension</th>
                                    <td class="tab_phone_ext"><?=$record_data['__56']?></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Function</th>
                                    <td class="tab_function"><?=$record_data['__52']?></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Email</th>
                                    <td class="tab_email"><?=$record_data['__54']?></td>
                                 </tr>
                                 <tr>
                                  <th nowrap>Last updated date</th>
                                  <td>
                                     <?php 
                                     
                                        if(!empty($record_data['modified_time']))
                                           echo date('Y-m-d H:i',$record_data['modified_time']);
                                        else
                                           echo date('Y-m-d H:i',$record_data['created_time']); 
                                      ?>
                                  </td>
                                </tr>	
                               </table>
                             </div>                          
                           </div>

<!--               contact person2 edit -->
                       <div class="table-structure-info" id="edit_p2_start_division" style="display: none;color: #455a64;">
                         <form  role="form" id="p2_form" method="post" action="<?php echo base_url('/modules/edit_by_individual_tab'); ?>" >
                            <input type="hidden" name="record_id" value="<?php echo $current_record_id; ?>" >
                             <input type="hidden" name="person2" value="person2">
                               <table>
                                 <tr>
                                    <th nowrap>First Name</th>
                                    <td class="tab_first_name">
                                      <input type="text" required="" name="__51" value="<?=$record_data['__51']?>">          </td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Last Name</th>
                                    <td class="tab_last_name">   <input type="text" required="" name="__50" value="<?=$record_data['__50']?>"></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Title</th>
                                    <td class="tab_title"><input type="text" required="" name="__53" value="<?=$record_data['__53']?>"></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Direct Number</th>
                                    <td class="tab_phone"><input type="text" required="" name="__55" value="<?=$record_data['__55']?>"></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Direct Number Extension</th>
                                    <td class="tab_phone_ext"><input type="text" required="" name="__56" value="<?=$record_data['__56']?>"></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Function</th>
                                    <td class="tab_function"><input type="text" required="" name="__52" value="<?=$record_data['__52']?>"></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Email</th>
                                    <td class="tab_email"><input type="text" required="" name="__54" value="<?=$record_data['__54']?>"></td>
                                 </tr>
                                  <tr>
                                    <td colspan="2">
                                     <button type="button" name="Cancle_update_p2" id="Cancle_update_p2" class="btn btn-success">Cancel</button>
                                     <button type="button" name="update_p2" id="update_p2" class="btn btn-success">Update Details</button>
                                  </td>
                                 </tr>
                               </table>
                        </form>
                      </div>
<!--              contact person edit end -->
                  <div style="margin-left: 50%;" id="book_p2">
                        <?php
                            $disabled='';
                            $url="https://anbruch.com/#discover-untapped-savings?id=".$_GET['id'];
                            if($record_data['__14']=='Dead'){
                              $disabled='disabled';
                              $url='javascript:void()';
                            }

                          if ($role_id == 1 || $role_id == 5 || in_array('bookings',json_decode($permissions))){ 
                              if($record_data['__14']=="Dead") { ?>  
                            <a href="#" class="btn btn-theme-o book_now" data-toggle="modal" data-target="#"  disabled>Book Now</a>
                            <?php } else{ ?>
                            <a href="javascript:void(0)" class="btn btn-theme-o book_now" data-toggle="modal" data-target="#addClassSchedule">Book Now</a>
                            <?php }?>
                            <?php }?>
                            
             </div>

          </div>

                        <div id="contact-3" class="contact-chip color-theme tab-pane fade">
                          
                          <div>
                            <h4 class="card-title">Contact Person 3
                               <button style="left:35px;"type="button" id="edit_person_three"  class="btn icon-btn btn-blue-o">
                              <i class="fa fa-edit"></i> <span class="icn-txt" style="margin-left:-46px;">Edit Contact Person 3</span></button>  
                             <i class="fa fa-star primary-contact <?php echo $primary_contact == 60 ? 'yellow' : ''; ?>" data-id="60" style="float:right;color: #d3d3d3ba;"></i></h2>
                          </div>
                          <div class="card-content">
                            <div class="table-structure-info" id="edit_p3_division">
                              <table>
     <input type="hidden" class="tab_lead_name" value="<?php echo $record_data['__60'] ." ".$record_data['__58']; ?>">
     <input type="hidden" class="tab_lead_title" value="<?php echo $record_data['__57']; ?>">          
     <input type="hidden" class="tab_lead_email" value="<?php echo $record_data['__61']; ?>">          
                                    
                                 <tr>
                                    <th nowrap>First Name</th>
                                    <td class="tab_first_name"><?=$record_data['__60']?></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Last Name</th>
                                    <td class="tab_last_name"><?=$record_data['__58']?></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Title</th>
                                    <td class="tab_title"><?=$record_data['__57']?></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Direct Number</th>
                                    <td class="tab_phone"><?=$record_data['__62']?></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Direct Number Extension</th>
                                    <td class="tab_phone_ext"><?=$record_data['__63']?></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Function</th>
                                    <td class="tab_function"><?=$record_data['__59']?></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Email</th>
                                    <td class="tab_email"><?=$record_data['__61']?></td>
                                 </tr>
                                  <tr>
                                  <th nowrap>Last updated date</th>
                                  <td>
                                     <?php 
                                     
                                        if(!empty($record_data['modified_time']))
                                           echo date('Y-m-d H:i',$record_data['modified_time']);
                                        else
                                           echo date('Y-m-d H:i',$record_data['created_time']); 
                                      ?>
                                  </td>
                                </tr>
                              </table>
                            </div>
                           
                          </div>
<!--               contact person3 edit -->
                       <div class="table-structure-info" id="edit_p3_start_division" style="display: none;color: #455a64;">
                         <form  role="form" id="p3_form" method="post" action="<?php echo base_url('/modules/edit_by_individual_tab'); ?>" >
                            <input type="hidden" name="record_id" value="<?php echo $current_record_id; ?>" >
                             <input type="hidden" name="person3" value="person3">
                               <table>
                                 <tr>
                                    <th nowrap>First Name</th>
                                    <td class="tab_first_name">
                                      <input type="text" required="" name="__60" value="<?=$record_data['__60']?>">          </td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Last Name</th>
                                    <td class="tab_last_name">   <input type="text" required="" name="__58" value="<?=$record_data['__58']?>"></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Title</th>
                                    <td class="tab_title"><input type="text" required="" name="__57" value="<?=$record_data['__57']?>"></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Direct Number</th>
                                    <td class="tab_phone"><input type="text" required="" name="__62" value="<?=$record_data['__62']?>"></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Direct Number Extension</th>
                                    <td class="tab_phone_ext"><input type="text" required="" name="__63" value="<?=$record_data['__63']?>"></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Function</th>
                                    <td class="tab_function"><input type="text" required="" name="__59" value="<?=$record_data['__59']?>"></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Email</th>
                                    <td class="tab_email"><input type="text" required="" name="__61" value="<?=$record_data['__61']?>"></td>
                                 </tr>
                                  <tr>
                                    <td colspan="2">
                                     <button type="button" name="Cancle_update_p3" id="Cancle_update_p3" class="btn btn-success">Cancel</button>
                                     <button type="button" name="update_p3" id="update_p3" class="btn btn-success">Update Details</button>
                                  </td>
                                 </tr>
                               </table>
                        </form>
                      </div>
<!--              contact person edit end -->
           <div style="margin-left: 50%;" id="book_p3">
                        <?php
                            $disabled='';
                            $url="https://anbruch.com/#discover-untapped-savings?id=".$_GET['id'];
                            if($record_data['__14']=='Dead'){
                              $disabled='disabled';
                              $url='javascript:void()';
                            }

                          if ($role_id == 1 || $role_id == 5 || in_array('bookings',json_decode($permissions))){ 
                              if($record_data['__14']=="Dead") { ?>  
                            <a href="#" class="btn btn-theme-o book_now" data-toggle="modal" data-target="#"  disabled>Book Now</a>
                            <?php } else{ ?>
                            <a href="javascript:void(0)" class="btn btn-theme-o book_now" data-toggle="modal" data-target="#addClassSchedule">Book Now</a>
                            <?php }?>
                            <?php }?>
                            
             </div>

      </div>
                      <div id="contact-4" class="contact-chip color-theme tab-pane fade">
                          
                        <div>
                            <h4 class="card-title">Contact Person 4 
                               <button style="left:35px;"type="button" id="edit_person_four"  class="btn icon-btn btn-blue-o">
                              <i class="fa fa-edit"></i> <span class="icn-txt" style="margin-left:-46px;">Edit Contact Person 4</span></button> 
                              <i class="fa fa-star primary-contact <?php echo $primary_contact == 64 ? 'yellow' : ''; ?>" data-id="64" style="float:right;color: #d3d3d3ba;"></i></h2>
                          </div>
                          <div class="card-content">
                            <div class="table-structure-info" id="edit_p4_division">
                              <table>
    <input type="hidden" class="tab_lead_name" value="<?php echo $record_data['__64'] ." ".$record_data['__66']; ?>">
     <input type="hidden" class="tab_lead_title" value="<?php echo $record_data['__65']; ?>">          
     <input type="hidden" class="tab_lead_email" value="<?php echo $record_data['__68']; ?>">          
                                    
                                <tr>
                                  <th nowrap>First Name</th>
                                  <td class="tab_first_name"><?=$record_data['__64']?></td>
                                </tr>
                                <tr>
                                  <th nowrap>Last Name</th>
                                  <td class="tab_last_name"><?=$record_data['__66']?></td>
                                </tr>
                                <tr>
                                  <th nowrap>Title</th>
                                  <td class="tab_title"><?=$record_data['__65']?></td>
                                </tr>
                                <tr>
                                  <th nowrap>Direct Number</th>
                                  <td class="tab_phone"><?=$record_data['__69']?></td>
                                </tr>
                                <tr>
                                  <th nowrap>Direct Number Extension</th>
                                  <td class="tab_phone_ext"><?=$record_data['__70']?></td>
                                </tr>
                                <tr>
                                  <th nowrap>Function</th>
                                  <td class="tab_function"><?=$record_data['__67']?></td>
                                </tr>
                                <tr>
                                  <th nowrap>Email</th>
                                  <td class="tab_email"><?=$record_data['__68']?></td>
                                </tr>
                                 <tr>
                                  <th nowrap>Last updated date</th>
                                  <td>
                                     <?php 
                                     
                                        if(!empty($record_data['modified_time']))
                                           echo date('Y-m-d H:i',$record_data['modified_time']);
                                        else
                                           echo date('Y-m-d H:i',$record_data['created_time']); 
                                      ?>
                                  </td>
                                </tr>
                              </table>
                            </div>
                          </div>
<!--               contact person4 edit -->
                       <div class="table-structure-info" id="edit_p4_start_division" style="display: none;color: #455a64;">
                         <form  role="form" id="p4_form" method="post" action="<?php echo base_url('/modules/edit_by_individual_tab'); ?>" >
                            <input type="hidden" name="record_id" value="<?php echo $current_record_id; ?>" >
                             <input type="hidden" name="person4" value="person4">
                               <table>
                                 <tr>
                                    <th nowrap>First Name</th>
                                    <td class="tab_first_name">
                                      <input type="text" required="" name="__64" value="<?=$record_data['__64']?>">          </td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Last Name</th>
                                    <td class="tab_last_name">   <input type="text" required="" name="__66" value="<?=$record_data['__66']?>"></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Title</th>
                                    <td class="tab_title"><input type="text" required="" name="__65" value="<?=$record_data['__65']?>"></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Direct Number</th>
                                    <td class="tab_phone"><input type="text" required="" name="__69" value="<?=$record_data['__69']?>"></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Direct Number Extension</th>
                                    <td class="tab_phone_ext"><input type="text" required="" name="__70" value="<?=$record_data['__70']?>"></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Function</th>
                                    <td class="tab_function"><input type="text" required="" name="__67" value="<?=$record_data['__67']?>"></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Email</th>
                                    <td class="tab_email"><input type="text" required="" name="__68" value="<?=$record_data['__68']?>"></td>
                                 </tr>
                                  <tr>
                                    <td colspan="2">
                                     <button type="button" name="Cancle_update_p4" id="Cancle_update_p4" class="btn btn-success">Cancel</button>
                                     <button type="button" name="update_p4" id="update_p4" class="btn btn-success">Update Details</button>
                                  </td>
                                 </tr>
                               </table>
                        </form>
                      </div>
<!--              contact person edit end -->
              <div style="margin-left: 50%;" id="book_p4">
                        <?php
                            $disabled='';
                            $url="https://anbruch.com/#discover-untapped-savings?id=".$_GET['id'];
                            if($record_data['__14']=='Dead'){
                              $disabled='disabled';
                              $url='javascript:void()';
                            }

                          if ($role_id == 1 || $role_id == 5 || in_array('bookings',json_decode($permissions))){ 
                              if($record_data['__14']=="Dead") { ?>  
                            <a href="#" class="btn btn-theme-o book_now" data-toggle="modal" data-target="#"  disabled>Book Now</a>
                            <?php } else{ ?>
                            <a href="javascript:void(0)" class="btn btn-theme-o book_now" data-toggle="modal" data-target="#addClassSchedule">Book Now</a>
                            <?php }?>
                            <?php }?>
                            
             </div>
          </div>
                      <div id="contact-5" class="contact-chip color-theme tab-pane fade">
                          <div>
                            <h4 class="card-title">Contact Person 5 
                               <button style="left:35px;"type="button" id="edit_person_five"  class="btn icon-btn btn-blue-o">
                              <i class="fa fa-edit"></i> <span class="icn-txt" style="margin-left:-46px;">Edit Contact Person 5</span></button> 
                              <i class="fa fa-star primary-contact <?php echo $primary_contact == 71 ? 'yellow' : ''; ?>" data-id="71" style="float:right;color: #d3d3d3ba;"></i></h2>
                          </div>
                          <div class="card-content">
                            <div class="table-structure-info" id="edit_p5_division">
                              <table>
     <input type="hidden" class="tab_lead_name" value="<?php echo $record_data['__71'] ." ".$record_data['__73']; ?>">
     <input type="hidden" class="tab_lead_title" value="<?php echo $record_data['__72']; ?>">          
     <input type="hidden" class="tab_lead_email" value="<?php echo $record_data['__74']; ?>">          
                                      
                                <tr>
                                  <th nowrap>First Name</th>
                                  <td class="tab_first_name"><?=$record_data['__71']?></td>
                                </tr>
                                <tr>
                                  <th nowrap>Last Name</th>
                                  <td class="tab_last_name"><?=$record_data['__73']?></td>
                                </tr>
                                <tr>
                                  <th nowrap>Title</th>
                                  <td class="tab_title"><?=$record_data['__72']?></td>
                                </tr>
                                <tr>
                                  <th nowrap>Direct Number</th>
                                  <td class="tab_phone"> <?=$record_data['__75']?> </td>
                                </tr>
                                     <tr>
                                  <th nowrap>Direct Number Extension</th>
                                  <td class="tab_phone_ext"><?=$record_data['__245']?></td>
                                </tr>
                                <tr>
                                  <th nowrap>Function</th>
                                  <td class="tab_function"><?=$record_data['__244']?></td>
                                </tr>
                                <tr>
                                  <th nowrap>Email</th>
                                  <td class="tab_email"><?=$record_data['__74']?></td>
                                </tr>
                                 <tr>
                                  <th nowrap>Last updated date</th>
                                  <td>
                                     <?php 
                                     
                                        if(!empty($record_data['modified_time']))
                                           echo date('Y-m-d H:i',$record_data['modified_time']);
                                        else
                                           echo date('Y-m-d H:i',$record_data['created_time']); 
                                      ?>
                                  </td>
                                </tr>
                              </table>
                            </div>
                          </div>
<!--               contact person5 edit -->
                       <div class="table-structure-info" id="edit_p5_start_division" style="display: none;color: #455a64;">
                         <form  role="form" id="p5_form" method="post" action="<?php echo base_url('/modules/edit_by_individual_tab'); ?>" >
                            <input type="hidden" name="record_id" value="<?php echo $current_record_id; ?>" >
                             <input type="hidden" name="person5" value="person5">
                               <table>
                                 <tr>
                                    <th nowrap>First Name</th>
                                    <td class="tab_first_name">
                                      <input type="text" required="" name="__71" value="<?=$record_data['__71']?>">          </td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Last Name</th>
                                    <td class="tab_last_name">   <input type="text" required="" name="__73" value="<?=$record_data['__73']?>"></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Title</th>
                                    <td class="tab_title"><input type="text" required="" name="__72" value="<?=$record_data['__72']?>"></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Direct Number</th>
                                    <td class="tab_phone"><input type="text" required="" name="__75" value="<?=$record_data['__75']?>"></td>
                                 </tr>
                                  <tr>
                                    <th nowrap>Direct Number Extension</th>
                                    <td class="tab_phone_ext"><input type="text" required="" name="__245" value="<?=$record_data['__245']?>"></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Function</th>
                                    <td class="tab_function"><input type="text" required="" name="__244" value="<?=$record_data['__244']?>"></td>
                                 </tr>
                                 <tr>
                                    <th nowrap>Email</th>
                                    <td class="tab_email"><input type="text" required="" name="__74" value="<?=$record_data['__74']?>"></td>
                                 </tr>
                                  <tr>
                                    <td colspan="2">
                                     <button type="button" name="Cancle_update_p5" id="Cancle_update_p5" class="btn btn-success">Cancel</button>
                                     <button type="button" name="update_p5" id="update_p5" class="btn btn-success">Update Details</button>
                                  </td>
                                 </tr>
                               </table>
                        </form>
                      </div>
<!--              contact person edit end -->
          <div style="margin-left: 50%;" id="book_p5">
                        <?php
                            $disabled='';
                            $url="https://anbruch.com/#discover-untapped-savings?id=".$_GET['id'];
                            if($record_data['__14']=='Dead'){
                              $disabled='disabled';
                              $url='javascript:void()';
                            }

                          if ($role_id == 1 || $role_id == 5 || in_array('bookings',json_decode($permissions))){ 
                              if($record_data['__14']=="Dead") { ?>  
                            <a href="#" class="btn btn-theme-o book_now" data-toggle="modal" data-target="#"  disabled>Book Now</a>
                            <?php } else{ ?>
                            <a href="javascript:void(0)" class="btn btn-theme-o book_now" data-toggle="modal" data-target="#addClassSchedule">Book Now</a>
                            <?php }?>
                            <?php }?>
                            
             </div>
           </div>

                    </div> <!-- tab content -->


                  </div>


<!-- ******************************************************************************************************* -->
<div style="display:none;">


Lead Owner:
<?php 
foreach ($users_list as $option_key => $option)
{ ?>
    <?php if ($option['id'] == $record_data["__0"])
    {

      $lead_owner = $option['title']?>
        <?php echo $option['title']; ?>
    <?php
    } ?>
<?php
} ?>

Phone: <?php echo $phone ?>
Email: <?php echo $record_data['__4'] ?>
Call Status: <?php echo $call_status ?>
Lead Status: <?php echo $status ?>


Lead Processor Information
<?php echo isset($lead_owner)? $lead_owner:"Not Available";?>
<?php echo isset($opener_name)? $opener_name:"Not Available";?>
<?php echo isset($closer_name)? $closer_name:"Not Available";?>
Lead Category: <?=$record_data['__14']?>
Lead Status: <?=$status?>
Proximity: <?=$record_data['__16']?>
Service Type: <?php if(!empty((array)$record_data['__9'])) { echo implode(', </br> ',(array)$record_data['__9']); } ?>

Lead Source: <?=$record_data['__5']?>
ID Source: <?=$record_data['__11']?>
ID Number: <?=$record_data['__7']?>
Lead Referred Partner: <?=$record_data['__10']?>
Source ID: <?=str_replace('zcrm_', '', $record_data['__12'])?>


Created By: <?php foreach ($users_list as $option_key => $option) { ?>
<?php if ($option['id'] == $record_data["__0"]) { ?>
<?php echo $option['title']; ?>
<?php } ?>
<?php } ?> <?php echo date("m/d/Y", $record_data["created_time"]); ?>


Modified By:
<?php if ($record_data["modified_by"] != NULL) {
foreach ($users_list as $option_key => $option) { ?>
<?php if ($option['id'] == $record_data["modified_by"]) { ?>
<?php echo $option['title']; ?>
<?php } ?>
<?php }
} else { ?>Not Modified Yet <?php } ?>

<?php if ($record_data["modified_time"] != NULL) { ?>
<?php echo date("m/d/Y", $record_data["modified_time"]); ?>
<?php } else {}
$head_office_status = '';
if(strtolower($record_data['__42']) == 'false')
  $head_office_status = 'No';
if(strtolower($record_data['__42']) == 'true')
  $head_office_status = 'Yes';
?>

</div>

<!-- ******************************************************************************************************* -->
        <div class="col-sm-5">                       
          <div id="notes-info" class="collapsible-card bordered-card notes color-theme">

            <div class="flex-row">
              <div class="col">
                <h4 style="display: inline-block;">Notes</h4>
                <?php $current_user_id =  $this->session->userdata('user_id');
                  $current_role_id = $this->session->userdata('role_id');
                  if(/*$current_user_id == $record_data['__21'] || $current_user_id == $record_data['__22'] || $current_user_id == $record_data['__0'] || $current_role_id == 1 || $current_role_id == 7 || $current_role_id == 8*/true)
                  {
                 ?>
                 <a class="reminder-btn" id="reminders" href="#reminder-modal" title="Reminders" data-toggle="modal" ><i class="fa fa-clock-o"></i><span class="reminder-count"></span></a>
                <?php } ?>
                <?php //if(!$openerRights){ ?>
                
                <?php // } ?>

              </div>
            
            </div>
             <div class="flex-row" style="padding: 15px 0px">
              <div class="col-sm-4">
                <select id="note-response" style="color:#41beb8 !important;font-weight:600 !important;background: #e0f7fa;border-color: #1fb5ad;border-radius:4px;margin-left: -12px;">
                  <option value="">Choose Response</option>
                  <option value="Voice mail">Voice mail</option>
                  <option value="Not interested">Not interested</option>
                  <option value="Call back">Call back</option>
                  <option value="Do not call">Do not call</option>
                  <option value="Send Email">Send Email</option>
                  <option value="Booked Appointment">Booked Appointment</option>
                  <option value="New Contact Req'd">New Contact Req'd</option>
                  <option value="Wrong Contact Info">Wrong Contact Info</option>
                  <option value="Gate Keeper Blocked">Gate Keeper Blocked</option>
                </select>
             
             
          <!--<span class="toggle-card-btn bg-blue-50">
                  <i class="icon-crm-angle-down"></i>
              </span> -->
              </div>

               <div class="col-sm-4" style="left: 45px">
                <input type="search" class="form-control" placeholder="search" id="Notes_search">
              </div>

              <div class="col-sm-4" >
                   <a class="btn btn-theme-o" id="add-note-btn" data-toggle="modal" href="#modalOwnerUpdate">Add Note</a>
                   <a class="btn btn-theme-o" id="save-note-btn" href="#">Save Note</a>
              </div>
              
            </div>
            <div id="notes-LAI" class="card-content collapse panel-group additional-info-accordion collapse in " aria-expanded="true">

              <div id="collapse-notes" class="collapse in notes-body note_search_result_panel">
                  <?php  if (isset($notes) && count($notes) > 0) {?>
                      <?php $id = 0; foreach ($notes as $key => $note) { $id ++; if($id == 1) { ?>
                      <div class="panel panel-default">
                         <div class="panel-heading" >
                            <h4 style='font-size:11px;' class="panel-title notes_search_result_number" data-toggle="collapse" data-parent="#notes-LAI" href="#<?php echo $note['id'] ?>"> Note <?php echo $id ?> 
                              <span style="margin-left: 5px;">|</span>
                              <strong class="text-info" style="color:#444;margin-left: 5px;">Posted on: <?php echo date('m/d/Y H:i', $note["created_time"]); ?> by <?php echo $note["created_by"] ?></strong>
                            <i class="fa fa-plus pull-right" style="margin-top: 3px;"></i> </h4>
                          </div>
                        <div id="<?php echo $note['id'] ?>" class="panel-collapse collapse in">
                            <div class="well well-large" style="padding:10px;padding-top: 2px;padding-bottom: 7px;">
                                
                                <!-- <hr style="margin: 0;"/> -->
                               <!--  <h4 style="margin-top: 5px;color:#0098E3;font-size:12pt;font-weight:bold;"><?php //echo $note["note_title"] ?></h4> -->
                                <?php echo $note["note"] ?>
                            </div>
                         </div>
                        </div>
                      <?php } else { ?>
                      <div class="panel panel-default">
                         <div class="panel-heading">
                            <h4 style='font-size:11px;' class="panel-title" data-toggle="collapse" data-parent="#notes-LAI" href="#<?php echo $note['id'] ?>"> Note <?php echo $id ?>
                               <span style="margin-left: 5px;">|</span>
                               <strong class="text-info" style="color:#444;margin-left: 5px;">Posted on: <?php echo date('m/d/Y H:i', $note["created_time"]); ?> by <?php echo $note["created_by"] ?></strong>

                            <i class="fa fa-plus pull-right" style="margin-top: 3px;"></i> </h4>
                          </div>
                        <div id="<?php echo $note['id'] ?>" class="panel-collapse collapse in">
                         
                            <div class="well well-large" style="padding:10px;padding-top: 2px;padding-bottom: 7px;">
<!--                                 <hr style="margin: 0;"/>
 -->                    <!--   <h4 style="margin-top: 5px;color:#0098E3;font-size:12pt;font-weight:bold;"><?php// echo $note["note_title"] ?></h4> -->
                                <?php echo $note["note"] ?>
                            </div>
                         </div>
                        </div>
                      <?php } ?>

                      <?php } ?>
                  <?php } else { ?>
                      <h3 class="text-center" style="margin: 0;">No notes available.</h3>
                  <?php } ?>
                  </div>
            </div> <!-- /#notes-LAI -->

          </div> <!-- /#lead-additional-info -->

            <?php
            $head_office_status = '';
            if(strtolower($record_data['__42']) == 'false')
              $head_office_status = 'No';
            if(strtolower($record_data['__42']) == 'true')
              $head_office_status = 'Yes';
            ?>

          <!-- <div class="row state-cards">
            <div class="col-xs-6">
              <div class="card bg-yellow-500 color-yellow-50 text-right" data-smooth-scroll="#bookings-card" data-time="10000">
                <span class="card-icon">
                  <i class="fa fa-list-ol color-yellow"></i>
                </span>
                <h1><?php echo count($bookings);?></h1>
                <h4>BOOKINGS</h4>
              </div>
            </div>
            
             <div class="col-xs-6">
                  <div class="card bg-red-500 color-red-50 text-right" data-smooth-scroll="#activities-card" data-time="10000">
                    <span class="card-icon">
                      <i class="fa fa-list-ol color-red"></i>
                    </span>
                    <h1><?php echo ($activities1);?></h1>
                    <h4>ACTIVITIES</h4>
                  </div>
              </div>
            <div class="col-xs-6 info">
              <div class="card bg-purple-500 color-purple-50 text-right" data-smooth-scroll="#lead-processor-info" data-time="10000">
                <span class="card-icon">
                  <i class="fa fa-list-ol color-purple"></i>
                </span>
                <h1>1</h1>
                <h4>LEAD PROCESSOR </h4>
              </div>
            </div>             
            <div class="col-xs-6 info">
              <div class="card bg-green-500 color-green-50 text-right" data-smooth-scroll="#attachments-card" data-time="500">
                <span class="card-icon">
                  <i class="icon-crm-doc-text color-green"></i>
                </span>
                <h1><?php echo count($attachments);?></h1>
                <h4>DOCUMENTS</h4>
              </div>
            </div>
          </div> -->
        </div> <!-- /.col-sm-5 -->
    
      </div>
    </div>
</div> <!-- /.hero-row -->
<div class="section-row">
  <div class="collapsible-card card" id="main-company-info">
            <div class="custom-bord flex-row toggable-header" data-toggle="collapse" data-target="#c-info">
                <div class="col">
                   <h4>Company Infomation</h4>
                </div>
                <div>
                  <span class="toggle-card-btn bg-purple-50">
                    <i class="icon-crm-angle-down"></i>
                  </span>
                </div>
            </div>
            <div class="other-info collapsed-have-height-equalizer collapse in" id="c-info">
            <!-- <div id="lead-additional-info" class="collapsible-card card bordered-card color-blue">
              <div class="card-header flex-row toggable-header" data-toggle="collapse" data-target="#accordion-LAI">
                <div class="col">
                  <h4>Additional Lead Information</h4>
                </div>
                <div>
                  <span class="toggle-card-btn bg-blue-50">
                      <i class="icon-crm-angle-down"></i>
                  </span>
                </div>
              </div>
            <div id="accordion-LAI" class="card-content collapse panel-group additional-info-accordion">
              <div class="panel panel-default">
                <div class="panel-heading">
                  <h4 class="panel-title" data-toggle="collapse" data-parent="#accordion-LAI" href="#person-2"> Contact Person 2 <i class="fa fa-plus pull-right"></i> </h4>
                </div>
                <div id="person-2" class="panel-collapse collapse in">
                  <div class="panel-body content">
                    <ul>
                      <li> <b>First Name:</b> <?=$record_data['__51']?> </li>
                      <li> <b>Last Name:</b> <?=$record_data['__50']?> </li>
                      <li> <b>Title:</b> <?=$record_data['__53']?> </li>
                      <li> <b>Phone:</b> <?=$record_data['__55']?> </li>
                      <li> <b>Phone Extension:</b> <?=$record_data['__56']?> </li>
                      <li> <b>Function:</b> <?=$record_data['__52']?> </li>
                      <li> <b>Email:</b> <?=$record_data['__54']?> </li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="panel panel-default">
                <div class="panel-heading">
                  <h4 class="panel-title collapsed" data-toggle="collapse" data-parent="#accordion-LAI" href="#person-3"> Contact Person 3 <i class="fa fa-plus pull-right"></i> </h4>
                </div>
                <div id="person-3" class="panel-collapse collapse">
                  <div class="panel-body content">
                    <ul>
                      <li> <b>First Name:</b> <?=$record_data['__60']?> </li>
                      <li> <b>Last Name:</b> <?=$record_data['__58']?> </li>
                      <li> <b>Title:</b> <?=$record_data['__57']?> </li>
                      <li> <b>Phone:</b> <?=$record_data['__62']?> </li>
                      <li> <b>Phone Extension:</b> <?=$record_data['__63']?> </li>
                      <li> <b>Function:</b> <?=$record_data['__59']?> </li>
                      <li> <b>Email:</b> <?=$record_data['__61']?> </li>
                    </ul>
                  </div>
                </div>
              </div>
            <div class="panel panel-default">
              <div class="panel-heading">
                <h4 class="panel-title collapsed" data-toggle="collapse" data-parent="#accordion-LAI" href="#person-4"> Contact Person 4 <i class="fa fa-plus pull-right"></i> </h4>
              </div>
              <div id="person-4" class="panel-collapse collapse">
                <div class="panel-body content">
                  <ul>
                    <li> <b>First Name:</b> <?=$record_data['__64']?> </li>
                    <li> <b>Last Name:</b> <?=$record_data['__66']?> </li>
                    <li> <b>Title:</b> <?=$record_data['__65']?> </li>
                    <li> <b>Phone:</b> <?=$record_data['__69']?> </li>
                    <li> <b>Phone Extension:</b> <?=$record_data['__70']?> </li>
                    <li> <b>Function:</b> <?=$record_data['__67']?> </li>
                    <li> <b>Email:</b> <?=$record_data['__68']?> </li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="panel panel-default">
              <div class="panel-heading">
                <h4 class="panel-title collapsed" data-toggle="collapse" data-parent="#accordion-LAI" href="#person-5"> Contact Person 5 <i class="fa fa-plus pull-right"></i> </h4>
              </div>
              <div id="person-5" class="panel-collapse collapse">
                <div class="panel-body content">
                  <ul>
                    <li> <b>First Name:</b> <?=$record_data['__71']?> </li>
                    <li> <b>Last Name:</b> <?=$record_data['__73']?> </li>
                    <li> <b>Title:</b> <?=$record_data['__72']?> </li>
                    <li> <b>Phone:</b> <?=$record_data['__75']?> </li>
                    <li> <b>Email:</b> <?=$record_data['__74']?> </li>
                  </ul>
                </div>
              </div>
            </div>
        </div> 
      </div> --> <!-- /#lead-additional-info -->
  
        <div class="col-md-6 l-border" style="min-height: 702px;">
               <div id="company-info" class="collapsible-card">

          <div class="card-header flex-row toggable-header" data-toggle="collapse" data-target="#collapse-company-info">
            <div class="col">
              <h4 style="margin-bottom: 0px;">Company Information
                
                  <ul style="display: inline-block;list-style-type: none;padding-left: 0px;">
                  <li id="parent_general">
                      <button style="left:35px;"type="button" id="edit_general_company"  class="btn icon-btn btn-blue-o">
                      <i class="fa fa-edit"></i> <span class="icn-txt" style="margin-left:-46px;">Edit General</span></button> 
                  </li>
                  <li style="display: none" id="parent_company">
                      <button style="left:35px;"type="button" id="edit_parent_company"  class="btn icon-btn btn-blue-o">
                      <i class="fa fa-edit"></i> <span class="icn-txt" style="margin-left:-46px;">Parent/Affiliate Company Information</span></button> 
                  </li>
                </ul>
              
              </h4>
            </div>
            
          </div>
          <ul class="nav nav-tabs">
              <li class="active" id="general_li">
                <a data-toggle="tab" href="#general">
                  <!-- <span class="icon-crm-tab-corner left"></span> -->
                  <span class="text">General</span>
                  <!-- <span class="icon-crm-tab-corner right"></span> -->
                </a>
              </li>
              <li id="parent_li">
                <a data-toggle="tab" href="#affiliate-company">
                  <!-- <span class="icon-crm-tab-corner left"></span> -->
                  <span class="text">Parent/Affiliate Company Information</span>
                  <!-- <span class="icon-crm-tab-corner right"></span> -->
                </a>
              </li>
             
            </ul>

            <div class="tab-content" >
              <div id="general" class="tab-pane fade in active">
                <div class="table-structure-info" id="edit_general_division">
                  <table>
                    <tr> <th nowrap>Company:</th> <td> <?=$record_data['__31']?> </td> </tr>
                    <tr> <th nowrap>Head Office Status:</th> <td> <?=$head_office_status?> </td> </tr>
                    <tr> <th nowrap>Address Line 1:</th> <td> <?=$record_data['__38']?> </td> </tr>
                    <tr> <th nowrap>Address Line 2:</th> <td> <?=$record_data['__39']?> </td> </tr>
                    <tr> <th nowrap>City:</th> <td> <?=$record_data['__35']?> </td> </tr>
                    <tr> <th nowrap>Province:</th> <td> <?=$record_data['__40']?> </td> </tr>
                    <tr> <th nowrap>Country:</th> <td> <?=$record_data['__37']?> </td> </tr>
                    <tr> <th nowrap>Zip Code:</th> <td> <?=$record_data['__36']?> </td> </tr>
                    <tr> <th nowrap>Phone:</th> <td> <?=$record_data['__32']?> </td> </tr>
                    <tr> <th nowrap>Fax:</th> <td> <?=$record_data['__33']?> </td> </tr>
                    <tr> <th nowrap>Website:</th> <td> <a href="http://<?=str_replace('http://', '', $record_data['__34'])?>" target="_blank"><?=$record_data['__34']?></a> </td> </tr>
                    
                  </table>
                </div>
            
<!--               general company edit start -->
                  <div class="table-structure-info" style="display: none" id="edit_general_start_division">
                     <form  role="form" id="general_form" method="post" action="<?php echo base_url('/modules/edit_by_individual_tab'); ?>" >
                            <input type="hidden" name="record_id" value="<?php echo $current_record_id; ?>" >
                             <input type="hidden" name="general_company" value="general_company">
                  <table>
                    <tr> 
                      <th nowrap>Company:</th>
                       <td>  
                        <input type="text" required="" name="__31" value="<?=$record_data['__31']?>">
                      </td> 
                     </tr>
                    <tr> 
                      <th nowrap>Head Office Status:</th> 
                      <td><select name="__42">
                        <?php
                        if($head_office_status == "Yes")
                        { $select =  "selected"; }else{ $select =  ""; }
                        if($head_office_status == "No")
                        { $select1 =  "selected"; }else{ $select1 =  ""; }
                        ?>
                        <option <?php echo $select1; ?> value="false">No</option>
                        <option <?php echo $select; ?> value="true">Yes</option>
                      </select> </td> 
                    </tr>
                    <tr>
                     <th nowrap>Address Line 1:</th>
                      <td><input type="text" required="" name="__38" value="<?=$record_data['__38']?>"> 
                    </td> 
                  </tr>
                    <tr> 
                      <th nowrap>Address Line 2:</th>
                       <td><input type="text" required="" name="__39" value="<?=$record_data['__39']?>">  
                     </td>
                      </tr>
                    <tr>
                     <th nowrap>City:</th> <td>
                      <input type="text" required="" name="__35" value="<?=$record_data['__35']?>">
                       </td>
                        </tr>
                    <tr>
                     <th nowrap>Province:</th>
                      <td><input type="text" required="" name="__40" value="<?=$record_data['__40']?>"> 
                    </td>
                     </tr>
                    <tr>
                     <th nowrap>Country:</th>
                      <td>  
                        <select id="general_country" name="__37">
                                <?php 
                                   $already_selected =  isset($record_data['__37'])?$record_data['__37']:''; 
                                    foreach($country as $value)
                                    {
                                       if($already_selected == $value)
                                       { $selected = "selected"; } else { $selected = ""; }
                                  
                                    ?>
                                      <option  <?php echo $selected; ?> value="<?php echo $value; ?>"><?php echo $value; ?></option>
                                   <?php  }
                                  ?>
                          </select> 
                       </td> 
                     </tr>
                    <tr>
                     <th nowrap>Zip Code:</th>
                      <td><input type="text" required="" name="__36" value="<?=$record_data['__36']?>"> 
                       </td>
                        </tr>
                    <tr> 
                      <th nowrap>Phone:</th> 
                      <td><input type="text" required="" name="__32" value="<?=$record_data['__32']?>"> 
                    </td> 
                  </tr>
                    <tr> 
                      <th nowrap>Fax:</th> <td> 
                        <input type="text" required="" name="__33" value="<?=$record_data['__33']?>">
                      </td>
                       </tr>
                    <tr>
                     <th nowrap>Website:</th>
                      <td> 
                        <input type="text" required="" name="__34" value="<?=$record_data['__34']?>"></td>
                         </tr>
                    <tr>
                      <td colspan="2">
                       <button type="button" name="Cancle_update_general" id="Cancle_update_general" class="btn btn-success">Cancel</button>
                       <button type="button" name="update_general" id="update_general" class="btn btn-success">Update Details</button>
                    </td>
                   </tr>
                  </table>
                </form>
                </div>
            </div>
<!--               general company edit end -->

              <div id="affiliate-company" class="tab-pane fade">
                <div class="table-structure-info" id="edit_parent_division">
                  <table>
                    <tr>
                      <th nowrap>Company Name</th>
                      <td><?=$record_data['__41']?></td>
                    </tr>
                    <tr>
                      <th nowrap>Address Line 1</th>
                      <td><?=$record_data['__43']?></td>
                    </tr>
                    <tr>
                      <th nowrap>City</th>
                      <td><?=$record_data['__45']?></td>
                    </tr>
                    <tr>
                      <th nowrap>Province</th>
                      <td><?=$record_data['__44']?></td>
                    </tr>
                    <tr>
                      <th nowrap>Country</th>
                      <td><?=$record_data['__46']?></td>
                    </tr>
                    <tr>
                      <th nowrap>Postal Code</th>
                      <td><?=$record_data['__47']?></td>
                    </tr>
                    <tr>
                      <th nowrap>Phone</th>
                      <td><?=(isset($record_data['__186']))?$record_data['__186']:''?></td>
                    </tr>
                    <tr>
                      <th nowrap>Fax</th>
                      <td><?=(isset($record_data['__186']))?$record_data['__187']:''?></td>
                    </tr>
                    <tr>
                      <th nowrap>Website</th>
                      <td><?=(isset($record_data['__186']))?$record_data['__188']:''?></td>
                    </tr>
                    <tr>
                      <th nowrap>Year Established</th>
                      <td><?=(isset($record_data['__186']))?$record_data['__189']:''?></td>
                    </tr>
                  </table>
                </div>

<!-- parent company edit start -->
              <div class="table-structure-info" style="display: none;" id="edit_parent_start_division">
                 <form  role="form" id="parent_form" method="post" action="<?php echo base_url('/modules/edit_by_individual_tab'); ?>" >
                            <input type="hidden" name="record_id" value="<?php echo $current_record_id; ?>" >
                             <input type="hidden" name="parent_company" value="parent_company">
                  <table>
                    <tr>
                      <th nowrap>Company Name</th>
                      <td>  <input type="text" required="" name="__41" value="<?=$record_data['__41']?>"></td>
                    </tr>
                    <tr>
                      <th nowrap>Address Line 1</th>
                      <td>  <input type="text" required="" name="__43" value="<?=$record_data['__43']?>"></td>
                    </tr>
                    <tr>
                      <th nowrap>City</th>
                      <td>  <input type="text" required="" name="__45" value="<?=$record_data['__45']?>"></td>
                    </tr>
                    <tr>
                      <th nowrap>Province</th>
                      <td>  <input type="text" required="" name="__44" value="<?=$record_data['__44']?>"></td>
                    </tr>
                    <tr>
                      <th nowrap>Country</th>
                      <td>
                          <select id="parent_country" name="__46">
                                <?php 
                                   $already_selected =  isset($record_data['__46'])?$record_data['__46']:''; 
                                    foreach($country as $value)
                                    {
                                       if($already_selected == $value)
                                       { $selected = "selected"; } else { $selected = ""; }

                                    ?>
                                      <option  <?php echo $selected; ?> value="<?php echo $value; ?>"><?php echo $value; ?></option>
                                   <?php  }
                                  ?>
                          </select> 
                      </td>
                    </tr>
                    <tr>
                      <th nowrap>Postal Code</th>
                      <td>  <input type="text" required="" name="__47" value="<?=$record_data['__47']?>"></td>
                    </tr>
                    <tr>
                      <th nowrap>Phone</th>
                      <td>  <input type="text" required="" name="__186" value="<?=(isset($record_data['__186']))?$record_data['__186']:''?>"></td>
                    </tr>
                    <tr>
                      <th nowrap>Fax</th>
                      <td>  <input type="text" required="" name="__187" value="<?=(isset($record_data['__187']))?$record_data['__187']:''?>"></td>
                    </tr>
                    <tr>
                      <th nowrap>Website</th>
                      <td>  <input type="text" required="" name="__188" value="<?=(isset($record_data['__188']))?$record_data['__188']:''?>"></td>
                    </tr>
                    <tr>
                      <th nowrap>Year Established</th>
                      <td>  
                        <input type="number"  min="1900" required="" name="__189" value="<?=(isset($record_data['__189']))?$record_data['__189']:''?>"></td>
                    </tr>
                    <tr>
                      <td colspan="2">
                       <button type="button" name="Cancle_update_parent" id="Cancle_update_parent" class="btn btn-success">Cancel</button>
                       <button type="button" name="update_parent" id="update_parent" class="btn btn-success">Update Details</button>
                    </td>
                   </tr>
                  </table>
                </form>
                </div>

<!-- parent company edit end -->
              </div>
            </div>
        
      </div> <!-- /#Company-info -->
    </div>
    <div class="col-md-6 l-border">
             
        <div class="card-header flex-row toggable-header">
          <div class="col">
            <h4>
            Additional Company Information
            <button style="left:35px;"type="button" id="edit_additional_company"  class="btn icon-btn btn-blue-o"><i class="fa fa-edit"></i> <span class="icn-txt" style="margin-left:-46px;">Edit Additional Company Information</span></button> 
          </h4>
          </div>
        </div>
        <div class="table-structure-info" id="edit_additional_division">
            <table class="height-equalizer" data-equalizer="table2">
              <tr>
                <th nowrap>Business Type</th>
                <td><?=$record_data['__48']?></td>
              </tr>
                <tr>
                  <th nowrap>Year Established</th>
                  <td><?=$record_data['__49']?></td>
                </tr>
                <tr>
                  <th nowrap>Estimated Sales</th>
                  <td><?=$record_data['__80']?></td>
                </tr>
                <tr>
                  <th nowrap>Reported Sales</th>
                  <td><?=$record_data['__82']?></td>
                </tr>
                <tr>
                  <th nowrap>No. of Employees</th>
                  <td><?=$record_data['__76']?></td>
                </tr>
                 <tr>
                  <th nowrap>Primary NAICS Code</th>
                  <td><?php echo isset($record_data['__206'])?$record_data['__206']:''; ?></td>
                </tr>
                <tr>
                  <th nowrap>Primary NAICS <br/> Description</th>
                  <td><?=$record_data['__77']?></td>
                </tr>
                <tr>
                  <th nowrap>Primary SIC Code</th>
                  <td><?=$record_data['__78']?></td>
                </tr>
                <tr>
                  <th nowrap>Export Indicator</th>
                  <td><?=$record_data['__81']?></td>
                </tr>
                <tr>
                  <th nowrap>Export Country</th>
                  <td><?=$record_data['__79']?></td>
                </tr>
                <tr>
                  <th nowrap>Sales Tax Registration <br/> GST (CAN)</th>
                  <td><?php if(!empty((array)$record_data['__17'])) { echo implode(', </br> ',(array)$record_data['__17']); } ?></td>
                </tr>
                <tr>
                  <th nowrap>Sales Tax Status</th>
                  <td><?php if(!empty((array)$record_data['__18'])) { echo implode(', </br> ',(array)$record_data['__18']); } ?></td>
                </tr>
                <tr>
                  <th nowrap>Service Type</th>
                  <td><?php if(!empty((array)$record_data['__9'])) { echo implode(', </br> ',(array)$record_data['__9']); } ?></td>
                </tr>
                <tr>
                  <th nowrap>Company Website 2 </th>
                  <td> <?=(isset($record_data['__190']))?$record_data['__190']:''?> </td>
                </tr>
                 <tr>
                  <th nowrap>Employees Range</th>
                  <td><?php echo isset($record_data['__209'])?$record_data['__209']:''; ?></td>
                </tr>
                 <tr>
                  <th nowrap>Email Domain</th>
                  <td><?php echo isset($record_data['__210'])?$record_data['__210']:''; ?></td>
                </tr>
              </table>
           </div>
           
  <!-- Edit additional company start -->
      <div class="table-structure-info" style="display: none" id="edit_additional_start_division">
         <form  role="form" id="additional_form" method="post" action="<?php echo base_url('/modules/edit_by_individual_tab'); ?>" >
                            <input type="hidden" name="record_id" value="<?php echo $current_record_id; ?>" >
                             <input type="hidden" name="additional_company" value="additional_company">
            <table class="height-equalizer" data-equalizer="table2">
              <tr>
                <th nowrap>Business Type</th>
                <td> <input type="text" required="" name="__48" value="<?=$record_data['__48']?>"></td>
              </tr>
                <tr>
                  <th nowrap>Year Established</th>
                  <td> <input type="number" min="1900" required="" name="__49" value="<?=$record_data['__49']?>"></td>
                </tr>
                <tr>
                  <th nowrap>Estimated Sales</th>
                  <td> <input type="text" required="" name="__80" value="<?=$record_data['__80']?>"></td>
                </tr>
                <tr>
                  <th nowrap>Reported Sales</th>
                  <td> <input type="text" required="" name="__82" value="<?=$record_data['__82']?>"></td>
                </tr>
                <tr>
                  <th nowrap>No. of Employees</th>
                  <td> <input type="number" min="1" required="" name="__76" value="<?=$record_data['__76']?>"></td>
                </tr>
                 <tr>
                  <th nowrap>Primary NAICS Code</th>
                  <td> <input type="text" required="" name="__206" value="<?=(isset($record_data['__206']))?$record_data['__206']:''?>"></td>
                </tr>
                <tr>
                  <th nowrap>Primary NAICS <br/> Description</th>
                  <td> <input type="text" required="" name="__77" value="<?=$record_data['__77']?>"></td>
                </tr>
                <tr>
                  <th nowrap>Primary SIC Code</th>
                  <td> <input type="text" required="" name="__78" value="<?=$record_data['__78']?>"></td>
                </tr>
                <tr>
                  <th nowrap>Export Indicator</th>
                  <td>
                    <?php if(($record_data['__81']) == "yes") { $checked = "checked"; $value = "yes"; }if(($record_data['__81']) == "") { $checked =""; $value="";} ?>
                   <input type="checkbox" <?php echo $checked; ?> id="export_indicator" required="" name="__81" value="<?php echo $value; ?>"></td>
                </tr>
                <tr>
                  <th nowrap>Export Country</th>
                  <td>
                    <select id="additional_country" name="__79">
                                <?php 
                                   $already_selected =  isset($record_data['__79'])?$record_data['__79']:''; 
                                    foreach($country as $value)
                                    {
                                       if($already_selected == $value)
                                       { $selected = "selected"; } else { $selected = ""; }
                                    
                                    ?>
                                      <option  <?php echo $selected; ?> value="<?php echo $value; ?>"><?php echo $value; ?></option>
                                   <?php  }
                                  ?>
                          </select> 
                  </td>
                </tr>
                <tr>
                  <th nowrap>Sales Tax Registration <br/> GST (CAN)</th>
                  <td> 
                      <select class="multi-select" style="width: 100% !important; padding: 5px;" multiple id="salex_tax" name="__17[]">
                                <?php 
                                   $already_selected =  isset($record_data['__17'])?$record_data['__17']:'';

                                      //$selected = "";
                                    foreach($salex_tax as $value)
                                    {
                                       $flag = true;
                                      if(!is_array($already_selected))
                                      {
                                        if($already_selected == $value)
                                        {
                                          ?>

                                          <option selected value="<?php echo $value; ?>"><?php echo $value; ?></option>

                                  <?php  $flag=false;    }
                                      }
                                    
                                      foreach ($already_selected as $multi) { 
                                        if($multi == $value)
                                           { 
                                ?>
                                            <option selected value="<?php echo $value; ?>"><?php echo $value; ?></option>
                                     <?php
                                           $flag=false; 
                                              } 
                                          }
                                          if($flag)
                                          {                                 ?>                                    <option value="<?php echo $value; ?>"><?php echo $value; ?></option>
                                   <?php   } }
                                  ?>
                          </select> 
                  </td>
                </tr>
                <tr>
                  <th nowrap>Sales Tax Status</th>
                  <td> 
                    <select class="multi-select" multiple id="salex_tax_status" name="__18[]">
                                <?php 
                                   $already_selected =  isset($record_data['__18'])?$record_data['__18']:''; 

                                    foreach($salex_tax_status as $value)
                                    {
                                        $flag = true;
                                     if(!is_array($already_selected))
                                      {
                                        if($already_selected == $value)
                                        {
                                          ?>

                                          <option selected value="<?php echo $value; ?>"><?php echo $value; ?></option>
                                  <?php  $flag = false;     }
                                      }
                                     
                                      foreach ($already_selected as $multi) { 
                                        if($multi == $value)
                                           { 
                                ?>
                                            <option selected value="<?php echo $value; ?>"><?php echo $value; ?></option>
                                     <?php
                                           $flag=false; 
                                              } 
                                          }
                                          if($flag)
                                          {                                 ?>                                    <option value="<?php echo $value; ?>"><?php echo $value; ?></option>
                                   <?php   } }
                                  ?>
                          </select> 
                  </td>
                </tr>
                <tr>
                  <th nowrap>Service Type</th>
                  <td>  
                   <select class="multi-select" multiple id="service_type" name="__9[]">
                                <?php 
                                   $already_selected =  isset($record_data['__9'])?$record_data['__9']:''; 
                                    foreach($service_type as $value)
                                    {
                                       $flag = true;
                                     if(!is_array($already_selected))
                                      {
                                        if($already_selected == $value)
                                        {
                                          ?>

                                          <option selected value="<?php echo $value; ?>"><?php echo $value; ?></option>
                                  <?php  $flag = false;    }
                                      }
                                      
                                      foreach ($already_selected as $multi) { 
                                        if($multi == $value)
                                           { 
                                ?>
                                            <option selected value="<?php echo $value; ?>"><?php echo $value; ?></option>
                                     <?php
                                           $flag=false; 
                                              } 
                                          }
                                          if($flag)
                                          {                                 ?>                                    <option value="<?php echo $value; ?>"><?php echo $value; ?></option>
                                   <?php   } }
                                  ?>
                          </select> 
                        </td>
                </tr>
                <tr>
                  <th nowrap>Company Website 2 </th>
                  <td>  <input type="text" required="" name="__190" value="<?=(isset($record_data['__190']))?$record_data['__190']:''?> "></td>
                </tr>
                 <tr>
                  <th nowrap>Employees Range</th>
                  <td> 
                    <select name="__209" id="employee_range">
                      <?php
                        if($record_data['__209'] == "5000to9999")
                        { $one = "selected"; } else { $one = ""; }
                       if($record_data['__209'] == "10000to4999")
                        { $two = "selected"; } else { $two = ""; }
                       if($record_data['__209'] == "10000plus")
                        { $three = "selected"; } else { $three = ""; }
                      ?>
                      <option <?php echo $one;?> value="5000to9999">5000to9999</option>
                      <option <?php echo $two;?> value="10000to4999">10000to4999</option>
                      <option <?php echo $three;?> value="10000plus">10000plus</option>
                    </select>
                  </td>
                </tr>
                 <tr>
                  <th nowrap>Email Domain</th>
                  <td> <input type="text" required="" name="__210" value="<?=(isset($record_data['__210']))?$record_data['__210']:''?>"></td>
                </tr>
                 <tr>
                      <td colspan="2">
                       <button type="button" name="Cancle_update_additional" id="Cancle_update_additional" class="btn btn-success">Cancel</button>
                       <button type="button" name="update_addtional" id="update_addtional" class="btn btn-success">Update Details</button>
                    </td>
                   </tr>
              </table>
            </form>
           </div>

  <!-- Edit additional company end -->

         </div>
         
     </div>
   </div>
</div>

<div class="section-row">
        <div id="lead-processor-info" class="collapsible-card card color-purple">

          <div class="custom-bord flex-row toggable-header" data-toggle="collapse" data-target="#collapse-lead-processor-info">
            <div class="col">
              <h4>Lead Processor Information
                  <button style="left:35px;"type="button" id="edit_lead_processor"  class="btn icon-btn btn-blue-o">
                  <i class="fa fa-edit"></i> <span class="icn-txt" style="margin-left:-46px;">Edit Lead Processor Information</span></button> 
              </h4>
            </div>
            <div>
              <span class="toggle-card-btn bg-purple-50">
                <i class="icon-crm-angle-up"></i>
              </span>
            </div>
          </div>

          <div id="collapse-lead-processor-info" class="card-content collapse in collapsed-have-height-equalizer">
            
            <div class="table-structure-info row" id="edit_lead_division">

              <div class="col-sm-6 l-border">
                <table class="height-equalizer" data-equalizer="table1">
                  
                  <tr> <th nowrap >Lead Owner</th> <td> Anbruch.Inc<?php //echo isset($lead_owner)? $lead_owner:"Not Available";?> </td> </tr>
                  <tr> <th nowrap >Phone</th> <td> <?php echo $phone ?> </td> </tr>
                  <tr> <th nowrap >Email</th> <td> <?php echo $record_data['__4'] ?> </td> </tr>
                  <tr> <th nowrap >Call Status</th> <td> <?php echo $call_status ?> </td> </tr>
                  <tr> <th nowrap >Lead Status</th> <td> <?php echo $status ?> </td> </tr>
                  <tr> <th nowrap >Lead Category</th> <td> <?php echo $record_data['__14'] ?> </td> </tr>
                  <tr> <th nowrap ># Dial Attempts</th> <td> </td> </tr>
                  <tr> <th nowrap >Closer</th> <td> <?php echo isset($closer_name)?$closer_name: 'Not Available';?> </td> </tr>
                  <tr> <th nowrap >Opener</th> <td> <?php echo isset($opener_name)?$opener_name: 'Not Available';?> </td> </tr>
                  <tr> <th nowrap >Service Type</th> <td><?php if(!empty((array)$record_data['__9'])) { echo implode(', </br> ',(array)$record_data['__9']); } ?></td> </tr>
                  <tr> <th nowrap >Signing Rate</th> <td><?php echo $record_data['__13']; ?></td> </tr>
                </table>
              </div>

              <div class="col-sm-6 l-border">
                <table class="height-equalizer" data-equalizer="table1">
                  <tr>
                    <th nowrap >Lead Source</th> <td><?=$record_data['__5']?></td>
                  </tr>
                  <tr>
                    <th nowrap >ID Source</th> <td><?=$record_data['__11']?></td>
                  </tr>
                  <tr>
                    <th>Lead ID</th><td><?=$current_record_id ?></td>
                  </tr>
                  <tr>
                    <th nowrap >Lead Referred Partner</th> <td> <?=$record_data['__10']?></td>
                  </tr>
                  <tr>
                    <th nowrap >Source ID</th> <td><?=str_replace('zcrm_', '', $record_data['__12'])?></td>
                  </tr>
                  <tr> <th nowrap >Proximity</th> <td><?=$record_data['__16']?></td> </tr>
                  <tr>
                    <th nowrap >Created By</th>
                    <td>
                      <?php foreach ($users_list as $option_key => $option) { ?>
                        <?php if ($option['id'] == $record_data["created_by"]) {$user_name = $option['title'];?>
                          <span><?php echo isset($user_name)?$user_name:'Not Available';?></span>
                        <?php } ?>
                      <?php } ?>
                    </td>
                  </tr>
                  <tr>
                    <th nowrap >Created On</th>
                    <td><?php echo date("m/d/Y", $record_data["created_time"]); ?></td>
                  </tr>
                  <tr>
                    <th nowrap >Modified By</th>
                    <td>
                      <?php if ($record_data["modified_by"] != NULL) {
                        foreach ($users_list as $option_key => $option) { ?>
                          <?php if ($option['id'] == $record_data["modified_by"]){$modified_by = $option['title'];?>
                            <span><?php echo isset($modified_by)?$modified_by:"Not Available";?></span>
                          <?php } ?>
                        <?php }
                      } else { ?> Not Modified Yet <?php } ?>
                    </td>
                  <tr>
                    <th nowrap >Modified On</th>
                    <td>
                      <?php if ($record_data["modified_time"] != NULL) { ?>
                        <?php echo date("m/d/Y H:i", $record_data["modified_time"]); ?>
                      <?php } else {}?>
                    </td>
                  </tr>
                  
                </table>
              </div>

            </div>
  <!-- start edit lead processor information -->
  <div class="table-structure-info row" style="display: none" id="edit_lead_start_division">

              <div class="col-sm-6 l-border">
               <form  role="form" id="lead_form" method="post" action="<?php echo base_url("/modules/edit_by_individual_tab?cm=Leads"); ?>" >
                            <input type="hidden" name="record_id" value="<?php echo $current_record_id; ?>" >
                             <input type="hidden" name="lead_processor" value="lead_processor">  
                <table class="height-equalizer" data-equalizer="table1">
                 <!--  <tr> <th nowrap >Lead Owner</th> <td> Anbruch.Inc<?php //echo isset($lead_owner)? $lead_owner:"Not Available";?> </td> </tr>
                  <tr>  -->
                    <th nowrap >Phone</th> 
                    <td>
                      <input type="text" required="" name="__32" value="<?=(isset($record_data['__32']))?$record_data['__32']:''?> ">
                   </td> </tr>
                  <tr> <th nowrap >Email</th> <td> <input type="text" required="" name="__4" value="<?=$record_data['__4']?>"> </td> </tr>

                  <tr> <th nowrap >Call Status</th> <td>
                   
                    <select id="lead_call_status" name="__27">
                                <?php 
                                   $already_selected =  isset($record_data['__27'])?$record_data['__27']:''; 
                                    foreach($lead_call_status as $value)
                                    {
                                       if($already_selected == $value)
                                       { $selected = "selected"; } else { $selected = ""; }
                                  
                                    ?>
                                      <option  <?php echo $selected; ?> value="<?php echo $value; ?>"><?php echo $value; ?></option>
                                   <?php  }
                                  ?>
                          </select> 
                  </td> </tr>
                  <tr> <th nowrap >Lead Status</th>
                   <td> 
                   
                      <select id="lead_status" name="__6">
                                <?php 
                                   $already_selected = $status;
                                    foreach($lead_status as $value)
                                    {
                                       if($already_selected == $value)
                                       { $selected = "selected"; } else { $selected = ""; }
                                  
                                    ?>
                                      <option  <?php echo $selected; ?> value="<?php echo $value; ?>"><?php echo $value; ?></option>
                                   <?php  }
                                  ?>
                          </select> 
                  </td> 
                  </tr>
                  <tr> <th nowrap >Lead Category</th> 
                    <td>
                        <select id="lead_category" name="__14">
                                <?php 
                                   $already_selected =  isset($record_data['__14'])?$record_data['__14']:''; 
                                    foreach($lead_category as $value)
                                    {
                                       if($already_selected == $value)
                                       { $selected = "selected"; } else { $selected = ""; }
                                  
                                    ?>
                                      <option  <?php echo $selected; ?> value="<?php echo $value; ?>"><?php echo $value; ?></option>
                                   <?php  }
                                  ?>
                          </select> 
                      </td>
                   </tr>
                  <tr>
                   <th nowrap ># Dial Attempts</th>
                    <td>
                     </td>
                   </tr>
                  <tr> <th nowrap >Closer</th>
                   <td>
                    <!-- <input type="text" required="" name="" value=" <?php //echo isset($closer_name)?$closer_name: 'Not Available';?> "> -->
                     <select id="lead_closer" name="__21">
                                <?php 
                                   $already_selected = isset($record_data['__21'])?$record_data['__21']:'';
                                    foreach($lead_closer as $value)
                                    {
                                      $value1 = $value['first_name'] . " " .$value['last_name'];
                                       if($already_selected == $value['user_id'])
                                       { $selected = "selected"; } else { $selected = ""; }
                                    ?>
                                      <option  <?php echo $selected; ?> value="<?php echo $value['user_id']; ?>"><?php echo $value1; ?></option>
                                   <?php  }
                                  ?>
                          </select> 
                     </td> 
                  </tr>
                  <tr> <th nowrap >Opener</th>
                   <td>
<!-- 
                    <input type="text" required="" name="" value="<?php// echo isset($opener_name)?$opener_name: 'Not Available';?>"> -->
                     <select id="lead_opener" name="__22">
                                <?php 
                                   $already_selected = isset($record_data['__22'])?$record_data['__22']:'';
                                    foreach($lead_opner as $value)
                                    {
                                      $value1 = $value['first_name'] . " " .$value['last_name'];
                                       if($already_selected == $value['user_id'])
                                       { $selected = "selected"; } else { $selected = ""; }
                                    ?>
                                      <option  <?php echo $selected; ?> value="<?php echo $value['user_id']; ?>"><?php echo $value1; ?></option>
                                   <?php  }
                                  ?>
                          </select> 
                     </td>
                     </tr>
                  <tr> <th nowrap >Service Type</th> 
                    <td>
                      <select class="multi-select" multiple id="l_service_type" name="__9[]">
                                <?php 
                                   $already_selected =  isset($record_data['__9'])?$record_data['__9']:''; 
                                    foreach($service_type as $value)
                                    {
                                       $flag = true;
                                     if(!is_array($already_selected))
                                      {
                                        if($already_selected == $value)
                                        {
                                          ?>

                                          <option selected value="<?php echo $value; ?>"><?php echo $value; ?></option>
                                  <?php  $flag = false;    }
                                      }
                                      
                                      foreach ($already_selected as $multi) { 
                                        if($multi == $value)
                                           { 
                                ?>
                                            <option selected value="<?php echo $value; ?>"><?php echo $value; ?></option>
                                     <?php
                                           $flag=false; 
                                              } 
                                          }
                                          if($flag)
                                          {                                 ?>                                    <option value="<?php echo $value; ?>"><?php echo $value; ?></option>
                                   <?php   } }
                                  ?>
                          </select> 
                      
                      </td>
                   </tr>
                  <tr> <th nowrap >Signing Rate</th> 
                    <td>
                      <input type="number" min="1" required="" name="__13" value="<?php echo $record_data['__13'] ?>">
                      </td> 
                    </tr>
                </table>
              </div>

              <div class="col-sm-6 l-border">
                <table class="height-equalizer" data-equalizer="table1">
                  <tr>
                    <th nowrap >Lead Source</th> <td>  
                       <select id="lead_source" name="__5">
                                <?php 
                                   $already_selected =  isset($record_data['__5'])?$record_data['__5']:''; 
                                    foreach($lead_source as $value)
                                    {
                                       if($already_selected == $value)
                                       { $selected = "selected"; } else { $selected = ""; }
                                  
                                    ?>
                                      <option  <?php echo $selected; ?> value="<?php echo $value; ?>"><?php echo $value; ?></option>
                                   <?php  }
                                  ?>
                          </select> 
                    </td>
                  </tr>
                  <tr>
                    <th nowrap >ID Source</th> <td>    
                       <select id="lead_id_source" name="__11">
                                <?php 
                                   $already_selected =  isset($record_data['__11'])?$record_data['__11']:''; 
                                    foreach($lead_id_source as $value)
                                    {
                                       if($already_selected == $value)
                                       { $selected = "selected"; } else { $selected = ""; }
                                  
                                    ?>
                                      <option  <?php echo $selected; ?> value="<?php echo $value; ?>"><?php echo $value; ?></option>
                                   <?php  }
                                  ?>
                          </select> 
                    </td>
                  </tr>
                  <tr>
                    <th nowrap >ID Number</th> <td>    <input type="number" min="1" required="" name="__7" value="<?php echo $record_data['__7'] ?>"></td>
                  </tr>
                  <tr>
                    <th nowrap >Lead Referred Partner</th> <td>    <input type="text" required="" name="__10" value="<?php echo $record_data['__10'] ?>"> </td>
                  </tr>
                  <tr>
                    <th nowrap >Source ID</th> <td>    <input type="text" required="" name="__12" value="<?=str_replace('zcrm_', '', $record_data['__12'])?>"></td>
                  </tr>
                  <tr> <th nowrap >Proximity</th> <td>    <input type="text" required="" name="__16" value=" <?php echo $record_data['__16'] ?> "></td> </tr>
                  
                   <tr>
                      <td colspan="2">
                       <button type="button" name="Cancle_update_lead" id="Cancle_update_lead" class="btn btn-success">Cancel</button>
                       <button type="button" name="update_lead" id="update_lead" class="btn btn-success">Update Details</button>
                    </td>
                   </tr>
                </table>

              </div>
            </form>
  <!-- End lead processor information -->

          </div> <!-- /.card-content -->
   </div> <!-- /#lead-processor-info -->
</div>
            <?php if (!isset($deletedRecord) || $deletedRecord != true) { ?>
            <div class="row section-row" id="bookings-card">
              <div class="col-xs-12">
                <?php require_once "bookings.php"; ?>
              </div>
            </div>
            
            <div class="row section-row">
              <div class="col-xs-12">
                <?php require_once "new_activities1.php"; ?>
              </div>

            </div> 
            <div class="row section-row">
              <div class="col-xs-12">
                <?php require_once "attachment.php"; ?>
              </div>
            </div>
            <div class="row section-row">
              <div class="col-xs-12">
                <?php require_once "proposal.php"; ?>
              </div>
           </div>
            <?php } ?>

          <?php
          }
        ?>

        <?php
          if ($current_module == CLIENTS_PLURAL_NAME)
          {
             require_once "client_view.php";
          }
        ?>

        <?php
          if ($current_module == CONTRACTS_PLURAL_NAME)
          {
             require_once "contracts_view.php";
          }
        ?>

<!--         </form>
 -->
              <!-- Modal -->
          <div class="modal fade" id="modalOwnerUpdate" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                  <div class="modal-content">
                      <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                          <h4 class="modal-title"><strong>Notes</strong></h4>
                      </div>
                      <div class="modal-body">
                          <?php require_once "note.php"; ?>
                      </div>
                      <div class="modal-footer">
                        <!--   <button data-dismiss="modal" class="btn btn-default" type="button">Cancel</button> -->
                          <!--button class="btn btn-success" onclick="bulkActionOnUser('mOwner','change owner of');" type="button">Confirm</button-->
                      </div>
                  </div>
              </div>
          </div>
          <div class="modal fade" id="modalQualified" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                  <div class="modal-content">
                      <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                          <h4 class="modal-title"><strong>Qualified</strong></h4>
                      </div>
                      <div class="modal-body">
                          <?php if(!empty($qualified)) { ?>
                          <?php require_once "qualified.php"; ?>
                        <?php } ?>

                      </div>
                      <div class="modal-footer">
                         <!--  <button data-dismiss="modal" class="btn btn-default" type="button">Cancel</button> -->
                          <!--button class="btn btn-success" onclick="bulkActionOnUser('mOwner','change owner of');" type="button">Confirm</button-->
                      </div>
                  </div>
              </div>
          </div>
          <!-- modal -->

          <!-- Modal -->
          <div class="modal fade" id="modalQualifyNow" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
              <div class="modal-dialog" style="width: 800px;">
                  <div class="modal-content">
                  

                      <div class="modal-header">

                          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                          <h4 class="modal-title"><strong>Qualify Now: Survey - USA Campaign</strong></h4>

                      </div>
                      <div class="modal-body">
                        <div class="text-center">
                          <b style="margin:0 10px;">Survey Type</b>
                          <div class="dropdown" id="survey_types_dropdown" style="display:inline-block;">
                            <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Choose Survey Type
                            <span class="caret"></span></button>
                            <ul class="dropdown-menu">
                              <li><a data-toggle="pill" href="#survey_type1" data-cat = '1' class="select-cat" id = "surveyQ1">SALES TAX</a></li>
                              <!-- <li><a data-toggle="pill" href="#survey_type1" data-cat = '1' class="select-cat" id = "surveyQ1">APPRENTICESHIP TAX</a></li> -->
                              <!-- <li><a data-toggle="pill" href="#survey_type2" data-cat = '2' class="select-cat" id = "surveyQ2">CUSTOMS DUTY</a></li>
                              <li><a data-toggle="pill" href="#survey_type3" data-cat = '3' class="select-cat" id = "surveyQ3">SALES TAX</a></li> -->
                            </ul>
                          </div>
                        </div>
                         <div class="tab-content" style="padding-top:25px;">
                          
                            <div id="survey_type1">
                             <?php require_once "qualify-servey-types/qualify_now_service3.php"; ?>
                            </div>
                             <div id="survey_type2">
                                <?php require_once "qualify-servey-types/qualify_now_service3.php"; ?>
                             </div>
                            <div id="survey_type3" >
                              <?php require_once "qualify-servey-types/qualify_now_service3.php"; ?>
                              
                            </div>

                          </div>
                      </div>
                      <!--div class="modal-footer" style="text-align: center;"> -->
                      <?php if(empty($qualified)) { ?>

                        <!-- <button class="btn btn-success btnNext" type="button">Next</button>

                        <button class="btn btn-success btnSubmit" type="submit" style="display:none;">Submit</button>

                         button data-dismiss="modal" class="btn btn-default" type="button">Cancel</button--->

                      <?php } ?>

                      <!-- </div-->
                    
                  </div>
              </div>
          </div>
              <!-- modal -->
            <?php
            }
            ?>
      </div>
    </section>

        <?php if (!isset($deletedRecord) || $deletedRecord != true) { ?>

            <?php // require_once "attachment.php"; ?>
            <?php //require_once "activities.php"; ?>
            <?php // require_once "new_activities.php"; ?>

            <?php if ($current_module == 'Clients') { ?>
                <?php require_once "contract.php"; ?>
            <?php } ?>

            <?php //require_once "bookings.php"; ?>

        <?php } ?>
      </div>
    </div>
  </section>
</section>

<!-- Send Proposal modal -->

    <div class="modal fade" id="modalSendProposal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                  <div class="modal-content">
                      <div class="modal-header" style="background:#1eb5ad;color:white;">
                          <button type="button" class="close" data-dismiss="modal" aria-hidden="true" style="color: white;opacity: 1;">&times;</button>
                          <h4 class="modal-title">Proposal</h4>
                      </div>
                      <div class="modal-body">
                        <form id="proposal_send" method="post" action="<?php echo base_url('proposal/send_proposal') ?>">
                              <input type="hidden" name="proposal_record_id" id="proposal_record_id" class="form-control" value="<?=$current_record_id?>">
                              <input type="hidden" name="proposal_fname" id="proposal_fname" class="form-control" value="<?=$record_data['__1'] ?>">
                              <input type="hidden" name="proposal_lname" id="proposal_lname" class="form-control" value="<?=$record_data['__2'] ?>">
                              <input type="hidden" name="proposal_company" id="proposal_company" class="form-control" value="<?=$record_data['__31'] ?>">
                              <input type="hidden" name="proposal_address" id="proposal_address" class="form-control" value="<?=$record_data['__38'] ?>">
                              <input type="hidden" name="is_create_pdf" id="is_create_pdf" value="1">

                           <div class="form-group row" style="min-height: 57px !important;">
                            <div class="col-sm-4">
                              <label>Proposal Name *</label>
                            </div>
                            <div class="col-sm-6">
                              <input type="text" id="proposal_name" name="proposal_name" class="form-control" value="" required="">
                            </div>  
                          </div>
                          <div class="form-group row" style="min-height: 57px !important;">
                            <div class="col-sm-4">
                              <label>Email *</label>
                            </div>
                            <div class="col-sm-6">
                              <input type="text" id="proposal_email" name="proposal_email" class="form-control" value="<?= $record_data['__4'] ?>">
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-sm-4">
                              <label for='Service_Type'>Service Type *</label>
                            </div>
                            <div class="col-sm-6">
                              <select multiple="multiple" class="modal-fields" name="proposal_service[]" id="proposal_service" placeholder="Service Type" >
                                 <option value="Sales Tax (CA)">Sales Tax (CA)</option>
                                 <option value="Customs Duty/Drawback (CA)">Customs Duty/Drawback (CA)</option>
                                 <option value="Sales Tax (US)">Sales Tax (US)</option>
                                 <option value="Customs Duty/Drawback (US)">Customs Duty/Drawback (US)</option>
                                 
                              </select>
                            </div>
                          </div>
                        </form> 
                          <div class="clearfix"></div>
                      </div>
                      <div class="modal-footer" style="position: relative;">
                        <div class="loader"></div>
                          <button data-dismiss="modal" id="ignore_proposal" class="btn btn-default" type="button">Ignore</button>
                          <button class="btn btn-success" id="create_proposal" type="button">Confirm</button>
                          <a href="#" target="_blank" id="preview_proposal"><button class="btn btn-fill-blue" type="button">Preview</button></a>
                          <button class="btn btn-success" id="send_proposal" type="button">Send</button>
                      </div>
                  </div>
              </div>
            </div>
  

<!--End Send Proposal -->

<!-- upload document popup-form -->

<div id="upload-document-popup" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Upload Attachment</h4>
      </div>
      <form role="form" action="?cm=<?php echo $current_module; ?>&ac=attachment&id=<?php echo $current_record_id; ?>" enctype="multipart/form-data" method="post">

        <div class="modal-body" style="margin-top:30px; padding:0 50px;">

            <input type="hidden" name="module_name" value="<?php echo $current_module; ?>"/>
            <input type="hidden" name="record_id" class="all_records" value="<?php echo $current_record_id; ?>"/>
            <div class="form-group" style="margin-bottom:25px;">
                <div class="file_uploader">
                    <input id="record_attachment" type="file" name="record_attachment" class="default" />
                    <span class="value"></span>
                    <span class="default">
                        <i class="fa fa-upload"></i>
                        <span class="choose">Choose a file</span> or Drag and drop
                    </span>
                </div>
            </div>
            <div class="form-group" style="margin-bottom:25px;">
                <label for="file_name">Enter the file name *</label>
                <input name="file_name" type="text" class="form-control" required="required" id="file_name" placeholder="Enter the name of the file" style="background:#f5f5f5 !important; border:1px solid #ddd !important; padding:0 9px !important;">
            </div>
        </div>

        <div class="modal-footer" style="text-align:left">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-fill-blue pull-right">Upload attachment</button>
        </div>

      </form>
    </div>

  </div>
</div>




<!-- booking add popup start -->
<!--<div id="addClassSchedule" class="modal fade new-layout" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
    <form id="frmAddBooking" name="frmAddBooking" method="post" action="<?php echo base_url('booking/bookNow');?>">
      <input type="hidden" name="booking_id" id="booking_id">
      <input type="hidden" name="google_event_id" id="google_event_id">
      <input type="hidden" name="title" id="title_id">
      <input type="hidden" name="previous_invitee" id="previous_invitee">
      <input type="hidden" name="current_module" value="<?php echo $current_module; ?>">

      <input type="hidden" name="record_id" id="record_id">
      <div class="modal-header">
        <div class="title">
          <h4 id="classScheduleTitle" class="modal-title">Add Booking</h4>
        </div>
        <div class="icons-plot">

          <button type="button" class="icon add_schedule_timing" disabled>
            <i class="fas fa-check"></i>
            <span class="hover-title" style="width:90px; margin-left:-17px;">Book Now </span>
          </button>

          <span class="icon close-modal" data-dismiss="modal">
            <i class="fas fa-times"></i>
            <span class="hover-title">Close </span>
          </span>
        </div>
      </div>

      <div id="classScheduleBody" class="modal-body">

        <div class="row flex-row">
          <div class="col-sm-8 col-xs-12">
            <div class="tab-title">
              <span>Booking Information</span>
            </div>
            <div class="form-group">
              <label class="control-label" for="textfield">Booking Title</label>
              <input type="text" class="input-xlarge form-control" name="booking_title" id="booking_title" placeholder="Enter title">
            </div>
            
            <div class="row event-day-time" style="margin-top:20px;">
              <div class="col-sm-3 col-xs-6" style="padding-right:0">
                <label class="control-label" for="textfield">Start Date: *</label>
                <input class="input-xlarge form-control datepicker" name="start_date" id="start_date2"  type="text" placeholder="MM/DD/YYYY" required="" value="" required autocomplete="off">
              </div>
              <div class="col-sm-3 col-xs-6 all_dv">
                <label class="control-label" for="textfield">Start Time: *</label>
                <input class="input-xlarge form-control" name="start_time" id="start_time" value="" type="text"  placeholder="HH:MM" autocomplete="off">
              </div>
              <div class="col-sm-3 col-xs-6" style="padding-right:0">
                <span class="txt-to"> to </span>
                <label class="control-label" for="textfield">End Date:</label>
                <input class="input-xlarge form-control datepicker" name="end_date" id="end_date"  type="text" placeholder="MM/DD/YYYY" value="" autocomplete="off">
              </div>
              <div class="col-sm-3 col-xs-6 all_dv">
                <label class="control-label" for="textfield">End Time:</label>
                <input class="input-xlarge form-control timepicker" name="end_time" id="end_time" value="" type="text" placeholder="HH:MM" autocomplete="off">
              </div>
            </div>


              

            
            <div class="event-day-time">
              <label class="control-label event-recurrence" style="width:90px;">
                <input class="form-control checkbox" name="all_day" id="all_day" value="1"  type="checkbox" style="width:17px; position:absolute; visibility:hidden;">
                <span class="input-checkbox-icon"></span>
                <span style="line-height:0;">All Day</span>
              </label>
              <span class="booking_availability">
                <a href="javascript:" class="check_booking">Check Availability</a>
              </span>
               <span class="booking_availability fade" style="padding:2px 7px;">
                <span class="booking-alert"></span>
              </span>
              <div style="display: none;">
                <label class="control-label" for="textfield" style="margin-top:20px;">Visibility</label>
                <select name="visibility" id="visibility" class="inline-select">
                  <option value="public">Public</option>
                  <option value="private">Private</option>
                </select>
              </div>
            </div>

            <div class="row event-day-time get-notify" style="margin-top:20px;">
            </div>
            <button type="button" class="btn btn-success add-notification" id="add-notification-btn">Add Notification</button>
          </div>




          <div class="col-sm-4 col-xs-12" style="border-left:1px solid #ccc;">
            <div class="tab-title" style="margin-bottom:15px;">
              <span>Lead Information</span>
            </div>
            <div>
              <strong style="color:#16514e;" id="booking-name"> </strong>
              <input class="input-xlarge form-control" name="lead_name" id="lead_name"  type="text" placeholder="Lead Name" required="" value="" required autocomplete="off">
            </div>
            <div>
              <strong style="color:#16514e;">Lead Title : </strong>
              <input class="input-xlarge form-control" name="lead_title" id="lead_title"  type="text" placeholder="Lead Title" value="" autocomplete="off">
            </div>
            <div>
              <strong style="color:#16514e;">Email :</strong>
              <input class="input-xlarge form-control" name="email" id="email"  type="email" placeholder="Enter Email" required="" value="" required autocomplete="off">
            </div>
          </div>
        </div>

        <div class="row">

            <div class="col-sm-6 col-xs-12" >
              
              <div class="row">
                
              </div>

              <div class="row">

              </div>

              
            </div>

            <div class="col-sm-6 col-xs-12" style="border-left: 1px solid #ccc; display:none;">

              <div class="row">
                <div class="col-sm-11 col-xs-12">
                  <div class="form-group">
                    <label class="control-label" for="textfield">Invite company contacts and guests:</label>

                    <div class="invite_dv">

                    </div>

                  </div>
                </div>
              </div>

              <div class="row">
                  <div class="col-sm-12 col-xs-12">
                  <div class="form-group">
                    <a class="add_invite" title="Add More" href="javascript:;" style="text-transform:uppercase;">Add Guests</a>
                  </div>
                </div>
              </div>

               <div class="row" style="border-top: 1px solid #ccc; padding-top: 8px;display: none;">
                <div class="col-sm-12 col-xs-12">
                  <div class="form-group">
                    <div>
                      <label class="control-label" for="textfield">
                        <span class="guest_count"></span> Guest(s)
                      </label>
                    </div>

                    <div>
                      <label class="control-label guest_yes_no" for="textfield" style="font-size: 11px;">
                        <span class="guest_yes"></span>
                        <span class="guest_maybe"></span>
                        <span class="guest_no"></span>
                        <span class="guest_awaiting"></span>
                      </label>
                    </div>
                    <div class="invited_dv">

                    </div>
                  </div>
                </div>
              </div>
               <div class="row" style="border-top: 1px solid #ccc; padding-top: 8px;display: none;">
                <div class="col-sm-12 col-xs-12">
                  <div class="form-group">
                    <div>
                      <label class="control-label" for="textfield">
                        Guests can:
                      </label>
                    </div>
                   <div class="guest_checkbox">
                    <div class="check">
                      <label class="control-label" for="textfield" style="vertical-align: middle">
                        <input type="checkbox" name="modify_event" style="zoom: 1.6;">
                      </label> <span>Modify Event</span>
                    </div>
                    <div class="check">
                      <label class="control-label" for="textfield"  style="vertical-align: middle">
                        <input type="checkbox" name="invite_others" style="zoom: 1.6;">
                      </label> <span>Invite Others</span>
                    </div>
                    <div class="check">
                      <label class="control-label" for="textfield"  style="vertical-align: middle">
                        <input type="checkbox" name="see_guest_list" style="zoom: 1.6;">
                      </label> <span>See guest list</span>
                    </div>
                   </div>
                  </div>
                </div>
              </div>

            </div>

        </div>


        <div class="tab-title" style="margin:35px 0 15px;"> <span> Notes & Attachment</span> </div>
        <div class="row">
          <div class="col-sm-8 col-xs-12">
            <label class="control-label" for="textfield" style="text-transform:uppercase;">Notes</label>
            <textarea name="notes" id="notes2" rows="4" cols="106"></textarea>
          </div>
          <div class="col-sm-4 col-xs-12">
            <label class="control-label" for="textfield" style="text-transform:uppercase;">Attachment</label>
            <div class="file_uploader">
              <input type="file" name="file" id="file">
              <span class="value"></span>
              <span class="default">
                <i class="fa fa-upload" style="display:block; font-size:40px; margin:20px 0;"></i>
                <span class="choose">Choose a file</span> or Drag and drop
              </span>
            </div>
          </div>
        </div>

        <div class="row">
            <div class="col-sm-12 col-xs-12">
            <div class="form-group">
            </div>
          </div>
        </div>
        <div class="row">
            <div class="col-sm-12 col-xs-12">
            <div class="form-group">
              <div class="controls">
              </div>
            </div>
          </div>
        </div>

      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-normal" data-dismiss="modal" title="Close modal">Close</button>
        <button type="button" class="btn btn-success add_schedule_timing" disabled>Book Now</button>
        <img src="<?php echo base_url('assets/images/ajax-loader.gif'); ?>" class="ajax-load">
      </div>

    </form>
    </div>
  </div>
</div> -->
<!-- booking add popup end -->

<div id="addClassSchedule" class="modal fade new-layout" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-lg booking-modal">
    <div class="modal-content">
      <div class="row">
      <div class="col-xs-8">
      <form id="frmAddBooking" name="frmAddBooking" method="post" action="<?php echo base_url('booking/bookNow');?>">
        <input type="hidden" name="booking_id" id="booking_id">
        <input type="hidden" name="google_event_id" id="google_event_id">
        <input type="hidden" name="title" id="title_id">
        <input type="hidden" name="previous_invitee" id="previous_invitee">
        <input type="hidden" name="current_module" value="<?php echo $current_module; ?>">
        <input type="hidden" name="created_for" id="created_for">
        <input type="hidden" name="record_id" id="record_id">
        <div id="classScheduleBody" class="modal-body">


          <div class="first-part">
            <div class="row">
              <span class="icon close-modal close-div" data-dismiss="modal">
                <span>&nbsp;</span>
              </span>
              <div class="col-xs-8">
                <div class="form-group event-day-time">
                  <div class="controls">
                    <input type="text" class="input-xlarge form-control title" name="booking_title" id="booking_title" placeholder="Add title" style="width:100%;background-color: white !important;">
                  </div>
                </div>
              </div>
              <div class="col-xs-2">
                <img src="<?php echo base_url('assets/images/ajax-loader.gif'); ?>" class="ajax-load">
                <button class='add_schedule_timing btn save-btn' type="button">Book Now</button>
              </div>
            </div>
            <span class="fa fa-calendar" style="margin-top: 2px;float: left;margin-left: 3px;font-size: 20px;"></span>
            <div class="row event-day-time" style="margin: 0px 0px 5px 30px;display: inline-block;">
              <div class="col-xs-12">
                <input class="input-xlarge booking-time form-control datepicker" name="start_date" id="start_date2"  type="text" placeholder="MM/DD/YYYY" required="" value="" required autocomplete="off" readonly="true">

                <input class="input-xlarge booking-time form-control timepicker start_time_dv" name="start_time" id="start_time" value="" type="text"  placeholder="HH:MM" autocomplete="off">

                <span style="margin-right:8px;"> to </span>

                <input class="input-xlarge booking-time form-control datepicker" name="end_date" id="end_date"  type="text" placeholder="MM/DD/YYYY" value="" autocomplete="off" style="display:none;">

                <input class="input-xlarge booking-time form-control timepicker start_time_dv" name="end_time" id="end_time"  value="" type="text"  placeholder="HH:MM" autocomplete="off">
                <label id="time-error" class="error"></label>
                <!-- <label class="control-label event-recurrence">
                  <input class="form-control checkbox" name="all_day" id="all_day" value="1"  type="checkbox" style="width:17px; position:absolute; visibility:hidden;">
                  <span class="input-checkbox-icon"></span>
                  <span> All Day </span>
                </label> -->
                <!-- <span class="booking_availability" style="margin-left:10px;">
                    <a href="javascript:" class="check_booking">Check Availability</a>
                </span> -->
                <div class="booking-alert"></div>
              </div>
            </div> <!-- /.row.event-day-time -->
          </div>

          <div class="row flex-row">
            <div class="col-sm-8 col-xs-12">
              <div class="tab-title"> <span>Event Details</span> </div>
              <div class="scrollers">
                <div class="row">
                  <div class="col-xs-12">
                    <div class="row event-location"> 
                     <i class="material-icons" style="margin-left:11px; font-size:28px; float:left;">location_on</i>
                     <div class="col-xs-10 location-div" >
                        <input type="text" class="form-control location-input event_location" id="event_location" placeholder="Enter Location" name="event_location" onFocus="geolocate()" autocomplete="off">
                        <a href="javascript:void(0)" onclick="mapsSelector('addForm')" class="open-map btn-link" >Open location in map</a>
                        <span class="location-icon" title="Use current location"> <i class="fa fa-crosshairs" onclick="currentLocation()"></i> </span>
                      </div>
                    </div>
                    <div class="row" style="margin-top: 5px;"> 
                     <i class="fa fa-video-camera" style="margin-left:11px; font-size:24px; float:left;"></i>
                     <div class="col-xs-10" >
                        <select style="border: 0px;background: #f1f3f4; border-radius: 4px;" name="conference" id="conference">
                          <option value="0" selected >Add conferencing</option>
                          <option value="1">Conference call</option>
                          <option value="2">Zoom meeting</option>
                        </select>
                        <img style="display: none;" id="zoom_image" src="<?php echo base_url() ?>static/images/zoom.png" height="45px" width="65px">
                      </div>
                    </div>
                    <div class="event-day-time">
              
                      <div style="display: none;">
                        <label class="control-label" for="textfield" style="margin-top:20px;">Visibility</label>
                        <select name="visibility" id="visibility" class="inline-select">
                          <option value="public">Public</option>
                          <option value="private">Private</option>
                        </select>
                      </div>
                    </div>

                    <div class="row event-day-time get-notify">
                    </div>

                    <div style="margin-bottom: 10px;">
                      <i class="fa fa-bell" style="margin-left:2px; font-size:23px;"></i>
                      <button type="button" class="btn btn-success add-notification" id="add-notification-btn">Add Notification</button>
                    </div>


                    <i class="fa fa-bars" aria-hidden="true" style="margin-left:2px; font-size:24px; float:left"></i>
                    <div class="col-xs-11 notes-div">
                      <div class="controls">
                        <div class="wrapper" style="margin-top:0;padding: 0;">
                          <div class="file_uploader">
                            <input type="file" name="file" id="file">
                            <span class="value"></span>
                            <span class="default">
                              <i class="fa fa-upload"></i>
                              <span class="choose">Choose a file</span>
                            </span>
                          </div>
                        </div>
                        <textarea name="notes" id="notes2" rows="4" cols="106"></textarea>        
                      </div>                
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-sm-4 col-xs-12">
              <div class="tab-title" style="margin-bottom:15px;">
                <span>Lead Information</span>
              </div>
              <div>
                <strong style="color:#16514e;" id="booking-name"> </strong>
                <input class="input-xlarge form-control" name="lead_name" id="lead_name"  type="text" placeholder="Lead Name" required="" value="" required autocomplete="off">
              </div>
              <div>
                <strong style="color:#16514e;">Lead Title : </strong>
                <input class="input-xlarge form-control" name="lead_title" id="lead_title"  type="text" placeholder="Lead Title" value="" autocomplete="off">
              </div>
              <div>
                <strong style="color:#16514e;">Email :</strong>
                <input class="input-xlarge form-control" name="email" id="email"  type="email" placeholder="Enter Email" required="" value="" required autocomplete="off">
              </div>
                <div class="col-guests">
                  <div class="tab-title" style="margin-bottom:0px !important;"> <span>Guests</span> </div>
                  <div class="row">  
                   <div class="col-xs-12 check_guest"></div>       
                    <div class="col-xs-12"> 
                      <div class="form-group">
                        <label class="control-label" for="textfield">Invite company contacts and guests:</label>
                        <div class="guest-list-scroller" style="overflow: hidden;overflow-y: auto;height: 72px;position: relative;">
                          <div class="invite_dv" >
                          </div>
                        <div class="form-group" style="margin-top:10px;">
                          <a  class="add_invite" title="Add More" href="javascript:;" style="text-transform:uppercase;">Add Guests</a>      
                        </div>  
                        </div>  
                                      
                      </div>
                    </div>                
                  </div>          
                  <div class="row">
                <div class="col-xs-12">
                <!-- <div class="form-group">
                    <a  class="add_invite" title="Add More" href="javascript:;" style="text-transform:uppercase;">Add Guests</a>      
                </div> -->
              </div>          
            </div>  
             <div class="row" style="border-top: 1px solid #ccc; padding-top: 8px;">          
                <div class="col-xs-12"> 
                  <div class="form-group guest-list-scroller" style="display:none">
                    <div>
                      <label class="control-label" for="textfield">
                        <span class="">1</span> Guest(s)
                      </label>
                      <span id="email_status" style="display:block;"></span>
                    </div>

                    <!-- <div>
                      <label class="control-label guest_yes_no" for="textfield" style="font-size: 11px;">
                        <span class="guest_yes"></span>
                        <span class="guest_maybe"></span>
                        <span class="guest_no"></span>
                        <span class="guest_awaiting"></span>
                      </label>
                    </div> -->
                    <div class="invited_dv"> </div>
                  </div>
                </div>                
              </div>  
            </div>
            </div>


          </div>

          <div class="row">
            <div class="col-sm-6 col-xs-12" >
              <div class="row">
                
              </div>

              <div class="row">

              </div>
            </div>

            <div class="col-sm-6 col-xs-12" style="border-left: 1px solid #ccc; display:none;">

              <div class="row">
                <div class="col-sm-11 col-xs-12">
                  <div class="form-group">
                    <label class="control-label" for="textfield">Invite company contacts and guests:</label>

                    <div class="invite_dv">

                    </div>

                  </div>
                </div>
              </div>

              <div class="row">
                  <div class="col-sm-12 col-xs-12">
                  <div class="form-group">
                    <a class="add_invite" title="Add More" href="javascript:;" style="text-transform:uppercase;">Add Guests</a>
                  </div>
                </div>
              </div>

               <div class="row" style="border-top: 1px solid #ccc; padding-top: 8px;display: block;">
                <div class="col-sm-12 col-xs-12">
                  <div class="form-group">
                    <div>
                      <label class="control-label" for="textfield">
                        <span class="guest_count"></span> Guest(s)
                      </label>
                    </div>

                    <div>
                      <label class="control-label guest_yes_no" for="textfield" style="font-size: 11px;">
                        <span class="guest_yes"></span>
                        <span class="guest_maybe"></span>
                        <span class="guest_no"></span>
                        <span class="guest_awaiting"></span>
                      </label>
                    </div>
                    <div class="invited_dv">

                    </div>
                  </div>
                </div>
              </div>
               <div class="row" style="border-top: 1px solid #ccc; padding-top: 8px;display: none;">
                <div class="col-sm-12 col-xs-12">
                  <div class="form-group">
                    <div>
                      <label class="control-label" for="textfield">
                        Guests can:
                      </label>
                    </div>
                   <div class="guest_checkbox">
                    <div class="check">
                      <label class="control-label" for="textfield" style="vertical-align: middle">
                        <input type="checkbox" name="modify_event" style="zoom: 1.6;">
                      </label> <span>Modify Event</span>
                    </div>
                    <div class="check">
                      <label class="control-label" for="textfield"  style="vertical-align: middle">
                        <input type="checkbox" name="invite_others" style="zoom: 1.6;">
                      </label> <span>Invite Others</span>
                    </div>
                    <div class="check">
                      <label class="control-label" for="textfield"  style="vertical-align: middle">
                        <input type="checkbox" name="see_guest_list" style="zoom: 1.6;">
                      </label> <span>See guest list</span>
                    </div>
                   </div>
                  </div>
                </div>
              </div>

            </div>

        </div>
        <div class="row">
            <div class="col-sm-12 col-xs-12">
            <div class="form-group">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-12 col-xs-12">
            <div class="form-group">
              <div class="controls">
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
    <div class="col-xs-4 calendar">
    <div class="col-xs-12">
      <div class="select2-div"> 
        <span>Bookings of</span>
      <span>
         <select id="popular" name="own[]" class="popular-list" style="margin-top: -2px;margin-left: 5px;min-width: 15%; background: white; border-radius: 5px;">
              <?php foreach ($closerOpener as $option_key => $option) { if($option['user_id'] == $record_data['__21']){?>
                <option value="<?php echo $option['user_id']; ?>" selected><?php echo $option['first_name'].' '.$option['last_name']; ?></option>
                <?php } else { ?>
                <option value="<?php echo $option['user_id']; ?>" ><?php echo $option['first_name'].' '.$option['last_name']; ?></option>

              <?php } } ?>
        </select>
      </span>
      <img id="ajax-loader" src="<?php echo base_url() ?>assets/images/ajax-loader.gif" style="display: none;position: relative;left:60px;z-index: 999; top:150px;">
      </div>
        <div id="calendar" class="has-toolbar"></div>
     </div> 
    </div>
    </div>
  </div>
</div>
</div><!-- addClassSchedule  -->

<div class="modal fade" id="reminder-modal" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
      <div class="modal-content">
          <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">Reminders</h4>
          </div>
          <div class="modal-body">
            <?php require_once 'reminder.php';?>
          </div>
          <div class="modal-footer">
              <button data-dismiss="modal" class="btn btn-default" type="button">Close</button>
          </div>
      </div>
  </div>
</div>


<!-- Favorite List Modal -->
<div class="modal fade" id="addFavoriteListModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
      <div class="modal-content">
          <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title" style="display:inline-block;"></h4>
              <!-- <button class="btn btn-success add_fav_change" style="color:black;background-color: white;margin-left: 10px;">Create New</button>
              <button class="btn btn-success edit_fav_change" style="color:black;background-color: white;display: none;">Favorite List</button> -->
          </div>
           <div class="modal-body" id="add_new_fav"  style="display:none;">
              <div class="form-group col-lg-6" style="min-height: 57px !important;">
                  <label>Lead List</label>
                  <input type="text" id="title" class="form-control" placeholder="title" />
              </div>
              <div class="clearfix"></div>
          </div>
          <div class="modal-footer" id="add_new_fav_footer"  style="display:none;">
              <button data-dismiss="modal" class="btn btn-default" type="button">Ignore</button>
              <button class="btn btn-success" id="confirm_btn" type="button">Add</button>
          </div>


          <div class="modal-body" id="edit_new_fav" style="height: 62px;">
              <div class="form-group col-lg-9" style="min-height: 57px !important;">
                       <label class="list_name" style="font-size: 15px;">  </label>

                    <!--    <select id="own11" name="own1" class="populate form-control" style="max-width: 100%;margin-top: -2px;margin-left: 20px;min-width: 15%;position: absolute;display: inline-block;">

                      <option value="">Favorite List</option>
                      <?php $mode = $current_module != 'Leads' ? $current_module == 'Clients' ? 2 : 3 : 1;

                      $edit_fav_id=$_GET['edit_fl_id'];
                        
                      foreach ($favorite_list as $option_key => $option) { 
                        
                        if(!empty($edit_fav_id) && $edit_fav_id==$option['id'])
                            $selection='selected';
                          else
                            $selection='';

                          if($option['module_id'] == $mode){ 
                        ?>
                          <option <?php echo $selection; echo !empty($selected_fav_list) && ($selected_fav_list == $option['id']) ? 'selected="selected"' : "" ?> value="<?php echo $option['id']; ?>"><?php echo $option['title']; ?></option> 
                      <?php } } ?>

                  </select>
 -->
         <div class="sel-box" style="display: inline-block;margin-left: 15px;">
           <span class="btn btn-success" id='select'>Favorite List</span>
               <ul class='toc-odd level-1' id="sel-option">
                    <li>Favorite List</li>
                    <?php
                   // echo "<pre>";print_r($favorite_list_records);die();

                     $mode = $current_module != 'Leads' ? $current_module == 'Clients' ? 2 : 3 : 1;                                   
                        foreach ($favorite_list as $option_key => $option) { 
                            if($option['module_id'] == $mode){ 
                              $btn = '<button data-value="'.$option['id'].'" class="btn btn-success add_fav pull-right">Add</button>';
                            foreach ($favorite_list_records as $value) { 
                                if($value['id'] == $option['id']){
                                 $btn = '<button data-value="'.$option['id'].'"  class="btn btn-success remove_fav pull-right" style="background-color: #ff9800;">Remove</button>';
                                }
                              }
                          
                          ?>
                            <li><?php echo $option['title']; ?> <?php echo $btn; ?></li> 
                        <?php  } } ?>
               </ul>
              </div>  
              </div>
              <div class="clearfix"></div>
          </div>
          <div class="modal-footer" id="edit_new_fav_footer">
             <!--  <button data-dismiss="modal" class="btn btn-default" type="button">Ignore</button>
              <button class="btn btn-success" id="add_fav" type="button">Add</button> -->
          </div>

      </div>
  </div>
</div>
<!-- Favorite List Modal -->



<div id="map" style="display: none;"></div>
<script src="<?php echo base_url() ?>static/js/fullcalendar/moment.min.js"></script>
<script src="<?php echo base_url() ?>static/js/fullcalendar/moment.min-new.js"></script>
<script src="<?php echo base_url() ?>static/js/fullcalendar/fullcalendarv3.min.js"></script>

<script type="text/javascript">
  $(document).ready(function(){
    var isSelectShowed = false;
    $('#select').click(function(){
        if(isSelectShowed) {
            $('#sel-option').hide();
        } else {
            $('#sel-option').show();
        }
        isSelectShowed = !isSelectShowed;
    });

     $('#sel-option li').click(function(e){
        //$('#select').text($(this).text());
        $('#sel-option').hide();
        $(this).addClass('current');
        e.preventDefault();
        isSelectShowed = false;
    })

       $(".remove_fav").click(function(){
        var fav_id = $(this).data('value');  
        var r_id = "<?php echo $current_record_id; ?>";
        $.ajax({
            type:'post',
            url: base_url + 'modules/single_id_deleteFavoriteList',
            dataType:'json',
            data: { id : r_id,fav_id : fav_id},
            success:function(data)
            {
              if(data)
              {
                window.location.reload();   
              } 
              else
              {
                alert(data.message);
              }
            }
          });
      });
      $(document).on('click','#conference',function(){
              var value = $(this).val();
              if(value == 2)
              {
                $("#zoom_image").css("display","inline-block"); 
              }else{
                $("#zoom_image").css("display","none"); 
              }
      });
      $(document).on('click','#addFavoriteListModal .edit_fav_change',function(){
            $("#add_new_fav").css('display','none');
            $("#add_new_fav_footer").css('display','none');

             $('#addFavoriteListModal .add_fav_change').css('display','inline-block');
             $(this).css('display','none');

            $("#edit_new_fav").css('display','block');
            $("#edit_new_fav_footer").css('display','block');            
      });
       $(document).on('click','#addFavoriteListModal .add_fav_change',function(){
            $("#add_new_fav").css('display','block');
            $("#add_new_fav_footer").css('display','block');

            $(this).css('display','none');
            $('#addFavoriteListModal .edit_fav_change').css('display','inline-block');

            $("#edit_new_fav").css('display','none');
            $("#edit_new_fav_footer").css('display','none');
      }); 

    $(".add_fav").click(function(){
      var fav_id = $(this).data('value');  
      var uids = "<?php echo $current_record_id; ?>";
        var mode = "<?php echo $current_module ?>";
        //$("input:checkbox:checked").each(function() {
         // var id = $(this).val();
         // if(id != 'on')
         // uids += (uids == '') ? id : ("," + id);
      //});

      if (fav_id == ''){
          alert("Please select Title first.");
          return;
      }
      else
      {
        
        $.ajax({
          type:'post',
          url: base_url + 'modules/editFavoriteList',
          dataType:'json',
          data: { fav_id : fav_id, mode : mode, ids : uids},
          success:function(data)
          {
            if(data.success)
            {
              window.location.reload();
            } 
            else
            {
              alert(data.message);
            }
          }
        });
        
      }
    })

            $("#favorite_list_btn").click(function(){
                var mode = $(this).attr('data-id');
                var uids = $(this).data('value');
              //$("input:checkbox:checked").each(function() {
                  //var id = $(this).val();
                  //uids += (uids == '') ? id : ("," + id);
              //});
              //console.log("uids_check",uids);

              if (uids == ''){
                  alert("No record has been selected. Please select record first.");
                  return;
              }
               if(mode == 'Leads')
               {
                $("#addFavoriteListModal .modal-title").text('Manage Favorite');
                $("#addFavoriteListModal .list_name").text('Lead List :');
                $("#addFavoriteListModal #confirm_btn").attr('data-id', 'Leads'); 
                $("#addFavoriteListModal").modal();
                $('#own1 .select2-container').css('width','150px !important');
                }
              else if(mode == 'Clients')
              {
                $("#addFavoriteListModal .modal-title").text('Manage Favorite');
                $("#addFavoriteListModal .list_name").text('Client List :');
                $("#addFavoriteListModal #confirm_btn").attr('data-id', 'Clients');
                $("#addFavoriteListModal").modal();
                $('#own1 .select2-container').css('width','150px');

              }
              else if(mode == 'Contracts')
              {
                $("#addFavoriteListModal .modal-title").text('Manage Favorite');
                $("#addFavoriteListModal .list_name").text('Contract List :');
                $("#addFavoriteListModal #confirm_btn").attr('data-id', 'Contracts');
                $("#addFavoriteListModal").modal();
                $('#own1 .select2-container').css('width','150px');
              }
            });


              $("#addFavoriteListModal #confirm_btn").click(function(){
                  var uids = $("#favorite_list_btn").data('value');
                  var title = $("#addFavoriteListModal #title").val().trim();
                  var mode = $(this).attr('data-id');
                 
                if (uids == ''){
                    alert("No record has been selected. Please select record first.");
                    return;
                }
                else if(!title)
                {
                  alert("Please select title first.");
                  return; 
                }
                else
                {
                  if(mode)
                  {
                    $.ajax({
                      type:'post',
                      url: base_url + 'modules/addFavoriteList',
                      dataType:'json',
                      data: { title : title, mode : mode, ids : uids},
                      success:function(data)
                      {
                        if(data.success)
                        {
                          window.location.reload();
                        } 
                        else
                        {
                          alert(data.message);
                        }
                      }
                    });
                  }
                }
                });

  });


  $("#proposal_service").select2(); 
  $("#personal_country").select2();
  $("#general_country").select2();
  $("#parent_country").select2();
  $("#additional_country").select2();
  $("#salex_tax").select2();
  $("#salex_tax_status").select2();
  $("#service_type").select2();
  $("#employee_range").select2();
  $("#lead_call_status").select2();
  $("#lead_status").select2();
  $("#lead_category").select2();
  $("#lead_closer").select2();
  $("#lead_opener").select2();
  $("#l_service_type").select2();
  $("#lead_source").select2();
  $("#lead_id_source").select2();

  var base_url = '<?php echo base_url();?>';
 $("#follow_id").click(function(){
    $("#modalFollow").modal();
});
 $("#c_follow_id").click(function(){
    $("#modalClientContractFollow").modal();
});
/* $(function() {

  $('#calendar').fullCalendar({
    header: {
      left: '',
      
      right: 'prev,next'
    },
     defaultView: 'agendaDay'
     //selectable:true,

  });

});
*/
$(function() {
  //$('.popular-list').select2();
  var user_id = '';
  if(user_id == ''){
    user_id = $("#addClassSchedule #popular").val(); //'<?php //echo $openerCloser_id?>';
    $("#addClassSchedule #created_for").val(user_id);
  }else{
    user_id = user_id;
    $("#addClassSchedule #created_for").val(user_id);
  }
  //alert(user_id);
  // alert(user_id);
  $('#calendar').fullCalendar({
    timeFormat: 'H:mm', // uppercase H for 24-hour clock
    //axisFormat: 'HH:mm',
    selectable: true,
    slotLabelFormat:"HH:mm",
    defaultView: 'agendaDay',
    slotDuration :'00:15:00',
    header: {
      left: ' today',
      center: 'title',
      right: 'prev,next'
    },
    editable:true,
    droppable: true,
    eventDurationEditable:false,
    dayClick: function(date,jsEvent, view) {
         
         $('#addClassSchedule #start_time').val(date.format('H:mm'));
         $('#addClassSchedule #start_date2').val(date.format('MM/DD/YYYY'));
         $('#addClassSchedule #end_date').val(date.format('MM/DD/YYYY')); 
         $('#addClassSchedule #end_time').val(moment(date).add(15,'minutes').format('H:mm'));
         $('.ui-timepicker-viewport').scrollTop($('.ui-timepicker-viewport li:nth-child(1)').position().top);
    },

    eventDrop:function(event, delta, revertFunc)
    {     
            var booking_id = event.id;
            var record_id = event.record_id;
            var booking_date = event.start.format();
            var start_date = booking_date.split('T');
            var start_time = start_date[1];
            start_date = start_date[0];
            var end_date = event.end.format();
            end_date = end_date.split('T');
            var end_time = end_date[1];
            end_date = end_date[0];
            var email = event.email;
            var created_for=event.created_for; 

            if (!confirm("Are you sure about this change?")) {
                    revertFunc();
                  }
                  else
                  {
                    $('.calendar-loader').removeClass('hide');
                    $.ajax({
                      type:'post',
                      url: base_url+'booking/bookupdate',
                      data:{ dragEvent:true,created_for:created_for,booking_id:booking_id, record_id:record_id, start_date:start_date, start_time:start_time, end_date:end_date, end_time:end_time,email:email, dragEvent:true },
                      dataType:'json',
                      success:function(data)
                      {
                        if(data.success == false)
                        {
                          alert(data.message);
                          $('.calendar-loader').addClass('hide');
                          revertFunc();
                        }
                        
                      }
                    });
                  }
       
    },

    loading: function(isLoading, view)
    {
      isLoading == true ? $("#addClassSchedule #ajax-loader").css('display', 'block') : $("#addClassSchedule #ajax-loader").css('display', 'none');
    },
    eventSources: [{
          events: function (start, end, timezone, callback) {
            $.ajax({
                url: '<?php echo base_url() ?>Modules/getEvents1',
                method:'post',
                dataType: 'json',
                data: {
                  user_id: user_id , module:'<?php echo $current_module; ?>',
                },
                success: function (msg) {
                  console.log(msg);
                  var events = msg.events;
                  console.log(events);
                  // $('#calendar').fullCalendar('refetchEvents');
                  callback(events);
                }
            });
          },
        },               
      ],

  });
/*$('#popular').on("select2:selecting", function(e) { 
    user_id = $(this).val();
    alert($(this).val());
     if(user_id != ''){
     //user_id = id; 
     $('#calendar').fullCalendar('refetchEvents');
     }
  });*/
$('#popular').on("change", function(e) { 
    user_id = $(this).val();
    //alert($(this).val());
     if(user_id != ''){
     //user_id = id;
     $("#addClassSchedule #created_for").val(user_id); 
     $('#calendar').fullCalendar('refetchEvents');
     }
  });

  $('#addClassSchedule').on('show.bs.modal', function (e) {
     setTimeout(function(){
        $('#calendar').fullCalendar('refetchEvents');        
        $('#calendar').fullCalendar('render');
      },300)
  })

});


 $("#record_follow_id").click(function(){
  var record_id = $(".all_records").val();
  $.ajax({
          method:"post",
          url:base_url + 'booking/followlead',
          data:{'record_id':record_id},
        //  dataType:"json",
          success:function(data) {
          window.location.reload();
             }
        });
  });
 $("#client_contract_follow_id").click(function(){
  var record_id = $(".all_records").val();
  var modules="<?php echo $current_module ?>";
  
  if(modules=='Contracts')
  	  modules='Contract'
  else	
  	  modules='Client'	
  $.ajax({
          method:"post",
          url:base_url + 'booking/followClientContract',
          data:{'record_id':record_id,'module':modules},
        //  dataType:"json",
          success:function(data) {
          window.location.reload();
             }
        });
  });
/*
  $('input[type=radio][name=selling_goods_to_canada]').change(function() {
    if (this.value == 'yes') {
      $(this).parent().parent().next('.btnNext').show();
      $(this).parent().parent().next('.btnSubmit').hide();
      $('.btnSubmit').hide();
      $('.btnNext').show();
    }
    else if (this.value == 'no') {
      $(this).parent().parent().next('.btnNext').hide();
      $(this).parent().parent().next('.btnSubmit').show();
      $('.btnSubmit').show();
      $('.btnNext').hide();
    }
  });*/
/*
  $('input[type=radio][name=tax_consultant_conduct]').change(function() {
    if (this.value == 'yes') {
      $('.recoveries').show();
    }
    else if (this.value == 'no') {
      $('.recoveries').hide();
    }
  });

  $('input[type=radio][name=government_audit]').change(function() {
    if (this.value == 'yes') {
      $('.areas').show();
    }
    else if (this.value == 'no') {
      $('.areas').hide();
    }
  });

  $('input[type=radio][name=operation_in_canada]').change(function() {
    if (this.value == 'yes') {
      $('.operations').show();
    }
    else if (this.value == 'no') {
      $('.operations').hide();
    }
  });*/

/*
  $('.btnNext').on('click',function(){

    console.log("attr "+$(this).attr('data-id'));
    if($(this).attr('data-id')=="q2")
    {
      var val = $('input[type=radio][name=annual_sales_to_canada]:checked').val();
      console.log("val "+val);
      if(val=="other")
      {
        var tval = $('input[type=text][name=annual_sales_to_canada_other_amount]').val();
        console.log("tval "+tval);
        if(tval=="")
        {
          alert("Enter the other amount!");
          return false;
        }
      }
    }

    console.log("attr "+$(this).attr('data-id'));
    if($(this).attr('data-id')=="q7")
    {
      var val = $('input[type=radio][name=sales_tax_return_filed_from]:checked').val();
      console.log("val "+val);
      if(val=="other")
      {
        var tval = $('input[type=text][name=sales_tax_return_filed_from_other]').val();
        console.log("tval "+tval);
        if(tval=="")
        {
          alert("Enter the other source!");
          return false;
        }
      }
    }

    $(this).parent().next('.form-group').show();
    $(this).parent().hide();
  });

  $('.btnPrevious').on('click',function(){
    $(this).parent().prev('.form-group').show();
    $(this).parent().hide();
  });*/

/*
  $('.btnSubmit2').on('click',function(e){

    var val = $('input[type=radio][name=operation_in_canada]:checked').val();
    if(val=="yes")
    {
      e.preventDefault();
      var tval = $('input[type=text][name=operation_in_canada_type]').val();
      console.log("tval "+tval);
      if(tval=="")
      {
        alert("Enter the operation type!");
        return false;
      }
      else
      {
        $("#frmQualify").submit();
      }
    }

  });*/
  function deleteRecord(){
      window.location.href = "<?php echo base_url() ?>modules/viewRecord/?cm=<?php echo $current_module; ?>&ac=del&id=<?php echo $current_record_id; ?>&mtd=2";
  }
  function archiveRecord(){
      window.location.href = "<?php echo base_url() ?>modules/viewRecord/?cm=<?php echo $current_module; ?>&ac=del&id=<?php echo $current_record_id; ?>&mtd=1";
  }
  function convertRecord(){
    var signing_rate = $("#signing_rate").val();
    var Service_Type = $("#Service_Type").val();
    var expected_start_date = $("#expected_start_date").val();
    if(signing_rate && signing_rate!=='0')
    {
      if(Service_Type!='' && Service_Type!=null)
      {
        if(expected_start_date!='' && expected_start_date!=null)
        {
          $("#modal_error").text('');
          window.location.href = "<?php echo base_url() ?>modules/viewRecord/?cm=<?php echo $current_module; ?>&ac=convert&id=<?php echo $current_record_id; ?>&signing_rate="+signing_rate+"&service_type="+Service_Type+"&expected_technical_start_date="+expected_start_date;
        }
        else
        {
          $("#modal_error").text('Enter valid Start Date');
        }
      }
      else
      {
        $("#modal_error").text("Choose Service Type");
      }
    }
    else
    {
      $("#modal_error").text("Enter valid Signing Rate"); 
    }
  }

  function sectionToggle(i){
      $("#" + i).slideToggle();
      var elem = $("#carot_" + i);
      if (elem.hasClass('fa-plus-square')) {
          elem.removeClass('fa-plus-square');
          elem.addClass('fa-minus-square');
      } else {
          elem.removeClass('fa-minus-square');
          elem.addClass('fa-plus-square');
      }
  }
  function showContactPersonDetail(idx)
  {
  $('#contact_person_'+idx).slideToggle();
      var elem = $("#ccarot_" + idx);
      if (elem.hasClass('fa-plus-square')) {
          elem.removeClass('fa-plus-square');
          elem.addClass('fa-minus-square');
      } else {
          elem.removeClass('fa-minus-square');
          elem.addClass('fa-plus-square');
      }
  }

  $('#send_email').click(function()
  {
    console.log('clicked');
    var email = $(this).attr('data-email');
    var record_id = '<?php echo $current_record_id ?>';
    var module_name = '<?php echo $current_module ?>';
    var url = '<?php echo base_url() ?>reports/sendMail?action=compose&email='+email+'&record_id='+record_id+'&module_name='+module_name+'';
    sendEmailWindow = window.open(url, 'Send Email', "width=1000,height=600");

    //if(email!='')
    //{
      //var url = '<?php echo base_url() ?>modules/sendMail?action=compose&email='+email;
      //window.open(url, 'Send Email', "width=1000,height=600");
    //}
    //else
    //{
      //alert('No email specified for this user!');
    //}
  });

  function closeme()
  {
    sendEmailWindow.close();
  }

  CKEDITOR.replace('notes2',{
        removePlugins : 'elementspath',
        resize_enabled : false,
         /* toolbar : [
           ['Bold','Italic','Underline','StrikeThrough','-','Undo','Redo','-','Cut','Copy','Paste','Find','Replace','-','Outdent','Indent','-','Print'],
           '/',
        ] ,*/
          height: '50px',
          contentsCss : 'body{background:#f1f3f4;font-family:sans-serif, Arial, Verdana, "Trebuchet MS"; font-size:12px;}',
        });

  $(".datepicker,#datepicker2").datepicker(
  {minDate: 0}
    );
  $("#addClassSchedule .timepicker").timepicker({
      timeFormat: 'H:i',
      step: 15,
      startTime: new Date(0,0,0,9,0,0) // 3:00:00 PM - noon
    });
  /* book now */
    $(".book_now").click(function(){
        var find = $(this).parent().parent();
        if(find[0].id == "client-info")
        {
            var add = $(find).children().eq(3).children().children();
        }else{
           var add = $(find).children().eq(1).children().children();
        }
        var name = $(add).find(".tab_lead_name").val();
        var title = $(add).find(".tab_lead_title").val();
        var email = $(add).find(".tab_lead_email").val();
        //console.log("book_now",find[0].id);

        $("#addClassSchedule #start_date2").val(getCurrentDate());
        var time = getCurrentTime().split('T');
        console.log("time",time);
        if(time[0] == '11:45 pm')
        {
          $("#addClassSchedule #end_date").val(getNextDate());
        }
        //$("#addClassSchedule #start_time").val(time[0]);
       // $("#addClassSchedule #end_time").val(time[1]); 

      var current_module = $("#current_module").val();
      if(current_module == "Leads"){
        $("#lead_name").val(name).attr('readonly', true).addClass('input-disabled');
        $("#lead_title").val(title).attr('readonly', true).addClass('input-disabled');
        $("#email").val(email);
        $("#addClassSchedule #record_id").val("<?php echo isset($current_record_id) ? $current_record_id :''; ?>");
        $("#booking-name").text("Lead name :");

     }else if(current_module == "Clients"){
        $("#lead_name").val(name).attr('readonly', true).addClass('input-disabled');
        $("#lead_title").val(title).attr('readonly', true).addClass('input-disabled');
        $("#email").val(email);
        $("#addClassSchedule #record_id").val("<?php echo isset($current_record_id) ? $current_record_id :''; ?>");
        $("#booking-name").text("Client name :");
     }
    });

    var form = $( "#frmAddBooking" );
    form.validate(
    {
        rules: {
        booking_title: "required",
        },
        invalidHandler: function(form, validator) {
          var errors = validator.numberOfInvalids();
          if (errors) {
                $("#addClassSchedule").animate({ scrollTop: 0 }, "fast");
          }
      },
      messages:{
       booking_title: "Enter Booking title."
      }
    });
  /* Add Event */
  $( ".add_schedule_timing" ).click(function() {
     var status = false;
     var start_time = $("#addClassSchedule #start_time").val();
     var end_time = $("#addClassSchedule #end_time").val();
     if(form.valid())
      {
        
       var arr = $('#frmAddBooking').find('input[name="invite[]"]').map(function () {
        return this.value; // $(this).val()
       }).get(); 
       
       $('.check_guest').html('');
       var arr = arr.filter(function(v){return v!==''});
       console.log("email_check",arr);
       if(hasDuplicates(arr)){
            $('.check_guest').append('<div class="alert alert-danger">Email can not be same</div>');
            return;
       } 

      //time validation start 3800
      var s_time = $("#addClassSchedule #start_time").val();
      var s_date = $("#addClassSchedule #start_date2").val(); 
      var e_time = $("#addClassSchedule #end_time").val();
      var e_date = $("#addClassSchedule #start_date2").val();

       if(s_time=='' || s_time==null)
       {
             $("#addClassSchedule #time-error").css("display","inline-block");
             $("#addClassSchedule #time-error").text('Invalid Schedule time');
             setTimeout(function(){
                $("#addClassSchedule #time-error").fadeOut('slow');
             },2000);
             return false;
       }  

      var s_main_date =new Date(s_date);
      var e_main_date =new Date(e_date);

      s_main_date.setDate(s_main_date.getDate());
      var s_dd = s_main_date.getDate();
      var s_mm = s_main_date.getMonth();
      var s_y = s_main_date.getFullYear();

      e_main_date.setDate(e_main_date.getDate());
      var e_dd = e_main_date.getDate();
      var e_mm = e_main_date.getMonth();
      var e_y = e_main_date.getFullYear();

      var stheTime = $("#addClassSchedule #start_time").val().split(":");
      var s_hour = stheTime[0];
      var s_min = stheTime[1]; 

      var etheTime = $("#addClassSchedule #start_date2").val().split(":");
      var e_hour = etheTime[0];
      var e_min = etheTime[1]; 

     var sFormatted = s_date + ' ' + s_time;
     var eFormatted = e_date + ' ' + e_time;

      var date1 = new Date(sFormatted);
      var date2 = new Date(eFormatted);

      if(s_dd == e_dd)
      {
        if(date1.getTime() < date2.getTime())
          {  } else 
          {
             $("#addClassSchedule #time-error").css("display","inline-block");
             $("#addClassSchedule #time-error").text('Invalid Schedule time');
             setTimeout(function(){
                $("#addClassSchedule #time-error").fadeOut('slow');
             },2000);
             return false;
         }      
       }
       
          

    //time validation end
      
       $('#addClassSchedule .ajax-load').show();
       $("#notes2").val(CKEDITOR.instances.notes2.getData());
       $('#frmAddBooking').ajaxSubmit({
                  dataType: 'json',
                  success: function (data) {
                      $('#addClassSchedule').modal("hide");

                      if (typeof data != 'undefined' && typeof data.message != 'undefined' && data.message != 'undefined' && data.success == true) {
                          var html = '';
                          var html = '<div class="col-md-12"><div class="alert alert-success alert-dismissable" data-auto-dismiss="2000"><button aria-hidden="true" data-dismiss="alert" class="close" type="button"></button><strong>Success! </strong>'+ data.message + '</div></div>';
                          $('.flash-message').html(html);
                          $('#frmAddBooking')[0].reset();
                          $('#addClassSchedule .ajax-load').hide();
                          $('.success').css('display', 'block');
                          $('#success-message').text(data.message);
                          $('#calendar').fullCalendar('refetchEvents');
                          //location.reload();

                      }else if(typeof data != 'undefined'  && data.success != 'undefined' && data.success == false)
                      {
                        var html = '';
                          var html = '<div class="col-md-12"><div class="alert alert-danger alert-dismissable" data-auto-dismiss="2000"><button aria-hidden="true" data-dismiss="alert" class="close" type="button"></button><strong>Error! </strong>'+ data.message + '</div></div>';
                          $('.flash-message').html(html);
                          $('#frmAddBooking')[0].reset();
                          $('#addClassSchedule .ajax-load').hide();
                          $('.warning').css('display', 'block');
                          $('#warning-message').text(data.message);
                           $('#calendar').fullCalendar('refetchEvents');
                          //location.reload();
                      }

                  },
                  error: function(data){

                    $('#addClassSchedule').modal("hide");
                    if (typeof data != 'undefined') {
                          var html = '';
                          var html = '<div class="col-md-12"><div class="alert alert-danger alert-dismissable" data-auto-dismiss="2000"><button aria-hidden="true" data-dismiss="alert" class="close" type="button"></button><strong>Error! </strong>There are some problems to perform this action.</div></div>';
                          $('.flash-message').html(html);
                          $('#frmAddBooking')[0].reset();
                           $('.warning').css('display', 'block');
                          $('#warning-message').text(data.message);
                           $('#calendar').fullCalendar('refetchEvents');
                          $('#addClassSchedule .ajax-load').hide();
                         }
                   }
              });
      }
    });

   /* check availability */
  $(".check_booking").click(function(){
    var record_id = $("#frmAddBooking #record_id").val();
    var start_date = $("#frmAddBooking #start_date2").val();
    var start_time = $("#frmAddBooking #start_time").val();
    var email = $("#frmAddBooking #email").val();
    if($("#frmAddBooking #all_day").prop("checked") == true)
    {
      if(start_date != ''){
        $.ajax({
          method:"post",
          url:base_url + 'booking/checkAvailability',
          data:{'record_id':record_id, 'start_date':start_date, 'start_time':start_time,'email':email},
          dataType:"json",
          success:function(data){ 
             if (typeof data != 'undefined') {
            console.log(data);
            if(data.booking == false){
             $("#addClassSchedule .add_schedule_timing").prop("disabled", true);
             $(".booking-time").css("border","1px solid red");
             $(".booking-alert").text(data.status);
             $(".booking-alert").addClass('alert-false in');
             $(".booking-alert").removeClass('alert-true');
             return false;
            }else{ 
             $("#addClassSchedule .add_schedule_timing").removeAttr("disabled");
             $(".booking-time").css("border","1px solid green");
             $(".booking-alert").text(data.status);
             $(".booking-alert").addClass('alert-true in');
              $(".booking-alert").removeClass('alert-false');
            }
            }
          }
        });
       }else
       {
        alert("Choose start date");
       }
    }else
    {
        if(start_date != '' && start_time != ''){
        $.ajax({
          method:"post",
          url:base_url + 'booking/checkAvailability',
          data:{'record_id':record_id, 'start_date':start_date, 'start_time':start_time,'email':email},
          dataType:"json",
          success:function(data){ 
             if (typeof data != 'undefined') {
            console.log(data);
            if(data.booking == false){
             $("#addClassSchedule .add_schedule_timing").prop("disabled", true);
             $(".booking-alert").text(data.status);
             $(".booking-time").css("border","1px solid red");
             $(".booking-alert").addClass('alert-false in');
             $(".booking-alert").removeClass('alert-true');
             return false;
            }else{ 
             $("#addClassSchedule .add_schedule_timing").removeAttr("disabled");
             $(".booking-time").css("border","1px solid green");
             $(".booking-alert").text(data.status);
             $(".booking-alert").addClass('alert-true in');
              $(".booking-alert").removeClass('alert-false');
            }
            }
          }
        });
       }else
       {
        alert("Choose start date and time");
       }
     }
  });
  /*$("#addClassSchedule #start_time").timepicker({
    timeFormat: 'h:mm a',
    interval: 30,
    change:availCheck
  })*/
  $("#start_date2,#all_day").on("change keyup",function(){
    availCheck();
  });
  function availCheck(){
    $('.booking-alert').text('');
    $('.booking_availability').removeClass('in');
    //$("#addClassSchedule .add_schedule_timing").prop("disabled", true);
  }
</script>



<script type="text/javascript">
    $(document).ready(function(){
      
              
        $(document).on('keyup','#Notes_search',function(){
                  var x = $(this).val();
                  var value = x.replace(/^\s\s*/, '');
                  var id = "<?php echo $record_data['created_by'] ?>";
                  var current_record = "<?php echo $current_record_id; ?>";
                  console.log('current_record',current_record);
                   $.ajax({
                        type:'post',
                        url: base_url + 'Modules/leads_notes_search',
                        data: { id : id, value : value,current_record:current_record },
                        dataType: 'json',
                        success: function(data)
                        {
                          $('.note_search_result_panel').html('');
                          var result = "";
                          var number = 1;
                          if(data !== 'error')
                          {
                            for(var i=0;i<data.length;i++)
                            {
                                result +='<div class="panel-heading" style="margin-top: 10px;"><h4 style="font-size:11px;" class="panel-title notes_search_result_number" data-toggle="collapse" data-parent="#notes-LAI" href="#'+data[i].id+' "> Note '+number+' <span style="margin-left: 5px;">|</span><strong  class="text-info" style="color:#444;margin-left: 5px;">Posted on: '+data[i].created_time+' by '+data[i].created_by+'</strong><i style="margin-top: 3px;" class="fa fa-plus pull-right"></i> </h4></div><div id="'+data[i].id+'" class="panel-collapse collapse in"> <div class="well well-large" style="padding:10px;padding-top: 2px;padding-bottom: 7px;">'+data[i].note+'</div></div>';
                                $('.note_search_result_panel').html(result);
                                number++;
                            }
                          }else{
                            $('.note_search_result_panel').html('<h3 class="text-center" style="margin=0px;">No notes available.</h3>');
                          }
                        }
                      });

        });
         $(document).on('click','.notes_search_result_number',function(){
            var x = $(this).parent().parent();
            setTimeout(function(){
            if(x[0].lastElementChild.className !== "panel-collapse collapse in")
              {
                $('.notes_search_result_number').addClass('collapsed');
              }
              else
              {
                $('.notes_search_result_number').removeClass('collapsed');
              }
            },500);
          });

        $('.file_uploader input[type="file"]').click(function(e){
          $('.file_uploader .value').text('');
        });
        $('.file_uploader input[type="file"]').change(function(e){
            var fileName = e.target.files[0].name;
            $('.file_uploader .value').text(fileName);
        });

      $('input[name="all_day"]').click(function(){
      if($(this).prop("checked") == true){
        $('.start_time_dv').hide();
      }
      else if($(this).prop("checked") == false){
        $('.start_time_dv').show();
      }
    });

      $('.toggable-header').click(function(){
        $(this).find('.toggle-card-btn i').toggleClass('icon-crm-angle-down icon-crm-angle-up');
      });

      /* new code start here*/
      $("#note-response").change(function(){
        var data = $(this).val();
        if(data != '')
        {
          $("#add-note-btn").css('display','none');
          $("#save-note-btn").css('display','inline-block');
        }
        else
        {
          $("#add-note-btn").css('display','inline-block');
          $("#save-note-btn").css('display','none');
        }
      });
      $("#save-note-btn").click(function(){
        var data = $("#note-response").val();
        $("#addNoteForm #note").val(data);
        $("#addNoteForm").submit();
      });
      $("#back-btn").click(function(){
        history.back();
      });
      
      var alphabet="<?php echo isset($_GET['alphabet'])?$_GET['alphabet']:''; ?>";
      var fl_id="<?php echo isset($_GET['fl_id'])?$_GET['fl_id']:''; ?>"; 
      var c_module ="<?php echo $c_module ?>";
      
       $("#leads_btn_close").click(function(){
          $("#leads_btn_close").css('display','none');
          $("#leads-popup-close").click();
         });

      $("#leads_btn, #second_leads_btn").click(function(){
          $("#leads_btn_close").css('display','block');

          var user_id = $('#sort_leads').val() || 0;
          sessionStorage.setItem("leadsort", user_id);  
         // var record_id = '<?php echo $current_record_id ?>';
          var record_id = $(".company-name").html();
          url =base_url + "modules/get_modules_by_user_id/" + user_id+"/?cm=Leads&record_id="+record_id+"";

          load_datatable(c_module,1,url,alphabet,fl_id);
          
          $("#leads-data-table").css('display','block');
          $("#leads-popup").addClass("open");

      });

       $("#clients_btn,#second_clients_btn").click(function(){
         $("#clients_btn_close").css('display','block');
         var user_id = $('#sort_clients').val() || 0;
         sessionStorage.setItem("clientsort", user_id);  
         // var record_id = '<?php echo $current_record_id ?>';
          var record_id = $(".company-name").html();

         url =base_url + "modules/get_modules_by_user_id/" + user_id+"/?cm=Clients&record_id="+record_id+"";
        
         load_datatable(c_module,2,url,alphabet,fl_id);  

         $("#leads-data-table").css('display','block');
         
          $("#leads-popup").addClass("open");
          $("#leads-popup .head ").css('background-color','#1e90ff');
          $("#leads-popup #leads-popup-close").css('color','#1e90ff');
          change_scrollbar_color('#1e90ff','#1e90ff');

      });

       $("#leads_btn_close").click(function(){
          $("#leads_btn_close").css('display','none');
          $("#leads-popup-close").click();
         });
       $("#clients_btn_close").click(function(){
          $("#clients_btn_close").css('display','none');
          $("#leads-popup-close").click();
         });
       $("#contracts_btn_close").click(function(){
          $("#contracts_btn_close").css('display','none');
          $("#leads-popup-close").click();
         });
      
      $("#contracts_btn, #second_contracts_btn").click(function(){
        $("#contracts_btn_close").css('display','block');
        //$("#leads_btn_close").attr('style','display:block;color:#901EFF;border:1px solid #901EFF;');
          //var record_id = '<?php echo $current_record_id ?>';
          var record_id = $(".company-name").html();

         var user_id = $('#sort_contracts').val() || 0;
         sessionStorage.setItem("contractsort", user_id);  

         url =base_url + "modules/get_modules_by_user_id/" + user_id+"/?cm=Contracts&record_id="+record_id+"";
        
         load_datatable(c_module,3,url,alphabet,fl_id);  

         $("#leads-data-table").css('display','block');
         
          $("#leads-popup").addClass("open");
          $("#leads-popup .head ").css('background-color','#901EFF');
          $("#leads-popup #leads-popup-close").css('color','#901EFF');
          change_scrollbar_color('#901EFF','#901EFF');

      });

      var sort_id = sessionStorage.getItem("leadsort");
      if(sort_id){
          $("#sort_leads option[value='"+sort_id+"']").prop("selected", "selected");
      }
      var client_sort_id = sessionStorage.getItem("clientsort");
      if(client_sort_id){
          $("#sort_clients option[value='"+client_sort_id+"']").prop("selected", "selected");
      }
      var contract_sort_id = sessionStorage.getItem("contractsort");
      if(contract_sort_id){
          $("#sort_contracts option[value='"+contract_sort_id+"']").prop("selected", "selected");
      }
    //  $('#leads_btn').click();
     // $('#clients_btn').click();
      //$('#contracts_btn').click(); 
      $("#leads-popup-close").click(function(){
        $("#leads_btn_close").css('display','none');
        $("#leads-popup").css("width", "355px");
        $('#lead-expand').removeClass("fa fa-arrow-right"); 
        $('#lead-expand').addClass("fa fa-arrow-left");
        $("#leads-popup").removeClass("open");
      });
      $("#sort_leads").select2();
      $("#sort_leads").change(function(){
         $('#leads_btn').click(); 
      })
      $("#sort_clients").select2();
      $("#sort_clients").change(function(){
         $('#clients_btn').click(); 
      })
      $("#sort_contracts").select2();
      $("#sort_contracts").change(function(){
         $('#contracts_btn').click(); 
      })

      $("#favorite_leads").select2();
       $('#favorite_leads').change(function(){
         fl_id = $(this).val();
          load_datatable(c_module,1,url,alphabet,fl_id);
      })

      $("#own1").select2();

       
        $("#favorite_clients").select2();
        $('#favorite_clients').change(function(){
         fl_id = $(this).val();
          load_datatable(c_module,2,url,alphabet,fl_id);
      })
         $("#favorite_contracts").select2();
        $('#favorite_contracts').change(function(){
         fl_id = $(this).val();
          load_datatable(c_module,3,url,alphabet,fl_id);
      })


      $("#leads-popup-minimize").click(function(){
        $("#leads-popup").addClass('minimize');
        $(this).css('display','none');
        $("#leads-popup-maximize").css("display",'inline-block');
      });
      $("#leads-popup-maximize").click(function(){
        $("#leads-popup").removeClass('minimize');
        $(this).css('display','none');
        $("#leads-popup-minimize").css("display",'inline-block');
      });
      $("#reminders").click(function(){
        var company_name = "<?php echo $company_name; ?>";
        var record_id = "<?php echo $current_record_id; ?>";
        $("#reminderForm .company-name").html(company_name);
        $("#reminderForm #reminder_record_id").val(record_id);
      });
     
      $("#addClassSchedule #start_date2").change(function(){
        var date = $(this).val();
        $("#calendar").fullCalendar('gotoDate', date);
        $("#calendar").fullCalendar('refetchEvents'); 
      });
     
      $("#addClassSchedule #start_date2").change(function(){
        var date = $(this).val();
        $("#calendar").fullCalendar('gotoDate', date);
        $("#calendar").fullCalendar('refetchEvents'); 
      });
      $(".primary-contact").click(function(){

        var find = $(this).parent().parent().parent();
        var add = $(find).children().eq(1).children().children().children();
        var fname = $(add).find(".tab_first_name").text();
        var lname = $(add).find(".tab_last_name").text();
        var tab_title = $(add).find(".tab_title").text();
        var tab_email = $(add).find(".tab_email").text();

        // if(fname == "") { return; }
        // if(lname == "") {  return; }
        // if(tab_title == "") { return; }
        // if(tab_email == "") { return; }
        //alert("ok");
      //   var primary_contact = $(this).attr('data-id');
      //   var record_id = "<?php //echo $current_record_id; ?>";
      //   $.ajax({
      //     type:'post',
      //     url: base_url + 'modules/setPrimaryContact',
      //     data: { record_id : record_id, contact_meta_id : primary_contact },
      //     dataType: 'json',
      //     success: function(data)
      //     {
      //       window.location.reload();
      //     }
      //   });
       });

  });
</script>
<?php
function dateDiff($date1, $date2)
  {
    $date1_ts = strtotime($date1);
    $date2_ts = strtotime($date2);
    $diff = $date2_ts - $date1_ts;
    return round($diff / 86400);
  }
?>

<script type="text/javascript">

  $(document).ready(function(){
      var base_url = "<?php echo base_url(); ?>";
      $(".height-equalizer").each(function(){
        var maxHeight = 0;
        var equalizer = $(this).attr('data-equalizer');
         if ($('[data-equalizer="'+equalizer+'"]').height() > maxHeight) { maxHeight = $('[data-equalizer="'+equalizer+'"]').height(); }

        $('[data-equalizer="'+equalizer+'"]').height(maxHeight);
      });

      $("[data-smooth-scroll]").click(function() {
        var scroll_target = $(this).attr('data-smooth-scroll');
        var scroll_speed = $(this).attr('data-time');
          $('html, body').animate({
              scrollTop: $(scroll_target).offset().top - 140
          }, 500);
      });
      $("#survey_types_dropdown .dropdown-toggle").click(function(){
        $(".dropdown-menu li").removeClass("active");
      });
      $("#survey_types_dropdown .dropdown-menu li").click(function(){
        $("#survey_types_dropdown .dropdown-toggle").html($(this).text()+' <span class="caret"></span>');
        $("#frmQualify .questiondiv").hide();
        $("#frmQualify .first_que").show();
        $("#frmQualify")[0].reset();

      });

      $(".collapsed-have-height-equalizer").each(function(){
        //$(this).removeClass('in');
      });

  });


 /* $("#start_date2").on("change",function(){
          var selected = $(this).val();
          $("#end_date").val(selected);
   });
  $(document).on("change", "#end_date", function(){
        var st = $("#start_date2").val();
        var ed = $("#end_date").val();
    if(new Date(st) > new Date(ed)){
      $("#end_date").addClass("intro");
      $("#end_time").addClass("intro");
    }else
    {
      $("#end_date").removeClass("intro");
      $("#end_time").removeClass("intro");
    }
});
*/
  $(document).on('click', '#unfollow_id', function(){
    $('#modalunfollow').modal('show');
  });
  $(document).on('click', '#record_unfollow_id', function(){
    var record_id = $(".all_records").val();
      $.ajax({
          method:"post",
          url:base_url + 'booking/unfollowlead',
          data:{'record_id':record_id},
          success:function(data){window.location.reload();}
        });
  });
  $(document).on('click', '#c_unfollow_id', function(){
    $('#modalunfollowClientContract').modal('show');
  });
  $(document).on('click', '#client_contract_unfollow_id', function(){
	  var record_id = $(".all_records").val();
	  var modules="<?php echo $current_module ?>";
	  if(modules=='Contracts')
	  	  modules='Contract';
	  else	
	  	  modules='Client';	
      $.ajax({
          method:"post",
          url:base_url + 'booking/unfollowClientContract',
          data:{'record_id':record_id,'module':modules},
          success:function(data){window.location.reload();}
        });
  });
  $(document).on('change', '#start_date2', function(){
    var start_date = $(this).val();
    var today = new Date();
    var dd = today.getDate();
    var mm = today.getMonth()+1;
    var yy = today.getFullYear();
    var todayDate = mm + '/' + dd + '/' + yy;
     if(new Date(start_date)< new Date(todayDate)){
      $("#start_date2").addClass("intro");
      $('#end_date').val('');
      $('#end_time').val('');
      $('#start_time').val('');
    }
    else{
     $("#start_date2").removeClass("intro");
      //$('#start_time').val('12:00 am');
      $('#end_date').val(start_date);
      //$('#end_time').val('1:00 am');
      //alert('true');
    }
  });

  $(document).on('click', '#add-notification-btn', function(){
    // body...
      var html1 = ' <div class="col-sm-3 col-xs-6" style="padding-right:0"><label class="control-label" for="textfield">Notification</label><select name="notification_via" id="calendar_type" class="notification-via"><option value="1">Email</option></select></div><div class="col-sm-3 col-xs-6 all_dv repeat"><label class="control-label" for="textfield"></label><input type="number" id="calendar_type" min = "1" max= "60" name="notification_interval" placeholder="before" class="before-time"></div><div class="col-sm-3 col-xs-6 all_dv note"><label class="control-label" for="textfield"></label><select id="calendar_type" name="notification_type" class="notification-via"><option selected value="3">minutes</option><option value="1">hours</option><option value="2">days</option></select></div><i class="fas fa-times close" id="close-notification"></i>'
              $('.get-notify').html(html1);
              $('#notification_interval').val(1);
              $('.before-time').val(10);
  });

$(document).on('click', '#close-notification', function (){
   $('#notification_interval').val(0);
  $(this).parent().html(''); 
});

$(document).on('change', '.notification-via', function(){
  $(".before-time").val(1);
  if($(this).val() == 1){
      $('.before-time').attr({
        "min":1,
        "max":12,
      });

  }else if($(this).val() == 3)
  {
     $('.before-time').attr({
        "min":1,
        "max":60,
      });
  }
  else{
      $('.before-time').attr({
        "min":1,
        "max":7,
      });
  }
});
  $(document).on('click', '.select-cat', function(){
    
    var cat_id = $(this).attr('data-cat');
    var className = $(this).attr('id');
    if('.qualify_now:visible'){
        $('.qualify_now').css('display', 'none');
    }
    $("#frmQualify")[0].reset();

    $('.btnNext').css('display', 'block');
    $('.btnNext').next('.btnSubmit').css('display', 'none');
   /* $('.btnSubmit').css('display', 'none');*/

    $('.others').next().next("input[type='text']").prop('disabled', true);

  $('.'+className +' '+'.form-group').first().css('display', 'block');
    $('.questions').find('.'+className).css('display', 'block');

  });
var link;
$(document).on('click', '.opener', function(e){     
     e.preventDefault(); 
     link = $(this).attr('href');

    if($(this).attr('data-id')==1){
       $('#reassigned  .title').text('Reassigned To Opener');
       $('#reassigned').modal('show'); 
      }
      else{
        $('#reassigned  .title').text('Reassigned To Closer');
        $('#reassigned').modal('show');}     
});
$('#reassigned .ignore').click(function (){
      $('#reassigned').modal('hide');
});
$('#reassigned .confirm').click(function(){
  window.location.href=link;
});
$(document).on('click', '#convert-to-client', function(){
  var base_url = "<?php echo base_url(); ?>";
  $.ajax({
    type: "post",
    url: base_url+ 'modules/getServiceType',
    data:{ cm:'Leads' },
    dataType: 'json',
    success: function(data)
    {
      var serviceTypes = data.result[0]['option_value'];
      $("#Service_Type").html('');
      if(data.status != false && serviceTypes != null && serviceTypes != '')
      {
        var arr = serviceTypes.split(',');
        var html = '';
        for(var i=0; i< arr.length; i++)
        {
          html += '<option value="'+arr[i]+'">'+arr[i]+'</option>';
        }
        $("#Service_Type").html(html);
        $("#Service_Type").select2({
         placeholder: "Choose Service Type",
         allowClear: true,
         });
        UpdateServices();
      }
    }
  });
});
$('#expected_start_date').datepicker({
  dateFormat: 'mm/dd/yy',
  minDate: 0,
});
function getCurrentTime()
{
 var date = new Date();
 var hr = date.getHours();
 var min = date.getMinutes();
 var ss = hr < 12 ? ' am' : ' pm';
 hr =+ hr % 12 || 12;
 min = parseInt(min);
 var hr1 = hr;
 var min1 = min;
 var ss1 = ss;
 var result = Math.floor(min/15);
 switch(result)
 {
   case 0:
    min = '15'; min1 = '30';
   break;
   case 1:
    min = '30'; min1 = '45';
   break;
   case 2:
    min = '45';
    if(hr == 11 && ss == ' am'){ hr1 = 12; min1 = '0'; ss1 = ' pm'; }
    else if(hr == 11 && ss == ' pm'){ hr1 = 12; min1 = '0'; ss1 = ' am'; }
    else if(hr == 12 && ss == ' am'){ hr1 = 1; min1 = '0'; }
    else if(hr == 12 && ss ==' pm'){ hr1 = 1; min1 = '0'; }
    else { hr1 = hr + 1; min1 = '0';}
   break;
   case 3:
    if(hr == 11 && ss == ' am')
    {
      hr = 12; min = '0'; ss = ' pm'; hr1 = 12; min1 = '15'; ss1 = ' pm';
    }
    else if( hr == 11 && ss == ' pm')
    {
      hr = 12; min = '0'; ss = ' am'; hr1 = 12; min1 = '15'; ss1 = ' am';
    }
    else
    {
      hr = hr1 = hr+1; min = '0'; min1 = '15';
    }
   break;
 }
 min = min < 1 ? '0'+min : min;
 min1 = min1 < 1 ? '0'+min1 : min1;
 return hr+':'+min+ss+'T'+hr1+':'+min1+ss1;
}
function getCurrentDate()
{
 var date = new Date();
 var day = date.getDate();
 var month = date.getMonth()+1;
 var year = date.getFullYear();
 return month+'/'+day+'/'+year;
}
function getNextDate()
{
 var date = new Date();
 date.setDate(date.getDate() + 1);
 var day = date.getDate();
 var month = date.getMonth()+1;
 var year = date.getFullYear();
 return month+'/'+day+'/'+year;
}
function UpdateServices()
{
    var base_url = "<?php echo base_url(); ?>";
  var record_id = "<?php echo $current_record_id; ?>";
  $.ajax({
    type: "post",
    dataType: "json",
    url: base_url+'modules/getServicesByRecordId',
    data: { record_id : record_id,cm:'Leads'},
    success:function(data)
    {
      var services= data.result[0]['value'];
      var html ='';
      if(data.status!=false && data.result!=null && data.result!='')
      {
        var arr = services.split('____');
        if(arr.length)
        {
            $("#Service_Type").val(arr);
            $("#Service_Type").trigger('change');
        }
      }
      $("#modalConvert").modal();
    }
  });
}
var latitude;
var longitude;

function currentLocation(){
  if ("geolocation" in navigator){
     navigator.geolocation.getCurrentPosition(function(position){
       latitude = position.coords.latitude;
       longitude = position.coords.longitude;
       initMap();
     });
  }
}
function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 8,
          center: {lat: 36.2059116, lng: -113.7525038}
        });
        var geocoder = new google.maps.Geocoder;
        var infowindow = new google.maps.InfoWindow;
        setTimeout(function(){ 
          geocodeLatLng(geocoder, map, infowindow);
          }, 1000);
      }

function geocodeLatLng(geocoder, map, infowindow) {
  var latlng = {lat: parseFloat(latitude), lng: parseFloat(longitude)};
  console.log(latlng);
  geocoder.geocode({'location': latlng}, function(results, status) {
  if (status === 'OK') {
    if (results[0]) {
      map.setZoom(11);
      var marker = new google.maps.Marker({
        position: latlng,
        map: map
      });
      console.log(results[0].formatted_address);
      $(".event_location").val(results[0].formatted_address);
    }else{
      alert("No location found.");
    } 
  } 
  });
}
// open map in app
function mapsSelector(formID)
{
var address = $("#addClassSchedule .event_location").val();

 if(address)
 {
  if /* if we're on iOS, open in Apple Maps */
     ((navigator.platform.indexOf("iPhone") != -1) ||
      (navigator.platform.indexOf("iPod") != -1) ||
      (navigator.platform.indexOf("iPad") != -1))
   {
     window.open("maps://maps.google.com/maps?daddr="+address+"&amp;ll=");
   }
   else
   {
     window.open("https://www.google.com/maps?daddr="+address+"&amp;ll=");
   }
 }else
 {
  alert("Please fill out address field");
 }   
}


/*Google place Autocomplete */
var placeSearch, autocomplete;
      var componentForm = {
        street_number: 'short_name',
        route: 'long_name',
        locality: 'long_name',
        administrative_area_level_1: 'short_name',
        country: 'long_name',
        postal_code: 'short_name'
      };

      function initAutocomplete() {
        // Create the autocomplete object, restricting the search to geographical
        // location types.
        autocomplete = new google.maps.places.Autocomplete(
            /** @type {!HTMLInputElement} */(document.getElementById('event_location')),
            {types: ['geocode']});
         autocomplete = new google.maps.places.Autocomplete(
            /** @type {!HTMLInputElement} */(document.getElementById('event_location2')),
            {types: ['geocode']});

            autocomplete = new google.maps.places.Autocomplete(
            /** @type {!HTMLInputElement} */(document.getElementById('event_location3')),
            {types: ['geocode']});

        // When the user selects an address from the dropdown, populate the address
        // fields in the form.
        autocomplete.addListener('place_changed', fillInAddress);
      }

      function fillInAddress() {
        // Get the place details from the autocomplete object.
        var place = autocomplete.getPlace();

        for (var component in componentForm) {
          document.getElementById(component).value = '';
          document.getElementById(component).disabled = false;
        }

        // Get each component of the address from the place details
        // and fill the corresponding field on the form.
        for (var i = 0; i < place.address_components.length; i++) {
          var addressType = place.address_components[i].types[0];
          if (componentForm[addressType]) {
            var val = place.address_components[i][componentForm[addressType]];
            document.getElementById(addressType).value = val;
          }
        }
      }

      // Bias the autocomplete object to the user's geographical location,
      // as supplied by the browser's 'navigator.geolocation' object.
      function geolocate() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var geolocation = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };
            var circle = new google.maps.Circle({
              center: geolocation,
              radius: position.coords.accuracy
            });
            autocomplete.setBounds(circle.getBounds());
          });
        }
      }
 $(document).on('click','.add_invite',function(){
    
    var html = '<div class="controls" style="margin-bottom: 5px;"><input class="input-xlarge form-control invite auto-email" name="invite[]" type="text" value="" required autocomplete="off" placeholder="Enter email">    <i class="fa fa-times remove_invite" aria-hidden="true"></i>  <div class="show_avail" style="color:red;font-size: 12px;display: none;">User not available on this date time!</div> </div> ';     
    
    //console.log(html);
    $('.invite_dv').append(html);
    
  });
  $(document).on('click','.remove_invite',function(){   
     $('.check_guest').html('');
    $(this).parent().remove();
    $('.add_invite').show();
    $('.update_schedule_timing').attr('disabled', false);
  });

  function hasDuplicates(array) {
    var valuesSoFar = Object.create(null);
    for (var i = 0; i < array.length; ++i) {
        var value = array[i];
        if (value in valuesSoFar) {
            return true;
        }
        valuesSoFar[value] = true;
    }
    return false;
  }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAmw-ajRb-0ytRRavjIK52f6IbTIB7vrBY&libraries=places&callback=initAutocomplete"></script>
<script type="text/javascript">
  $(document).on('click','#lead-expand',function(){
      if($(this).hasClass('fa-arrow-left')){
          $(this).removeClass("fa fa-arrow-left"); 
          $(this).addClass("fa fa-arrow-right");
          $("#leads-popup").css("width", "1110px");
          $('#leads-popup #leads-data-table_filter input').attr('style', 'width: auto !important');
          $('#leads-popup .select2-container').css('max-width','25%');
          /*$(this).css('cursor','e-resize');*/
      }else{
          $("#leads-popup").css("width", "355px");
          $(this).removeClass("fa fa-arrow-right"); 
          $(this).addClass("fa fa-arrow-left");
          $('#leads-popup #leads-data-table_filter input').attr('style', 'width: 100px !important');
          $('#leads-popup .select2-container').css('max-width','50%');
          /*$(this).css('cursor','w-resize');*/
      }
  })


function change_scrollbar_color(color,hoverColor){
     
    picker = ":not(body):not(html)::-webkit-scrollbar-thumb {background:" + color + ";}";
    picker2 =":not(body):not(html):hover::-webkit-scrollbar-thumb {background:" + hoverColor + ";}";
    new_stylesheet = "<style type='text/css' id='currentCSS'>" + picker+ picker2 + "</style>";

    existingStylesheet = $("#currentCSS");
    
    if (existingStylesheet.length) {
      existingStylesheet.replaceWith(new_stylesheet);
    } else {
      $(new_stylesheet).appendTo('head');
    }
}

function load_datatable(type,module_id,url,keyword,fav_list_id){
  
  var spage="<?php echo isset($_GET['spage'])?$_GET['spage']:''; ?>"; 
   
  $("#leads-data-table").dataTable({
            
              "order": [[ 0, "desc" ]],
              "oLanguage": {
              "sEmptyTable": "No "+ type +" available",
              "sSearchPlaceholder": "Search",
              "sProcessing": "<div align='center'><img style='position:relative;' src='<?php echo base_url(); ?>assets/images/ajax-loader.gif'></div>"},
              "ordering": true,
              /*"searching": false,*/
              "sAjaxSource": url,
              "bProcessing": true,
              "bServerSide": true,
               "aLengthMenu": [[10,25,50, 100, 200, 300,400 ,500], [10,25,50, 100, 200, 300,400 ,500]],
              "iDisplayLength":10,
            //  "iDisplayStart":parseInt(spage-1)*10,
              //"responsive": true,
              "bDestroy": true,
              "aoColumnDefs": [
                  {"sClass": "hide", "aTargets": [0]},
                  { "orderable": false, "aTargets":"mt-head"},
                 
              ],

              "fnServerParams": function ( aoData ) {
                  aoData.push( { "name": "alphabet", "value": keyword } );
                  aoData.push( { "name": "fl_id", "value": fav_list_id } );
                  aoData.push( { "name": "module_id", "value": module_id } );
              }
          });
}
$(document).ready(function(){
  $(window).scroll(function(){
       var top=$(window).scrollTop();
       if(top>315){
         $('#second_leads_btn').addClass('sticky-module');
         $('#second_clients_btn').addClass('sticky-module');
         $('#second_contracts_btn').addClass('sticky-module');
       }
       if(top<315){
         $('#second_leads_btn').removeClass('sticky-module');
         $('#second_clients_btn').removeClass('sticky-module');
         $('#second_contracts_btn').removeClass('sticky-module'); 
       }
  });
  //details
  $(document).on('click','#edit_details',function(){
          $('#edit_details_division').css('display','none');
          $('#edit_details_start_division').css('display','block');
          $(this).css('display','none');
          $('.card-footer').css('display','none');
          //alert('edit');
  });

   $(document).on('click','#update_details',function(){
                    $('#details_form').ajaxSubmit({
                        dataType:'json',
                        success:function(data)
                        { 
                          window.location.reload();
                        }
                    });
   });
    $(document).on('click','#Cancle_update_details',function(){
       $('#edit_details_start_division').css('display','none');
          $('#edit_details_division').css('display','block');
          $('#edit_details').css('display','inline-block');
          $('.card-footer').css('display','block');

    });
    //person two
     $(document).on('click','#edit_person_two',function(){
          $('#edit_p2_division').css('display','none');
          $('#edit_p2_start_division').css('display','block');
          $(this).css('display','none');
          $("#book_p2").css('display','none');
    });

   $(document).on('click','#update_p2',function(){
                    $('#p2_form').ajaxSubmit({
                        dataType:'json',
                        success:function(data)
                        { 
                          window.location.reload();
                        }
                    });
   });
    $(document).on('click','#Cancle_update_p2',function(){
          $('#edit_p2_start_division').css('display','none');
          $('#edit_p2_division').css('display','block');
          $('#edit_person_two').css('display','inline-block');
          $("#book_p2").css('display','block');
    });

    //person three
     $(document).on('click','#edit_person_three',function(){
          $('#edit_p3_division').css('display','none');
          $('#edit_p3_start_division').css('display','block');
          $(this).css('display','none');
          $("#book_p3").css('display','none');
    });

   $(document).on('click','#update_p3',function(){
                    $('#p3_form').ajaxSubmit({
                        dataType:'json',
                        success:function(data)
                        { 
                          window.location.reload();
                        }
                    });
   });
    $(document).on('click','#Cancle_update_p3',function(){
          $('#edit_p3_start_division').css('display','none');
          $('#edit_p3_division').css('display','block');
          $('#edit_person_three').css('display','inline-block');
          $("#book_p3").css('display','block');
    });

    //person four
     $(document).on('click','#edit_person_four',function(){
          $('#edit_p4_division').css('display','none');
          $('#edit_p4_start_division').css('display','block');
          $(this).css('display','none');
          $("#book_p4").css('display','none');
    });

   $(document).on('click','#update_p4',function(){
                    $('#p4_form').ajaxSubmit({
                        dataType:'json',
                        success:function(data)
                        { 
                          window.location.reload();
                        }
                    });
   });
    $(document).on('click','#Cancle_update_p4',function(){
          $('#edit_p4_start_division').css('display','none');
          $('#edit_p4_division').css('display','block');
          $('#edit_person_four').css('display','inline-block');
          $("#book_p4").css('display','block');
    });

    //person five
     $(document).on('click','#edit_person_five',function(){
          $('#edit_p5_division').css('display','none');
          $('#edit_p5_start_division').css('display','block');
          $(this).css('display','none');
          $("#book_p5").css('display','none');
    });

   $(document).on('click','#update_p5',function(){
                    $('#p5_form').ajaxSubmit({
                        dataType:'json',
                        success:function(data)
                        { 
                          window.location.reload();
                        }
                    });
   });
    $(document).on('click','#Cancle_update_p5',function(){
          $('#edit_p5_start_division').css('display','none');
          $('#edit_p5_division').css('display','block');
          $('#edit_person_five').css('display','inline-block');
          $("#book_p5").css('display','block');
    });

    $(document).on('click','#general_li',function(){
          if($(this).hasClass("active"))
          {   $("#parent_general").css("display",'block');
              $("#parent_company").css("display","none");   }
     });
    $(document).on('click','#parent_li',function(){
           if($(this).hasClass("active"))
          {   $("#parent_general").css("display",'none');
              $("#parent_company").css("display","block");  }
     });
    //General company
     $(document).on('click','#edit_general_company',function(){
          $('#edit_general_division').css('display','none');
          $('#edit_general_start_division').css('display','block');
          $(this).css('display','none');
    });

     $(document).on('click','#update_general',function(){
                      $('#general_form').ajaxSubmit({
                          dataType:'json',
                          success:function(data)
                          { 
                            window.location.reload();
                          }
                      });
     });
    $(document).on('click','#Cancle_update_general',function(){
          $('#edit_general_start_division').css('display','none');
          $('#edit_general_division').css('display','block');
          $('#edit_general_company').css('display','inline-block');
    });
    //parent company
     $(document).on('click','#edit_parent_company',function(){
          $('#edit_parent_division').css('display','none');
          $('#edit_parent_start_division').css('display','block');
          $(this).css('display','none');
    });

     $(document).on('click','#update_parent',function(){
                      $('#parent_form').ajaxSubmit({
                          dataType:'json',
                          success:function(data)
                          { 
                            window.location.reload();
                          }
                      });
     });
    $(document).on('click','#Cancle_update_parent',function(){
          $('#edit_parent_start_division').css('display','none');
          $('#edit_parent_division').css('display','block');
          $('#edit_parent_company').css('display','inline-block');
    });

    $(document).on("click","#export_indicator",function(){
            if($(this).prop("checked") == true){
              $(this).val("yes");
            }
            else if($(this).prop("checked") == false){
              $(this).val("");
            }
    });
     //Additional company
     $(document).on('click','#edit_additional_company',function(){
          $('#edit_additional_division').css('display','none');
          $('#edit_additional_start_division').css('display','block');
          $(this).css('display','none');
    });

     $(document).on('click','#update_addtional',function(){
                      $('#additional_form').ajaxSubmit({
                          dataType:'json', 
                          success:function(data)
                          { 
                            window.location.reload();
                          }
                      });
     });
    $(document).on('click','#Cancle_update_additional',function(){
          $('#edit_additional_start_division').css('display','none');
          $('#edit_additional_division').css('display','block');
          $('#edit_additional_company').css('display','inline-block');
    });

    //Lead processor information
     $(document).on('click','#edit_lead_processor',function(){
          $('#edit_lead_division').css('display','none');
          $('#edit_lead_start_division').css('display','block');
          $(this).css('display','none');
                return false;
    });

     $(document).on('click','#update_lead',function(){
                      $('#lead_form').ajaxSubmit({
                          dataType:'json',
                          success:function(data)
                          { 
                             window.location.reload();
                          }
                      });
     });
    $(document).on('click','#Cancle_update_lead',function(){
          $('#edit_lead_start_division').css('display','none');
          $('#edit_lead_division').css('display','block');
          $('#edit_lead_processor').css('display','inline-block');
    });


     $(".primary-contact").click(function(){
        var find = $(this).parent().parent().parent();
        var add = $(find).children().eq(1).children().children().children();
        var fname = $(add).find(".tab_first_name").text();
        var lname = $(add).find(".tab_last_name").text();
        var tab_title = $(add).find(".tab_title").text();
        var tab_email = $(add).find(".tab_email").text();

        // if(fname == "") { alert("First name is required"); return; }
        // if(lname == "") { alert("Last name is required"); return; }
        // if(tab_title == "") { alert("Title is required"); return; }
        // if(tab_email == "") { alert("Email is required"); return; }

              var primary_contact = $(this).attr('data-id');
              var record_id = "<?php echo $current_record_id; ?>";
              $.ajax({
                type:'post',
                url: base_url + 'modules/setPrimaryContact',
                data: { record_id : record_id, contact_meta_id : primary_contact },
                dataType: 'json',
                success: function(data)
                {
                 // window.location.reload();
                }
              });
            

         
            $.ajax({
              type:'post',
              url: base_url + 'modules/update_tab',
              data: { record_id : record_id, contact_meta_id : primary_contact },
              dataType: 'json',
              success: function(data)
              {
                window.location.reload();
              }
            });
       });
        

// /* Auto add end date and end time */
// $(document).on('click','#addClassSchedule #start_time', function(){
//   $(this).addClass('clicked');
// })
// $(document).on("click", ".ui-timepicker-viewport a", function(){
//   availCheck();
//   if(!$('#addClassSchedule #start_time').hasClass('clicked'))
//   {
//    return;
//   }
//   else
//   {   
//     if($('#addClassSchedule #start_time').timepicker('getTime'))
//     {
//       $("#addClassSchedule #start_time").removeClass('clicked');  
//     }
//     else
//     {
//       $("#addClassSchedule #start_time").removeClass('clicked');
//       return;
//     }
//   }
//   var theTime = $(this).text().split(":");
//   var theTime1 = theTime[1].split(" ");
//   var time_min = theTime1[0]; 
//   var theTime3 = '00';
//   var theTime2;
// //  var theTimearrr = parseInt(theTime1);
//  if (theTime[0]=='12' && theTime1[1]=='am') { 
//    if(theTime1[0] == '45')
//    {
//       theTime[0]=0+1;
//       theTime3 = '00';
//    }
//    else
//    {
      
//       theTime3 = parseInt(theTime1[0])+15;
//    }
//    //theTime[0]=0+1;
//    theTime2 = theTime[0];
//    var select3 = $("#start_date2").val();
//    var selected11 = $("#end_date").val(select3);
// }
//   else if(theTime[0]=='12' &&  theTime1[1]=='pm')
//   { 
//     if(theTime1[0] == '45')
//     {
//       theTime[0]=0+1;
//       theTime3 = '00';
//     }
//     else
//     {
//       theTime3 = parseInt(theTime1[0])+15;
//     }
//     theTime1[1]='pm';
//     theTime2 = theTime[0];
//     var select3 = $("#start_date2").val();
//     var selected11 = $("#end_date").val(select3);
//   }
//   else if(theTime[0]=='11' &&  theTime1[1]=='pm')
//   {
//     if(theTime1[0] == '45')
//     {
//       theTime2=+theTime[0]+1;
//       theTime3 = '00';
//       theTime1[1]='am';
//       var selected111 = $("#end_date").val();
//       var date =new Date(selected111);
//       date.setDate(date.getDate() + 1);
//       var dd = date.getDate();
//       var mm = date.getMonth() + 1;
//       var y = date.getFullYear();
//       var someFormattedDate = mm + '/' + dd + '/' + y;
//       $("#end_date").val(someFormattedDate);
//     }
//     else
//     {
//       theTime3 = parseInt(theTime1[0])+15;
//       theTime2 = theTime[0];
//       var select3 = $("#start_date2").val();
//       var selected11 = $("#end_date").val(select3);
//     }
       
//   }else if(theTime[0]=='11' &&  theTime1[1]=='am')
//    {
//       if(theTime1[0] == '45')
//       {
//         theTime2=+theTime[0]+1;
//         theTime1[1]='pm';
//         theTime3 = '00';
//       }
//       else
//       {
//         theTime2 = theTime[0];
//         theTime3 = parseInt(theTime1[0])+15; 
//         theTime1[1]='am'; 
//       }
//       var select3 = $("#start_date2").val();
//       var selected11 = $("#end_date").val(select3);
//    }
//  else
//   {
//       if(theTime1[0] == '45')
//       {
//         theTime2=parseInt(theTime[0])+1;
//         theTime3 = '00';
//       }
//       else
//       {
//         theTime2 = theTime[0];
//         theTime3 = parseInt(theTime1[0])+15; 
//       }
//       var select3 = $("#start_date2").val();
//       var selected11 = $("#end_date").val(select3);
//     }
//     $("#end_time").val(theTime2+":"+theTime3+" "+theTime1[1]);
// });


  /* Auto add end date and end time */
  $(document).on('click','#addClassSchedule #start_time', function(){
    $(this).addClass('clicked');
  })
  $(document).on("click", ".ui-timepicker-list li", function(){
    availCheck();
    if(!$('#addClassSchedule #start_time').hasClass('clicked'))
    {
     return;
    }
    else
    {   
      if($('#addClassSchedule #start_time').timepicker('getTime'))
      {
        $("#addClassSchedule #start_time").removeClass('clicked');  
      }
      else
      {
        $("#addClassSchedule #start_time").removeClass('clicked');
        return;
      }
    }

    var start_date=$("#addClassSchedule #start_date2").val();
    var start_time=$("#addClassSchedule #start_time").val();
    
    var end_timeAndDate=moment(start_date+' '+start_time).add(15,'minutes');
    
    $("#addClassSchedule #end_date").val(end_timeAndDate.format('MM/DD/YY'));
    $("#addClassSchedule #end_time").val(end_timeAndDate.format('HH:mm'));
    /*var theTime = $(this).text().split(":");
    var theTime1 = theTime[1].split(" ");
    var hour = theTime[0];
    var time_min = theTime1[0]; 

    var theTime2 = parseInt(hour) + parseInt(1);  
    if(hour == "23")
    { 
        theTime2 = parseInt(0);
        var selected111 = $("#addClassSchedule #end_date").val();
        var date =new Date(selected111);
        date.setDate(date.getDate());
        var dd = date.getDate() + 1 ;
        var mm = date.getMonth() + 1;
        var y = date.getFullYear();
        var someFormattedDate = mm + '/' + dd + '/' + y;
        $("#addClassSchedule #end_date").val(someFormattedDate);
    }
    var x =$("#addClassSchedule #end_time").val(theTime2+":"+time_min);*/

  });

})
</script>
<script type="text/javascript">
$(document).on('click','#send_proposal',function(){
    $('#is_create_pdf').val(0);
    if(!$('#proposal_name').val()){
      alert('Proposal Name is required')
    }
    else if(!$('#proposal_email').val()){
      alert('Email is required')
    }else if(!$('#proposal_service').val()){
      alert('Service Type is required')
    }else{
        $('#proposal_send').ajaxSubmit({
            dataType:'json',
            success:function(data)
            { 
              if(data.result=='success'){
               Swal.fire(
                  'Proposal sent Successfully !',
                  "You can track proposal document",
                  'success'
                )
               window.location.reload();

             }else{

                Swal.fire(
                  'Proposal Sending failed!',
                  data.error_description,
                  'error'
                )
                window.location.reload();
             }
           }
        });
    }
});
$(document).on('click','#create_proposal',function(){
    $('#is_create_pdf').val(1);
    if(!$('#proposal_name').val()){
      alert('Proposal Name is required')
    }
    else if(!$('#proposal_email').val()){
      alert('Email is required')
    }else if(!$('#proposal_service').val()){
      alert('Service Type is required')
    }else{
        $('#proposal_send').ajaxSubmit({
            dataType:'html',
            beforeSend:function(){
              $('#modalSendProposal .loader').show();
              $('#create_proposal').attr('disabled',true);
              $('#ignore_proposal').hide();
            },
            success:function(data)
            { 
               $('#preview_proposal').attr('href',"<?php echo base_url()?>proposal/preview/"+data);
               $('#modalSendProposal .loader').hide();
               $('#create_proposal').removeAttr('disabled');
               $('#create_proposal').hide();
               $('#send_proposal').show();
               $('#preview_proposal').show();   
            }
        });
    }
});
</script>